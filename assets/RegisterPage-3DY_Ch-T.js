import{b as v,u as y,r as N,j as e,H as C,B as P,S as d,G as F,t as r,L as R,d as S}from"./index-CDpl47g9.js";import{u}from"./useMutation-DIYnrPCV.js";import{I as l}from"./input-jqe7bvcL.js";import{L as i}from"./label-BL2PAQ_X.js";function E(){const{login:g,loginWithGoogle:h}=v(),m=y(),[a,x]=N.useState({name:"",username:"",email:"",password:"",confirmPassword:""}),c=u({mutationFn:S,onSuccess:s=>{r.success("Registration successful! Logging you in..."),f(a.email,a.password)},onError:s=>{var n,o;r.error(((o=(n=s.response)==null?void 0:n.data)==null?void 0:o.message)||"Registration failed.")}}),p=u({mutationFn:h,onSuccess:s=>{s.success?m("/dashboard"):r.error(s.error||"Google login failed.")},onError:()=>{r.error("An unexpected error occurred during Google sign-in.")}}),t=s=>{const{name:n,value:o}=s.target;x(w=>({...w,[n]:o}))},j=s=>{if(s.preventDefault(),a.password!==a.confirmPassword){r.error("Passwords do not match.");return}if(a.password.length<8){r.error("Password must be at least 8 characters long.");return}c.mutate(a)},f=async(s,n)=>{try{(await g(s,n)).accessToken?m("/dashboard"):(r.info("Please log in with your new credentials."),m("/login"))}catch{r.error("Failed to automatically log in."),m("/login")}},b=s=>{p.mutate(s.credential)};return e.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center px-4 py-12 text-white",children:[e.jsxs(C,{children:[e.jsx("title",{children:"Register - Ripground"}),e.jsx("meta",{name:"description",content:"Create a new account to join the Ripground community and start your journey."})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Create an Account"}),e.jsx("p",{className:"mt-3 text-neutral-300",children:"Join our community to start your journey."})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"First Name"}),e.jsx(l,{id:"name",name:"name",value:a.name,onChange:t,required:!0,className:"mt-2 bg-neutral-800 border-neutral-700",autoComplete:"given-name"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"surname",children:"Surname"}),e.jsx(l,{id:"surname",name:"surname",value:a.surname,onChange:t,required:!0,className:"mt-2 bg-neutral-800 border-neutral-700",autoComplete:"family-name"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"username",children:"Username"}),e.jsx(l,{id:"username",type:"username",name:"username",value:a.username,onChange:t,required:!0,className:"mt-2 bg-neutral-800 border-neutral-700",autoComplete:"username"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email Address"}),e.jsx(l,{id:"email",type:"email",name:"email",value:a.email,onChange:t,required:!0,className:"mt-2 bg-neutral-800 border-neutral-700",autoComplete:"email"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsx(l,{id:"password",type:"password",name:"password",value:a.password,onChange:t,required:!0,className:"mt-2 bg-neutral-800 border-neutral-700",autoComplete:"new-password"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(l,{id:"confirmPassword",type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:t,required:!0,className:"mt-2 bg-neutral-800 border-neutral-700",autoComplete:"new-password"})]}),e.jsx(P,{type:"submit",disabled:c.isPending,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 ",children:c.isPending?"Creating Account...":"Create Account"})]}),e.jsxs("div",{className:"my-6 flex items-center gap-4",children:[e.jsx(d,{className:"flex-1 bg-neutral-800"}),e.jsx("span",{className:"text-neutral-400 text-xs font-medium",children:"OR"}),e.jsx(d,{className:"flex-1 bg-neutral-800"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(F,{onSuccess:b,onError:()=>r.error("Google sign-up failed. Please try again."),theme:"filled_black",text:"signup_with",shape:"rectangular"})}),e.jsxs("div",{className:"mt-8 text-center text-sm text-neutral-400",children:["Already have an account?"," ",e.jsx(R,{to:"/login",className:"font-semibold text-blue-400 hover:text-blue-300",children:"Log in here"})]})]})]})}export{E as default};
