import{ao as w,W as bo,ap as Sf,aq as Zi,aa as Pc,ar as Mc,as as ft,at as Wt,au as kn,a7 as ot,av as br,aw as Rf,ac as xn,ax as ln,ay as wo,r as p,a6 as Ot,az as zt,aA as Dc,aB as Lc,ab as Nc,aC as Fc,aD as Jr,aE as Cf,aF as $f,aG as ht,Y as In,aH as Af,aI as Of,aJ as kf,aK as If,aL as hi,aM as Mn,aN as Bc,aO as Pf,aP as Ds,aQ as Fn,aR as Mf,$ as ge,aS as Df,aT as Lf,aU as Nf,aV as Ff,ae as Ne,aW as Bf,af as Ji,aX as jf,aY as Ls,aZ as Qr,j as G,a_ as Uf,f as Qi,a$ as Hf,z as es,b0 as zf,ah as sn,b1 as Wf,b2 as pi,b3 as jc,b4 as hr,b5 as Dt,a1 as Uc,Z as _n,b6 as Vf,b7 as Gf,b8 as Kf,a0 as eo,b9 as qf,a5 as Yf,ba as Hc,bb as Xf,bc as Io,bd as Zf,be as zc,bf as Jf,bg as Qf,bh as ed,bi as Wc,bj as td,bk as nd,bl as Po,bm as rd,aj as Vc,bn as od,bo as id,bp as sd,bq as ad,br as cd,bs as ld,bt as ud,bu as Mo,bv as fd,ag as Gc,bw as dd,bx as hd,by as pd,bz as gd,bA as Kc,bB as md,bC as Ns,bD as Fs,bE as Bs,bF as js,bG as vd,bH as yd,a4 as bd,a3 as wd,bI as qc,ai as Ed,an as xd}from"./index-CDpl47g9.js";import{v as Yc,R as bn,b as Xc,d as _d,K as Td,a as Sd,u as Sr,C as gi,T as nr,P as Rd}from"./react-three-rapier.esm-C8pms4ep.js";import{r as Cd}from"./index-Chjiymov.js";import{_ as jn,a as Un,b as $d}from"./tslib.es6-DYuMUikC.js";function Ad(t,e,n){return Math.max(e,Math.min(t,n))}const Ke={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Us(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function Hs(t,e,n,r=.15){return r===0?Ad(t,e,n):t<e?-Us(e-t,n-e,r)+e:t>n?+Us(t-n,n-e,r)+n:t}function Od(t,[e,n],[r,o]){const[[i,s],[a,c]]=t;return[Hs(e,i,s,r),Hs(n,a,c,o)]}function kd(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Id(t){var e=kd(t,"string");return typeof e=="symbol"?e:String(e)}function et(t,e,n){return e=Id(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zs(Object(n),!0).forEach(function(r){et(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Zc={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ws(t){return t?t[0].toUpperCase()+t.slice(1):""}const Pd=["enter","leave"];function Md(t=!1,e){return t&&!Pd.includes(e)}function Dd(t,e="",n=!1){const r=Zc[t],o=r&&r[e]||e;return"on"+Ws(t)+Ws(o)+(Md(n,o)?"Capture":"")}const Ld=["gotpointercapture","lostpointercapture"];function Nd(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=Ld.includes(e)?"capturecapture":"capture",o=!!~e.indexOf(r);return o&&(e=e.replace("capture","")),{device:e,capture:o,passive:n}}function Fd(t,e=""){const n=Zc[t],r=n&&n[e]||e;return t+r}function Eo(t){return"touches"in t}function Jc(t){return Eo(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function Bd(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function jd(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function Qc(t){return Eo(t)?jd(t)[0]:t}function Ud(t){return Bd(t).map(e=>e.identifier)}function Do(t){const e=Qc(t);return Eo(t)?e.identifier:e.pointerId}function Vs(t){const e=Qc(t);return[e.clientX,e.clientY]}function Hd(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:o,ctrlKey:i}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:i})}return e}function to(t,...e){return typeof t=="function"?t(...e):t}function zd(){}function Wd(...t){return t.length===0?zd:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function Gs(t,e){return Object.assign({},e,t||{})}const Vd=32;class Gd{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:o}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=o,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?to(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:o}=this;n.args=this.args;let i=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,Hd(e)),o.down=o.pressed=o.buttons%2===1||o.touches>0,i=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const R=n._delta.map(Math.abs);Ke.addTo(n._distance,R)}this.axisIntent&&this.axisIntent(e);const[s,a]=n._movement,[c,l]=r.threshold,{_step:u,values:f}=n;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(s)>=c&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=l&&f[1])):(u[0]===!1&&(u[0]=Math.abs(s)>=c&&Math.sign(s)*c),u[1]===!1&&(u[1]=Math.abs(a)>=l&&Math.sign(a)*l)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[R,k]=f;d[0]=u[0]!==!1?R-u[0]:0,d[1]=u[1]!==!1?k-u[1]:0}else d[0]=u[0]!==!1?s-u[0]:0,d[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(d);const g=n.offset,v=n._active&&!n._blocked||n.active;v&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=o[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=to(r.bounds,n)),this.setup&&this.setup()),n.movement=d,this.computeOffset()));const[y,b]=n.offset,[[x,_],[C,S]]=n._bounds;n.overflow=[y<x?-1:y>_?1:0,b<C?-1:b>S?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const P=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=Od(n._bounds,n.offset,P),n.delta=Ke.sub(n.offset,g),this.computeMovement(),v&&(!n.last||i>Vd)){n.delta=Ke.sub(n.offset,g);const R=n.delta.map(Math.abs);Ke.addTo(n.distance,R),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[R[0]/i,R[1]/i],n.timeDelta=i)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const o=this.handler(ke(ke(ke({},n),e),{},{[this.aliasKey]:e.values}));o!==void 0&&(e.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Kd([t,e],n){const r=Math.abs(t),o=Math.abs(e);if(r>o&&r>n)return"x";if(o>r&&o>n)return"y"}class qd extends Gd{constructor(...e){super(...e),et(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ke.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ke.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const o=typeof r.axisThreshold=="object"?r.axisThreshold[Jc(e)]:r.axisThreshold;n.axis=Kd(n._movement,o)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Yd=t=>t,Ks=.15,el={enabled(t=!0){return t},eventOptions(t,e,n){return ke(ke({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Ks,Ks];case!1:return[0,0];default:return Ke.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Ke.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||Yd},threshold(t){return Ke.toVector(t,0)}},Xd=0,Rr=ke(ke({},el),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=Xd){return t},bounds(t={}){if(typeof t=="function")return i=>Rr.bounds(t(i));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:o=1/0}=t;return[[e,n],[r,o]]}}),qs={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class Zd extends qd{constructor(...e){super(...e),et(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),o={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=Rr.bounds(o)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const o=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(o&&o.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=Do(e),r._pointerActive=!0,this.computeValues(Vs(e)),this.computeInitial(),n.preventScrollAxis&&Jc(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive)return;const o=Do(e);if(n._pointerId!==void 0&&o!==n._pointerId)return;const i=Vs(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Ke.sub(i,n._values),this.computeValues(i)),Ke.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const o=Do(e);if(n._pointerId!==void 0&&o!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,s]=n._distance;if(n.tap=i<=r.tapsThreshold&&s<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,c]=n._delta,[l,u]=n._movement,[f,d]=r.swipe.velocity,[g,v]=r.swipe.distance,y=r.swipe.duration;if(n.elapsedTime<y){const b=Math.abs(a/n.timeDelta),x=Math.abs(c/n.timeDelta);b>f&&Math.abs(l)>g&&(n.swipe[0]=Math.sign(a)),x>d&&Math.abs(u)>v&&(n.swipe[1]=Math.sign(c))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Jd(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=qs[e.key];if(n){const r=this.state,o=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,o),r._keyboardActive=!0,Ke.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in qs&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Jd(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Cr=typeof window<"u"&&window.document&&window.document.createElement;function tl(){return Cr&&"ontouchstart"in window}function Qd(){return tl()||Cr&&window.navigator.maxTouchPoints>1}function eh(){return Cr&&"onpointerdown"in window}function th(){return Cr&&"exitPointerLock"in window.document}function nh(){try{return"constructor"in GestureEvent}catch{return!1}}const ct={isBrowser:Cr,gesture:nh(),touch:tl(),touchscreen:Qd(),pointer:eh(),pointerLock:th()},rh=250,oh=180,ih=.5,sh=50,ah=250,ch=10,Ys={mouse:0,touch:0,pen:8},lh=ke(ke({},Rr),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&ct.pointerLock,ct.touch&&n?"touch":this.pointerLock?"mouse":ct.pointer&&!o?"pointer":ct.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?rh:void 0,!(!ct.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:o=void 0}){const i=Ke.toVector(t,n?r:o?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:t=ih,distance:e=sh,duration:n=ah}={}){return{velocity:this.transform(Ke.toVector(t)),distance:this.transform(Ke.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return oh;case!1:return 0;default:return t}},axisThreshold(t){return t?ke(ke({},Ys),t):Ys},keyboardDisplacement(t=ch){return t}});ke(ke({},el),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!ct.touch&&ct.gesture)return"gesture";if(ct.touch&&r)return"touch";if(ct.touchscreen){if(ct.pointer)return"pointer";if(ct.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const o=s=>{const a=Gs(to(n,s),{min:-1/0,max:1/0});return[a.min,a.max]},i=s=>{const a=Gs(to(r,s),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[o(),i()]:s=>[o(s),i(s)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Ke.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});ke(ke({},Rr),{},{mouseOnly:(t=!0)=>t});ke(ke({},Rr),{},{mouseOnly:(t=!0)=>t});const nl=new Map,mi=new Map;function uh(t){nl.set(t.key,t.engine),mi.set(t.key,t.resolver)}const fh={key:"drag",engine:Zd,resolver:lh};function dh(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function hh(t,e){if(t==null)return{};var n=dh(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const ph={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=ct.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},gh=["target","eventOptions","window","enabled","transform"];function Kr(t={},e){const n={};for(const[r,o]of Object.entries(e))switch(typeof o){case"function":n[r]=o.call(n,t[r],r,t);break;case"object":n[r]=Kr(t[r],o);break;case"boolean":o&&(n[r]=t[r]);break}return n}function mh(t,e,n={}){const r=t,{target:o,eventOptions:i,window:s,enabled:a,transform:c}=r,l=hh(r,gh);if(n.shared=Kr({target:o,eventOptions:i,window:s,enabled:a,transform:c},ph),e){const u=mi.get(e);n[e]=Kr(ke({shared:n.shared},l),u)}else for(const u in l){const f=mi.get(u);f&&(n[u]=Kr(ke({shared:n.shared},l[u]),f))}return n}class rl{constructor(e,n){et(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,o,i){const s=this._listeners,a=Fd(n,r),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},l=ke(ke({},c),i);e.addEventListener(a,o,l);const u=()=>{e.removeEventListener(a,o,l),s.delete(u)};return s.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class vh{constructor(){et(this,"_timeouts",new Map)}add(e,n,r=140,...o){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...o))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class yh{constructor(e){et(this,"gestures",new Set),et(this,"_targetEventStore",new rl(this)),et(this,"gestureEventStores",{}),et(this,"gestureTimeoutStores",{}),et(this,"handlers",{}),et(this,"config",{}),et(this,"pointerIds",new Set),et(this,"touchIds",new Set),et(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),bh(this,e)}setEventIds(e){if(Eo(e))return this.touchIds=new Set(Ud(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=mh(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let o;if(!(n.target&&(o=n.target(),!o))){if(n.enabled){for(const s of this.gestures){const a=this.config[s],c=Xs(r,a.eventOptions,!!o);if(a.enabled){const l=nl.get(s);new l(this,e,s).bind(c)}}const i=Xs(r,n.eventOptions,!!o);for(const s in this.nativeHandlers)i(s,"",a=>this.nativeHandlers[s](ke(ke({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const i in r)r[i]=Wd(...r[i]);if(!o)return r;for(const i in r){const{device:s,capture:a,passive:c}=Nd(i);this._targetEventStore.add(o,s,"",r[i],{capture:a,passive:c})}}}}function $n(t,e){t.gestures.add(e),t.gestureEventStores[e]=new rl(t,e),t.gestureTimeoutStores[e]=new vh}function bh(t,e){e.drag&&$n(t,"drag"),e.wheel&&$n(t,"wheel"),e.scroll&&$n(t,"scroll"),e.move&&$n(t,"move"),e.pinch&&$n(t,"pinch"),e.hover&&$n(t,"hover")}const Xs=(t,e,n)=>(r,o,i,s={},a=!1)=>{var c,l;const u=(c=s.capture)!==null&&c!==void 0?c:e.capture,f=(l=s.passive)!==null&&l!==void 0?l:e.passive;let d=a?r:Dd(r,o,u);n&&f&&(d+="Passive"),t[d]=t[d]||[],t[d].push(i)};function wh(t,e={},n,r){const o=w.useMemo(()=>new yh(t),[]);if(o.applyHandlers(t,r),o.applyConfig(e,n),w.useEffect(o.effect.bind(o)),w.useEffect(()=>o.clean.bind(o),[]),e.target===void 0)return o.bind.bind(o)}function Eh(t,e){return uh(fh),wh({drag:t},e||{},"drag")}var ut=Uint8Array,on=Uint16Array,vi=Uint32Array,ol=new ut([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),il=new ut([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xh=new ut([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sl=function(t,e){for(var n=new on(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var o=new vi(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return[n,o]},al=sl(ol,2),cl=al[0],_h=al[1];cl[28]=258,_h[258]=28;var Th=sl(il,0),Sh=Th[0],yi=new on(32768);for(var Se=0;Se<32768;++Se){var tn=(Se&43690)>>>1|(Se&21845)<<1;tn=(tn&52428)>>>2|(tn&13107)<<2,tn=(tn&61680)>>>4|(tn&3855)<<4,yi[Se]=((tn&65280)>>>8|(tn&255)<<8)>>>1}var pr=function(t,e,n){for(var r=t.length,o=0,i=new on(e);o<r;++o)++i[t[o]-1];var s=new on(e);for(o=0;o<e;++o)s[o]=s[o-1]+i[o-1]<<1;var a;if(n){a=new on(1<<e);var c=15-e;for(o=0;o<r;++o)if(t[o])for(var l=o<<4|t[o],u=e-t[o],f=s[t[o]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)a[yi[f]>>>c]=l}else for(a=new on(r),o=0;o<r;++o)t[o]&&(a[o]=yi[s[t[o]-1]++]>>>15-t[o]);return a},$r=new ut(288);for(var Se=0;Se<144;++Se)$r[Se]=8;for(var Se=144;Se<256;++Se)$r[Se]=9;for(var Se=256;Se<280;++Se)$r[Se]=7;for(var Se=280;Se<288;++Se)$r[Se]=8;var ll=new ut(32);for(var Se=0;Se<32;++Se)ll[Se]=5;var Rh=pr($r,9,1),Ch=pr(ll,5,1),Lo=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},yt=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},No=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},$h=function(t){return(t/8|0)+(t&7&&1)},Ah=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof on?on:t instanceof vi?vi:ut)(n-e);return r.set(t.subarray(e,n)),r},Oh=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new ut(0);var o=!e||n,i=!n||n.i;n||(n={}),e||(e=new ut(r*3));var s=function(ue){var Pe=e.length;if(ue>Pe){var De=new ut(Math.max(Pe*2,ue));De.set(e),e=De}},a=n.f||0,c=n.p||0,l=n.b||0,u=n.l,f=n.d,d=n.m,g=n.n,v=r*8;do{if(!u){n.f=a=yt(t,c,1);var y=yt(t,c+1,3);if(c+=3,y)if(y==1)u=Rh,f=Ch,d=9,g=5;else if(y==2){var C=yt(t,c,31)+257,S=yt(t,c+10,15)+4,P=C+yt(t,c+5,31)+1;c+=14;for(var R=new ut(P),k=new ut(19),T=0;T<S;++T)k[xh[T]]=yt(t,c+T*3,7);c+=S*3;for(var I=Lo(k),D=(1<<I)-1,L=pr(k,I,1),T=0;T<P;){var F=L[yt(t,c,D)];c+=F&15;var b=F>>>4;if(b<16)R[T++]=b;else{var W=0,z=0;for(b==16?(z=3+yt(t,c,3),c+=2,W=R[T-1]):b==17?(z=3+yt(t,c,7),c+=3):b==18&&(z=11+yt(t,c,127),c+=7);z--;)R[T++]=W}}var X=R.subarray(0,C),Y=R.subarray(C);d=Lo(X),g=Lo(Y),u=pr(X,d,1),f=pr(Y,g,1)}else throw"invalid block type";else{var b=$h(c)+4,x=t[b-4]|t[b-3]<<8,_=b+x;if(_>r){if(i)throw"unexpected EOF";break}o&&s(l+x),e.set(t.subarray(b,_),l),n.b=l+=x,n.p=c=_*8;continue}if(c>v){if(i)throw"unexpected EOF";break}}o&&s(l+131072);for(var de=(1<<d)-1,le=(1<<g)-1,ye=c;;ye=c){var W=u[No(t,c)&de],re=W>>>4;if(c+=W&15,c>v){if(i)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if(re<256)e[l++]=re;else if(re==256){ye=c,u=null;break}else{var Re=re-254;if(re>264){var T=re-257,fe=ol[T];Re=yt(t,c,(1<<fe)-1)+cl[T],c+=fe}var oe=f[No(t,c)&le],he=oe>>>4;if(!oe)throw"invalid distance";c+=oe&15;var Y=Sh[he];if(he>3){var fe=il[he];Y+=No(t,c)&(1<<fe)-1,c+=fe}if(c>v){if(i)throw"unexpected EOF";break}o&&s(l+131072);for(var Fe=l+Re;l<Fe;l+=4)e[l]=e[l-Y],e[l+1]=e[l+1-Y],e[l+2]=e[l+2-Y],e[l+3]=e[l+3-Y];l=Fe}}n.l=u,n.p=ye,n.b=l,u&&(a=1,n.m=d,n.d=f,n.n=g)}while(!a);return l==e.length?e:Ah(e,0,l)},kh=new ut(0),Ih=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Lr(t,e){return Oh((Ih(t),t.subarray(2,-4)),e)}var Ph=typeof TextDecoder<"u"&&new TextDecoder,Mh=0;try{Ph.decode(kh,{stream:!0}),Mh=1}catch{}const Dh=t=>t&&t.isCubeTexture;class Lh extends bo{constructor(e,n){var r,o;const i=Dh(e),a=((o=i?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?o:1024)/4,c=Math.floor(Math.log2(a)),l=Math.pow(2,c),u=3*Math.max(l,16*7),f=4*l,d=[i?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${c}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Yc>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},b=new Sf(1,16),x=new Zi({uniforms:y,fragmentShader:v,vertexShader:g,side:Pc});super(b,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class Nh extends Mc{constructor(e){super(e),this.type=ft}parse(e){const s=function(T,I){switch(T){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},u=`
`,f=function(T,I,D){I=I||1024;let F=T.pos,W=-1,z=0,X="",Y=String.fromCharCode.apply(null,new Uint16Array(T.subarray(F,F+128)));for(;0>(W=Y.indexOf(u))&&z<I&&F<T.byteLength;)X+=Y,z+=Y.length,F+=128,Y+=String.fromCharCode.apply(null,new Uint16Array(T.subarray(F,F+128)));return-1<W?(T.pos+=z+W+1,X+Y.slice(0,W)):!1},d=function(T){const I=/^#\?(\S+)/,D=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*FORMAT=(\S+)\s*$/,W=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let X,Y;for((T.pos>=T.byteLength||!(X=f(T)))&&s(1,"no header found"),(Y=X.match(I))||s(3,"bad initial token"),z.valid|=1,z.programtype=Y[1],z.string+=X+`
`;X=f(T),X!==!1;){if(z.string+=X+`
`,X.charAt(0)==="#"){z.comments+=X+`
`;continue}if((Y=X.match(D))&&(z.gamma=parseFloat(Y[1])),(Y=X.match(L))&&(z.exposure=parseFloat(Y[1])),(Y=X.match(F))&&(z.valid|=2,z.format=Y[1]),(Y=X.match(W))&&(z.valid|=4,z.height=parseInt(Y[1],10),z.width=parseInt(Y[2],10)),z.valid&2&&z.valid&4)break}return z.valid&2||s(3,"missing format specifier"),z.valid&4||s(3,"missing image size specifier"),z},g=function(T,I,D){const L=I;if(L<8||L>32767||T[0]!==2||T[1]!==2||T[2]&128)return new Uint8Array(T);L!==(T[2]<<8|T[3])&&s(3,"wrong scanline width");const F=new Uint8Array(4*I*D);F.length||s(4,"unable to allocate buffer space");let W=0,z=0;const X=4*L,Y=new Uint8Array(4),de=new Uint8Array(X);let le=D;for(;le>0&&z<T.byteLength;){z+4>T.byteLength&&s(1),Y[0]=T[z++],Y[1]=T[z++],Y[2]=T[z++],Y[3]=T[z++],(Y[0]!=2||Y[1]!=2||(Y[2]<<8|Y[3])!=L)&&s(3,"bad rgbe scanline format");let ye=0,re;for(;ye<X&&z<T.byteLength;){re=T[z++];const fe=re>128;if(fe&&(re-=128),(re===0||ye+re>X)&&s(3,"bad scanline data"),fe){const oe=T[z++];for(let he=0;he<re;he++)de[ye++]=oe}else de.set(T.subarray(z,z+re),ye),ye+=re,z+=re}const Re=L;for(let fe=0;fe<Re;fe++){let oe=0;F[W]=de[fe+oe],oe+=L,F[W+1]=de[fe+oe],oe+=L,F[W+2]=de[fe+oe],oe+=L,F[W+3]=de[fe+oe],W+=4}le--}return F},v=function(T,I,D,L){const F=T[I+3],W=Math.pow(2,F-128)/255;D[L+0]=T[I+0]*W,D[L+1]=T[I+1]*W,D[L+2]=T[I+2]*W,D[L+3]=1},y=function(T,I,D,L){const F=T[I+3],W=Math.pow(2,F-128)/255;D[L+0]=kn.toHalfFloat(Math.min(T[I+0]*W,65504)),D[L+1]=kn.toHalfFloat(Math.min(T[I+1]*W,65504)),D[L+2]=kn.toHalfFloat(Math.min(T[I+2]*W,65504)),D[L+3]=kn.toHalfFloat(1)},b=new Uint8Array(e);b.pos=0;const x=d(b),_=x.width,C=x.height,S=g(b.subarray(b.pos),_,C);let P,R,k;switch(this.type){case Wt:k=S.length/4;const T=new Float32Array(k*4);for(let D=0;D<k;D++)v(S,D*4,T,D*4);P=T,R=Wt;break;case ft:k=S.length/4;const I=new Uint16Array(k*4);for(let D=0;D<k;D++)y(S,D*4,I,D*4);P=I,R=ft;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_,height:C,data:P,header:x.string,gamma:x.gamma,exposure:x.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,n,r,o){function i(s,a){switch(s.type){case Wt:case ft:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=ot,s.magFilter=ot,s.generateMipmaps=!1,s.flipY=!0;break}n&&n(s,a)}return super.load(e,i,r,o)}}const rr=Yc>=152;class Fh extends Mc{constructor(e){super(e),this.type=ft}parse(e){const I=Math.pow(2.7182818,2.2);function D(h,m){for(var E=0,$=0;$<65536;++$)($==0||h[$>>3]&1<<($&7))&&(m[E++]=$);for(var A=E-1;E<65536;)m[E++]=0;return A}function L(h){for(var m=0;m<16384;m++)h[m]={},h[m].len=0,h[m].lit=0,h[m].p=null}const F={l:0,c:0,lc:0};function W(h,m,E,$,A){for(;E<h;)m=m<<8|Cn($,A),E+=8;E-=h,F.l=m>>E&(1<<h)-1,F.c=m,F.lc=E}const z=new Array(59);function X(h){for(var m=0;m<=58;++m)z[m]=0;for(var m=0;m<65537;++m)z[h[m]]+=1;for(var E=0,m=58;m>0;--m){var $=E+z[m]>>1;z[m]=E,E=$}for(var m=0;m<65537;++m){var A=h[m];A>0&&(h[m]=A|z[A]++<<6)}}function Y(h,m,E,$,A,O,N){for(var M=E,U=0,j=0;A<=O;A++){if(M.value-E.value>$)return!1;W(6,U,j,h,M);var H=F.l;if(U=F.c,j=F.lc,N[A]=H,H==63){if(M.value-E.value>$)throw"Something wrong with hufUnpackEncTable";W(8,U,j,h,M);var B=F.l+6;if(U=F.c,j=F.lc,A+B>O+1)throw"Something wrong with hufUnpackEncTable";for(;B--;)N[A++]=0;A--}else if(H>=59){var B=H-59+2;if(A+B>O+1)throw"Something wrong with hufUnpackEncTable";for(;B--;)N[A++]=0;A--}}X(N)}function de(h){return h&63}function le(h){return h>>6}function ye(h,m,E,$){for(;m<=E;m++){var A=le(h[m]),O=de(h[m]);if(A>>O)throw"Invalid table entry";if(O>14){var N=$[A>>O-14];if(N.len)throw"Invalid table entry";if(N.lit++,N.p){var M=N.p;N.p=new Array(N.lit);for(var U=0;U<N.lit-1;++U)N.p[U]=M[U]}else N.p=new Array(1);N.p[N.lit-1]=m}else if(O)for(var j=0,U=1<<14-O;U>0;U--){var N=$[(A<<14-O)+j];if(N.len||N.p)throw"Invalid table entry";N.len=O,N.lit=m,j++}}return!0}const re={c:0,lc:0};function Re(h,m,E,$){h=h<<8|Cn(E,$),m+=8,re.c=h,re.lc=m}const fe={c:0,lc:0};function oe(h,m,E,$,A,O,N,M,U,j){if(h==m){$<8&&(Re(E,$,A,N),E=re.c,$=re.lc),$-=8;var H=E>>$,H=new Uint8Array([H])[0];if(U.value+H>j)return!1;for(var B=M[U.value-1];H-- >0;)M[U.value++]=B}else if(U.value<j)M[U.value++]=h;else return!1;fe.c=E,fe.lc=$}function he(h){return h&65535}function Fe(h){var m=he(h);return m>32767?m-65536:m}const ue={a:0,b:0};function Pe(h,m){var E=Fe(h),$=Fe(m),A=$,O=E+(A&1)+(A>>1),N=O,M=O-A;ue.a=N,ue.b=M}function De(h,m){var E=he(h),$=he(m),A=E-($>>1)&65535,O=$+A-32768&65535;ue.a=O,ue.b=A}function gt(h,m,E,$,A,O,N){for(var M=N<16384,U=E>A?A:E,j=1,H;j<=U;)j<<=1;for(j>>=1,H=j,j>>=1;j>=1;){for(var B=0,$e=B+O*(A-H),Z=O*j,J=O*H,ne=$*j,ie=$*H,be,Ee,Be,Ye;B<=$e;B+=J){for(var xe=B,$t=B+$*(E-H);xe<=$t;xe+=ie){var Te=xe+ne,He=xe+Z,Ft=He+ne;M?(Pe(h[xe+m],h[He+m]),be=ue.a,Be=ue.b,Pe(h[Te+m],h[Ft+m]),Ee=ue.a,Ye=ue.b,Pe(be,Ee),h[xe+m]=ue.a,h[Te+m]=ue.b,Pe(Be,Ye),h[He+m]=ue.a,h[Ft+m]=ue.b):(De(h[xe+m],h[He+m]),be=ue.a,Be=ue.b,De(h[Te+m],h[Ft+m]),Ee=ue.a,Ye=ue.b,De(be,Ee),h[xe+m]=ue.a,h[Te+m]=ue.b,De(Be,Ye),h[He+m]=ue.a,h[Ft+m]=ue.b)}if(E&j){var He=xe+Z;M?Pe(h[xe+m],h[He+m]):De(h[xe+m],h[He+m]),be=ue.a,h[He+m]=ue.b,h[xe+m]=be}}if(A&j)for(var xe=B,$t=B+$*(E-H);xe<=$t;xe+=ie){var Te=xe+ne;M?Pe(h[xe+m],h[Te+m]):De(h[xe+m],h[Te+m]),be=ue.a,h[Te+m]=ue.b,h[xe+m]=be}H=j,j>>=1}return B}function dn(h,m,E,$,A,O,N,M,U,j){for(var H=0,B=0,$e=M,Z=Math.trunc(A.value+(O+7)/8);A.value<Z;)for(Re(H,B,E,A),H=re.c,B=re.lc;B>=14;){var J=H>>B-14&16383,ne=m[J];if(ne.len)B-=ne.len,oe(ne.lit,N,H,B,E,$,A,U,j,$e),H=fe.c,B=fe.lc;else{if(!ne.p)throw"hufDecode issues";var ie;for(ie=0;ie<ne.lit;ie++){for(var be=de(h[ne.p[ie]]);B<be&&A.value<Z;)Re(H,B,E,A),H=re.c,B=re.lc;if(B>=be&&le(h[ne.p[ie]])==(H>>B-be&(1<<be)-1)){B-=be,oe(ne.p[ie],N,H,B,E,$,A,U,j,$e),H=fe.c,B=fe.lc;break}}if(ie==ne.lit)throw"hufDecode issues"}}var Ee=8-O&7;for(H>>=Ee,B-=Ee;B>0;){var ne=m[H<<14-B&16383];if(ne.len)B-=ne.len,oe(ne.lit,N,H,B,E,$,A,U,j,$e),H=fe.c,B=fe.lc;else throw"hufDecode issues"}return!0}function hn(h,m,E,$,A,O){var N={value:0},M=E.value,U=je(m,E),j=je(m,E);E.value+=4;var H=je(m,E);if(E.value+=4,U<0||U>=65537||j<0||j>=65537)throw"Something wrong with HUF_ENCSIZE";var B=new Array(65537),$e=new Array(16384);L($e);var Z=$-(E.value-M);if(Y(h,m,E,Z,U,j,B),H>8*($-(E.value-M)))throw"Something wrong with hufUncompress";ye(B,U,j,$e),dn(B,$e,h,m,E,H,j,O,A,N)}function Lt(h,m,E){for(var $=0;$<E;++$)m[$]=h[m[$]]}function mt(h){for(var m=1;m<h.length;m++){var E=h[m-1]+h[m]-128;h[m]=E}}function Zt(h,m){for(var E=0,$=Math.floor((h.length+1)/2),A=0,O=h.length-1;!(A>O||(m[A++]=h[E++],A>O));)m[A++]=h[$++]}function Nt(h){for(var m=h.byteLength,E=new Array,$=0,A=new DataView(h);m>0;){var O=A.getInt8($++);if(O<0){var N=-O;m-=N+1;for(var M=0;M<N;M++)E.push(A.getUint8($++))}else{var N=O;m-=2;for(var U=A.getUint8($++),M=0;M<N+1;M++)E.push(U)}}return E}function Jt(h,m,E,$,A,O){var Te=new DataView(O.buffer),N=E[h.idx[0]].width,M=E[h.idx[0]].height,U=3,j=Math.floor(N/8),H=Math.ceil(N/8),B=Math.ceil(M/8),$e=N-(H-1)*8,Z=M-(B-1)*8,J={value:0},ne=new Array(U),ie=new Array(U),be=new Array(U),Ee=new Array(U),Be=new Array(U);for(let we=0;we<U;++we)Be[we]=m[h.idx[we]],ne[we]=we<1?0:ne[we-1]+H*B,ie[we]=new Float32Array(64),be[we]=new Uint16Array(64),Ee[we]=new Uint16Array(H*64);for(let we=0;we<B;++we){var Ye=8;we==B-1&&(Ye=Z);var xe=8;for(let Ce=0;Ce<H;++Ce){Ce==H-1&&(xe=$e);for(let pe=0;pe<U;++pe)be[pe].fill(0),be[pe][0]=A[ne[pe]++],Kn(J,$,be[pe]),qn(be[pe],ie[pe]),_t(ie[pe]);Tt(ie);for(let pe=0;pe<U;++pe)pn(ie[pe],Ee[pe],Ce*64)}let Ge=0;for(let Ce=0;Ce<U;++Ce){const pe=E[h.idx[Ce]].type;for(let st=8*we;st<8*we+Ye;++st){Ge=Be[Ce][st];for(let gn=0;gn<j;++gn){const rt=gn*64+(st&7)*8;Te.setUint16(Ge+0*2*pe,Ee[Ce][rt+0],!0),Te.setUint16(Ge+1*2*pe,Ee[Ce][rt+1],!0),Te.setUint16(Ge+2*2*pe,Ee[Ce][rt+2],!0),Te.setUint16(Ge+3*2*pe,Ee[Ce][rt+3],!0),Te.setUint16(Ge+4*2*pe,Ee[Ce][rt+4],!0),Te.setUint16(Ge+5*2*pe,Ee[Ce][rt+5],!0),Te.setUint16(Ge+6*2*pe,Ee[Ce][rt+6],!0),Te.setUint16(Ge+7*2*pe,Ee[Ce][rt+7],!0),Ge+=8*2*pe}}if(j!=H)for(let st=8*we;st<8*we+Ye;++st){const gn=Be[Ce][st]+8*j*2*pe,rt=j*64+(st&7)*8;for(let en=0;en<xe;++en)Te.setUint16(gn+en*2*pe,Ee[Ce][rt+en],!0)}}}for(var $t=new Uint16Array(N),Te=new DataView(O.buffer),He=0;He<U;++He){E[h.idx[He]].decoded=!0;var Ft=E[h.idx[He]].type;if(E[He].type==2)for(var tr=0;tr<M;++tr){const we=Be[He][tr];for(var it=0;it<N;++it)$t[it]=Te.getUint16(we+it*2*Ft,!0);for(var it=0;it<N;++it)Te.setFloat32(we+it*2*Ft,K($t[it]),!0)}}}function Kn(h,m,E){for(var $,A=1;A<64;)$=m[h.value],$==65280?A=64:$>>8==255?A+=$&255:(E[A]=$,A++),h.value++}function qn(h,m){m[0]=K(h[0]),m[1]=K(h[1]),m[2]=K(h[5]),m[3]=K(h[6]),m[4]=K(h[14]),m[5]=K(h[15]),m[6]=K(h[27]),m[7]=K(h[28]),m[8]=K(h[2]),m[9]=K(h[4]),m[10]=K(h[7]),m[11]=K(h[13]),m[12]=K(h[16]),m[13]=K(h[26]),m[14]=K(h[29]),m[15]=K(h[42]),m[16]=K(h[3]),m[17]=K(h[8]),m[18]=K(h[12]),m[19]=K(h[17]),m[20]=K(h[25]),m[21]=K(h[30]),m[22]=K(h[41]),m[23]=K(h[43]),m[24]=K(h[9]),m[25]=K(h[11]),m[26]=K(h[18]),m[27]=K(h[24]),m[28]=K(h[31]),m[29]=K(h[40]),m[30]=K(h[44]),m[31]=K(h[53]),m[32]=K(h[10]),m[33]=K(h[19]),m[34]=K(h[23]),m[35]=K(h[32]),m[36]=K(h[39]),m[37]=K(h[45]),m[38]=K(h[52]),m[39]=K(h[54]),m[40]=K(h[20]),m[41]=K(h[22]),m[42]=K(h[33]),m[43]=K(h[38]),m[44]=K(h[46]),m[45]=K(h[51]),m[46]=K(h[55]),m[47]=K(h[60]),m[48]=K(h[21]),m[49]=K(h[34]),m[50]=K(h[37]),m[51]=K(h[47]),m[52]=K(h[50]),m[53]=K(h[56]),m[54]=K(h[59]),m[55]=K(h[61]),m[56]=K(h[35]),m[57]=K(h[36]),m[58]=K(h[48]),m[59]=K(h[49]),m[60]=K(h[57]),m[61]=K(h[58]),m[62]=K(h[62]),m[63]=K(h[63])}function _t(h){const m=.5*Math.cos(.7853975),E=.5*Math.cos(3.14159/16),$=.5*Math.cos(3.14159/8),A=.5*Math.cos(3*3.14159/16),O=.5*Math.cos(5*3.14159/16),N=.5*Math.cos(3*3.14159/8),M=.5*Math.cos(7*3.14159/16);for(var U=new Array(4),j=new Array(4),H=new Array(4),B=new Array(4),$e=0;$e<8;++$e){var Z=$e*8;U[0]=$*h[Z+2],U[1]=N*h[Z+2],U[2]=$*h[Z+6],U[3]=N*h[Z+6],j[0]=E*h[Z+1]+A*h[Z+3]+O*h[Z+5]+M*h[Z+7],j[1]=A*h[Z+1]-M*h[Z+3]-E*h[Z+5]-O*h[Z+7],j[2]=O*h[Z+1]-E*h[Z+3]+M*h[Z+5]+A*h[Z+7],j[3]=M*h[Z+1]-O*h[Z+3]+A*h[Z+5]-E*h[Z+7],H[0]=m*(h[Z+0]+h[Z+4]),H[3]=m*(h[Z+0]-h[Z+4]),H[1]=U[0]+U[3],H[2]=U[1]-U[2],B[0]=H[0]+H[1],B[1]=H[3]+H[2],B[2]=H[3]-H[2],B[3]=H[0]-H[1],h[Z+0]=B[0]+j[0],h[Z+1]=B[1]+j[1],h[Z+2]=B[2]+j[2],h[Z+3]=B[3]+j[3],h[Z+4]=B[3]-j[3],h[Z+5]=B[2]-j[2],h[Z+6]=B[1]-j[1],h[Z+7]=B[0]-j[0]}for(var J=0;J<8;++J)U[0]=$*h[16+J],U[1]=N*h[16+J],U[2]=$*h[48+J],U[3]=N*h[48+J],j[0]=E*h[8+J]+A*h[24+J]+O*h[40+J]+M*h[56+J],j[1]=A*h[8+J]-M*h[24+J]-E*h[40+J]-O*h[56+J],j[2]=O*h[8+J]-E*h[24+J]+M*h[40+J]+A*h[56+J],j[3]=M*h[8+J]-O*h[24+J]+A*h[40+J]-E*h[56+J],H[0]=m*(h[J]+h[32+J]),H[3]=m*(h[J]-h[32+J]),H[1]=U[0]+U[3],H[2]=U[1]-U[2],B[0]=H[0]+H[1],B[1]=H[3]+H[2],B[2]=H[3]-H[2],B[3]=H[0]-H[1],h[0+J]=B[0]+j[0],h[8+J]=B[1]+j[1],h[16+J]=B[2]+j[2],h[24+J]=B[3]+j[3],h[32+J]=B[3]-j[3],h[40+J]=B[2]-j[2],h[48+J]=B[1]-j[1],h[56+J]=B[0]-j[0]}function Tt(h){for(var m=0;m<64;++m){var E=h[0][m],$=h[1][m],A=h[2][m];h[0][m]=E+1.5747*A,h[1][m]=E-.1873*$-.4682*A,h[2][m]=E+1.8556*$}}function pn(h,m,E){for(var $=0;$<64;++$)m[E+$]=kn.toHalfFloat(St(h[$]))}function St(h){return h<=1?Math.sign(h)*Math.pow(Math.abs(h),2.2):Math.sign(h)*Math.pow(I,Math.abs(h)-1)}function V(h){return new DataView(h.array.buffer,h.offset.value,h.size)}function te(h){var m=h.viewer.buffer.slice(h.offset.value,h.offset.value+h.size),E=new Uint8Array(Nt(m)),$=new Uint8Array(E.length);return mt(E),Zt(E,$),new DataView($.buffer)}function Me(h){var m=h.array.slice(h.offset.value,h.offset.value+h.size),E=Lr(m),$=new Uint8Array(E.length);return mt(E),Zt(E,$),new DataView($.buffer)}function We(h){for(var m=h.viewer,E={value:h.offset.value},$=new Uint16Array(h.width*h.scanlineBlockSize*(h.channels*h.type)),A=new Uint8Array(8192),O=0,N=new Array(h.channels),M=0;M<h.channels;M++)N[M]={},N[M].start=O,N[M].end=N[M].start,N[M].nx=h.width,N[M].ny=h.lines,N[M].size=h.type,O+=N[M].nx*N[M].ny*N[M].size;var U=Jn(m,E),j=Jn(m,E);if(j>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(U<=j)for(var M=0;M<j-U+1;M++)A[M+U]=Ct(m,E);var H=new Uint16Array(65536),B=D(A,H),$e=je(m,E);hn(h.array,m,E,$e,$,O);for(var M=0;M<h.channels;++M)for(var Z=N[M],J=0;J<N[M].size;++J)gt($,Z.start+J,Z.nx,Z.size,Z.ny,Z.nx*Z.size,B);Lt(H,$,O);for(var ne=0,ie=new Uint8Array($.buffer.byteLength),be=0;be<h.lines;be++)for(var Ee=0;Ee<h.channels;Ee++){var Z=N[Ee],Be=Z.nx*Z.size,Ye=new Uint8Array($.buffer,Z.end*2,Be*2);ie.set(Ye,ne),ne+=Be*2,Z.end+=Be}return new DataView(ie.buffer)}function nt(h){var m=h.array.slice(h.offset.value,h.offset.value+h.size),E=Lr(m);const $=h.lines*h.channels*h.width,A=h.type==1?new Uint16Array($):new Uint32Array($);let O=0,N=0;const M=new Array(4);for(let U=0;U<h.lines;U++)for(let j=0;j<h.channels;j++){let H=0;switch(h.type){case 1:M[0]=O,M[1]=M[0]+h.width,O=M[1]+h.width;for(let B=0;B<h.width;++B){const $e=E[M[0]++]<<8|E[M[1]++];H+=$e,A[N]=H,N++}break;case 2:M[0]=O,M[1]=M[0]+h.width,M[2]=M[1]+h.width,O=M[2]+h.width;for(let B=0;B<h.width;++B){const $e=E[M[0]++]<<24|E[M[1]++]<<16|E[M[2]++]<<8;H+=$e,A[N]=H,N++}break}}return new DataView(A.buffer)}function Qt(h){var m=h.viewer,E={value:h.offset.value},$=new Uint8Array(h.width*h.lines*(h.channels*h.type*2)),A={version:Ve(m,E),unknownUncompressedSize:Ve(m,E),unknownCompressedSize:Ve(m,E),acCompressedSize:Ve(m,E),dcCompressedSize:Ve(m,E),rleCompressedSize:Ve(m,E),rleUncompressedSize:Ve(m,E),rleRawSize:Ve(m,E),totalAcUncompressedCount:Ve(m,E),totalDcUncompressedCount:Ve(m,E),acCompression:Ve(m,E)};if(A.version<2)throw"EXRLoader.parse: "+er.compression+" version "+A.version+" is unsupported";for(var O=new Array,N=Jn(m,E)-2;N>0;){var M=vt(m.buffer,E),U=Ct(m,E),j=U>>2&3,H=(U>>4)-1,B=new Int8Array([H])[0],$e=Ct(m,E);O.push({name:M,index:B,type:$e,compression:j}),N-=M.length+3}for(var Z=er.channels,J=new Array(h.channels),ne=0;ne<h.channels;++ne){var ie=J[ne]={},be=Z[ne];ie.name=be.name,ie.compression=0,ie.decoded=!1,ie.type=be.pixelType,ie.pLinear=be.pLinear,ie.width=h.width,ie.height=h.lines}for(var Ee={idx:new Array(3)},Be=0;Be<h.channels;++Be)for(var ie=J[Be],ne=0;ne<O.length;++ne){var Ye=O[ne];ie.name==Ye.name&&(ie.compression=Ye.compression,Ye.index>=0&&(Ee.idx[Ye.index]=Be),ie.offset=Be)}if(A.acCompressedSize>0)switch(A.acCompression){case 0:var Te=new Uint16Array(A.totalAcUncompressedCount);hn(h.array,m,E,A.acCompressedSize,Te,A.totalAcUncompressedCount);break;case 1:var xe=h.array.slice(E.value,E.value+A.totalAcUncompressedCount),$t=Lr(xe),Te=new Uint16Array($t.buffer);E.value+=A.totalAcUncompressedCount;break}if(A.dcCompressedSize>0){var He={array:h.array,offset:E,size:A.dcCompressedSize},Ft=new Uint16Array(Me(He).buffer);E.value+=A.dcCompressedSize}if(A.rleRawSize>0){var xe=h.array.slice(E.value,E.value+A.rleCompressedSize),$t=Lr(xe),tr=Nt($t.buffer);E.value+=A.rleCompressedSize}for(var it=0,we=new Array(J.length),ne=0;ne<we.length;++ne)we[ne]=new Array;for(var Ge=0;Ge<h.lines;++Ge)for(var Ce=0;Ce<J.length;++Ce)we[Ce].push(it),it+=J[Ce].width*h.type*2;Jt(Ee,we,J,Te,Ft,$);for(var ne=0;ne<J.length;++ne){var ie=J[ne];if(!ie.decoded)switch(ie.compression){case 2:for(var pe=0,st=0,Ge=0;Ge<h.lines;++Ge){for(var gn=we[ne][pe],rt=0;rt<ie.width;++rt){for(var en=0;en<2*ie.type;++en)$[gn++]=tr[st+en*ie.width*ie.height];st++}pe++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView($.buffer)}function vt(h,m){for(var E=new Uint8Array(h),$=0;E[m.value+$]!=0;)$+=1;var A=new TextDecoder().decode(E.slice(m.value,m.value+$));return m.value=m.value+$+1,A}function Yn(h,m,E){var $=new TextDecoder().decode(new Uint8Array(h).slice(m.value,m.value+E));return m.value=m.value+E,$}function Xn(h,m){var E=Rt(h,m),$=je(h,m);return[E,$]}function Zn(h,m){var E=je(h,m),$=je(h,m);return[E,$]}function Rt(h,m){var E=h.getInt32(m.value,!0);return m.value=m.value+4,E}function je(h,m){var E=h.getUint32(m.value,!0);return m.value=m.value+4,E}function Cn(h,m){var E=h[m.value];return m.value=m.value+1,E}function Ct(h,m){var E=h.getUint8(m.value);return m.value=m.value+1,E}const Ve=function(h,m){let E;return"getBigInt64"in DataView.prototype?E=Number(h.getBigInt64(m.value,!0)):E=h.getUint32(m.value+4,!0)+Number(h.getUint32(m.value,!0)<<32),m.value+=8,E};function Ue(h,m){var E=h.getFloat32(m.value,!0);return m.value+=4,E}function ff(h,m){return kn.toHalfFloat(Ue(h,m))}function K(h){var m=(h&31744)>>10,E=h&1023;return(h>>15?-1:1)*(m?m===31?E?NaN:1/0:Math.pow(2,m-15)*(1+E/1024):6103515625e-14*(E/1024))}function Jn(h,m){var E=h.getUint16(m.value,!0);return m.value+=2,E}function df(h,m){return K(Jn(h,m))}function hf(h,m,E,$){for(var A=E.value,O=[];E.value<A+$-1;){var N=vt(m,E),M=Rt(h,E),U=Ct(h,E);E.value+=3;var j=Rt(h,E),H=Rt(h,E);O.push({name:N,pixelType:M,pLinear:U,xSampling:j,ySampling:H})}return E.value+=1,O}function pf(h,m){var E=Ue(h,m),$=Ue(h,m),A=Ue(h,m),O=Ue(h,m),N=Ue(h,m),M=Ue(h,m),U=Ue(h,m),j=Ue(h,m);return{redX:E,redY:$,greenX:A,greenY:O,blueX:N,blueY:M,whiteX:U,whiteY:j}}function gf(h,m){var E=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],$=Ct(h,m);return E[$]}function mf(h,m){var E=je(h,m),$=je(h,m),A=je(h,m),O=je(h,m);return{xMin:E,yMin:$,xMax:A,yMax:O}}function vf(h,m){var E=["INCREASING_Y"],$=Ct(h,m);return E[$]}function yf(h,m){var E=Ue(h,m),$=Ue(h,m);return[E,$]}function bf(h,m){var E=Ue(h,m),$=Ue(h,m),A=Ue(h,m);return[E,$,A]}function wf(h,m,E,$,A){if($==="string"||$==="stringvector"||$==="iccProfile")return Yn(m,E,A);if($==="chlist")return hf(h,m,E,A);if($==="chromaticities")return pf(h,E);if($==="compression")return gf(h,E);if($==="box2i")return mf(h,E);if($==="lineOrder")return vf(h,E);if($==="float")return Ue(h,E);if($==="v2f")return yf(h,E);if($==="v3f")return bf(h,E);if($==="int")return Rt(h,E);if($==="rational")return Xn(h,E);if($==="timecode")return Zn(h,E);if($==="preview")return E.value+=A,"skipped";E.value+=A}function Ef(h,m,E){const $={};if(h.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";$.version=h.getUint8(4);const A=h.getUint8(5);$.spec={singleTile:!!(A&2),longName:!!(A&4),deepFormat:!!(A&8),multiPart:!!(A&16)},E.value=8;for(var O=!0;O;){var N=vt(m,E);if(N==0)O=!1;else{var M=vt(m,E),U=je(h,E),j=wf(h,m,E,M,U);j===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${M}'.`):$[N]=j}}if((A&-5)!=0)throw console.error("EXRHeader:",$),"THREE.EXRLoader: provided file is currently unsupported.";return $}function xf(h,m,E,$,A){const O={size:0,viewer:m,array:E,offset:$,width:h.dataWindow.xMax-h.dataWindow.xMin+1,height:h.dataWindow.yMax-h.dataWindow.yMin+1,channels:h.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:h.channels[0].pixelType,uncompress:null,getter:null,format:null,[rr?"colorSpace":"encoding"]:null};switch(h.compression){case"NO_COMPRESSION":O.lines=1,O.uncompress=V;break;case"RLE_COMPRESSION":O.lines=1,O.uncompress=te;break;case"ZIPS_COMPRESSION":O.lines=1,O.uncompress=Me;break;case"ZIP_COMPRESSION":O.lines=16,O.uncompress=Me;break;case"PIZ_COMPRESSION":O.lines=32,O.uncompress=We;break;case"PXR24_COMPRESSION":O.lines=16,O.uncompress=nt;break;case"DWAA_COMPRESSION":O.lines=32,O.uncompress=Qt;break;case"DWAB_COMPRESSION":O.lines=256,O.uncompress=Qt;break;default:throw"EXRLoader.parse: "+h.compression+" is unsupported"}if(O.scanlineBlockSize=O.lines,O.type==1)switch(A){case Wt:O.getter=df,O.inputSize=2;break;case ft:O.getter=Jn,O.inputSize=2;break}else if(O.type==2)switch(A){case Wt:O.getter=Ue,O.inputSize=4;break;case ft:O.getter=ff,O.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+O.type+" for "+h.compression+".";O.blockCount=(h.dataWindow.yMax+1)/O.scanlineBlockSize;for(var N=0;N<O.blockCount;N++)Ve(m,$);O.outputChannels=O.channels==3?4:O.channels;const M=O.width*O.height*O.outputChannels;switch(A){case Wt:O.byteArray=new Float32Array(M),O.channels<O.outputChannels&&O.byteArray.fill(1,0,M);break;case ft:O.byteArray=new Uint16Array(M),O.channels<O.outputChannels&&O.byteArray.fill(15360,0,M);break;default:console.error("THREE.EXRLoader: unsupported type: ",A);break}return O.bytesPerLine=O.width*O.inputSize*O.channels,O.outputChannels==4?O.format=br:O.format=Rf,rr?O.colorSpace="srgb-linear":O.encoding=3e3,O}const Dr=new DataView(e),_f=new Uint8Array(e),Qn={value:0},er=Ef(Dr,e,Qn),ae=xf(er,Dr,_f,Qn,this.type),Ms={value:0},Tf={R:0,G:1,B:2,A:3,Y:0};for(let h=0;h<ae.height/ae.scanlineBlockSize;h++){const m=je(Dr,Qn);ae.size=je(Dr,Qn),ae.lines=m+ae.scanlineBlockSize>ae.height?ae.height-m:ae.scanlineBlockSize;const $=ae.size<ae.lines*ae.bytesPerLine?ae.uncompress(ae):V(ae);Qn.value+=ae.size;for(let A=0;A<ae.scanlineBlockSize;A++){const O=A+h*ae.scanlineBlockSize;if(O>=ae.height)break;for(let N=0;N<ae.channels;N++){const M=Tf[er.channels[N].name];for(let U=0;U<ae.width;U++){Ms.value=(A*(ae.channels*ae.width)+N*ae.width+U)*ae.inputSize;const j=(ae.height-1-O)*(ae.width*ae.outputChannels)+U*ae.outputChannels+M;ae.byteArray[j]=ae.getter($,Ms)}}}}return{header:er,width:ae.width,height:ae.height,data:ae.byteArray,format:ae.format,[rr?"colorSpace":"encoding"]:ae[rr?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,r,o){function i(s,a){rr?s.colorSpace=a.colorSpace:s.encoding=a.encoding,s.minFilter=ot,s.magFilter=ot,s.generateMipmaps=!1,s.flipY=!1,n&&n(s,a)}return super.load(e,i,r,o)}}const Fo=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function ts(t,e){const n=xn(i=>i.gl),r=ln(wo,Fo(t)?Object.values(t):t);return p.useLayoutEffect(()=>{e==null||e(r)},[e]),p.useEffect(()=>{if("initTexture"in n){let i=[];Array.isArray(r)?i=r:r instanceof Ot?i=[r]:Fo(r)&&(i=Object.values(r)),i.forEach(s=>{s instanceof Ot&&n.initTexture(s)})}},[n,r]),p.useMemo(()=>{if(Fo(t)){const i={};let s=0;for(const a in t)i[a]=r[s++];return i}else return r},[t,r])}ts.preload=t=>ln.preload(wo,t);ts.clear=t=>ln.clear(wo,t);const ul=(t,e,n)=>{let r;switch(t){case hi:r=new Uint8ClampedArray(e*n*4);break;case ft:r=new Uint16Array(e*n*4);break;case If:r=new Uint32Array(e*n*4);break;case kf:r=new Int8Array(e*n*4);break;case Of:r=new Int16Array(e*n*4);break;case Af:r=new Int32Array(e*n*4);break;case Wt:r=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return r};let Nr;const Bh=(t,e,n,r)=>{if(Nr!==void 0)return Nr;const o=new Fc(1,1,r);e.setRenderTarget(o);const i=new bo(new Nc,new In({color:16777215}));e.render(i,n),e.setRenderTarget(null);const s=ul(t,o.width,o.height);return e.readRenderTargetPixels(o,0,0,o.width,o.height,s),o.dispose(),i.geometry.dispose(),i.material.dispose(),Nr=s[0]!==0,Nr};class ns{constructor(e){var n,r,o,i,s,a,c,l,u,f,d,g,v,y,b,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(C){throw this._renderer.setRenderTarget(null),C}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const _={format:br,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.generateMipmaps)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps:!1,magFilter:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:ot,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter:ot,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS:zt,wrapT:((v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT:zt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=ns.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Dc,this._camera=new Lc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Bh(this._type,this._renderer,this._camera,_)){let C;switch(this._type){case ft:C=this._renderer.extensions.has("EXT_color_buffer_float")?Wt:void 0;break}C!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Wt}`),this._type=C):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new bo(new Nc,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Fc(this.width,this.height,_),this._renderTarget.texture.mapping=((b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping:Jr}static instantiateRenderer(){const e=new Cf;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=ul(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new $f(this.toArray(),this.width,this.height,br,this._type,(e==null?void 0:e.mapping)||Jr,(e==null?void 0:e.wrapS)||zt,(e==null?void 0:e.wrapT)||zt,(e==null?void 0:e.magFilter)||ot,(e==null?void 0:e.minFilter)||ot,(e==null?void 0:e.anisotropy)||1,ht);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Zi&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof Ot&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof Ot&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const jh=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Uh=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Hh extends Zi{constructor({gamma:e,offsetHdr:n,offsetSdr:r,gainMapMin:o,gainMapMax:i,maxDisplayBoost:s,hdrCapacityMin:a,hdrCapacityMax:c,sdr:l,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:jh,fragmentShader:Uh,uniforms:{sdr:{value:l},gainMap:{value:u},gamma:{value:new ge(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ge().fromArray(n)},offsetSdr:{value:new ge().fromArray(r)},gainMapMin:{value:new ge().fromArray(o)},gainMapMax:{value:new ge().fromArray(i)},weightFactor:{value:(Math.log2(s)-a)/(c-a)}},blending:Mf,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=a,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class fl extends Error{}class dl extends Error{}const or=(t,e,n)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(t);if(r)return r[1];const o=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(t);if(o){const i=o[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return i&&i.length===3?i.map(s=>s.replace(/<\/?rdf:li>/g,"")):o[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},zh=t=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(t):e=t.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const r=e.indexOf("x:xmpmeta>",n),o=e.slice(n,r+10);try{const i=or(o,"hdrgm:GainMapMin","0"),s=or(o,"hdrgm:GainMapMax"),a=or(o,"hdrgm:Gamma","1"),c=or(o,"hdrgm:OffsetSDR","0.015625"),l=or(o,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(o),f=u?u[1]:"0",d=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(o);if(!d)throw new Error("Incomplete gainmap metadata");const g=d[1];return{gainMapMin:Array.isArray(i)?i.map(v=>parseFloat(v)):[parseFloat(i),parseFloat(i),parseFloat(i)],gainMapMax:Array.isArray(s)?s.map(v=>parseFloat(v)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(a)?a.map(v=>parseFloat(v)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(c)?c.map(v=>parseFloat(v)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(l)?l.map(v=>parseFloat(v)):[parseFloat(l),parseFloat(l),parseFloat(l)],hdrCapacityMin:parseFloat(f),hdrCapacityMax:parseFloat(g)}}catch{}n=e.indexOf("<x:xmpmeta",r)}};class Wh{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,r)=>{const o=this.options.debug,i=new DataView(e.buffer);if(i.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const s=i.byteLength;let a=2,c=0,l;for(;a<s;){if(++c>250){r(new Error(`Found no marker after ${c} loops 😵`));return}if(i.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${i.getUint8(a).toString(16)}`));return}if(l=i.getUint8(a+1),o&&console.log(`Marker: ${l.toString(16)}`),l===226){o&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(i.getUint32(u)===1297106432){const f=u+4;let d;if(i.getUint16(f)===18761)d=!1;else if(i.getUint16(f)===19789)d=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(i.getUint16(f+2,!d)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const g=i.getUint32(f+4,!d);if(g<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const v=f+g,y=i.getUint16(v,!d),b=v+2;let x=0;for(let P=b;P<b+12*y;P+=12)i.getUint16(P,!d)===45057&&(x=i.getUint32(P+8,!d));const C=v+2+y*12+4,S=[];for(let P=C;P<C+x*16;P+=16){const R={MPType:i.getUint32(P,!d),size:i.getUint32(P+4,!d),dataOffset:i.getUint32(P+8,!d),dependantImages:i.getUint32(P+12,!d),start:-1,end:-1,isFII:!1};R.dataOffset?(R.start=f+R.dataOffset,R.isFII=!1):(R.start=0,R.isFII=!0),R.end=R.start+R.size,S.push(R)}if(this.options.extractNonFII&&S.length){const P=new Blob([i]),R=[];for(const k of S){if(k.isFII&&!this.options.extractFII)continue;const T=P.slice(k.start,k.end+1,"image/jpeg");R.push(T)}n(R)}}}a+=2+i.getUint16(a+2)}})}}const Vh=async t=>{const e=zh(t);if(!e)throw new dl("Gain map XMP metadata not found");const r=await new Wh({extractFII:!0,extractNonFII:!0}).extract(t);if(r.length!==2)throw new fl("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},Zs=t=>new Promise((e,n)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=o=>{n(o)},r.src=URL.createObjectURL(t)});class hl extends Bc{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new Pf}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Hh({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Ot,sdr:new Ot});return new ns({width:16,height:16,type:ft,colorSpace:ht,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,r,o){const i=o?new Blob([o],{type:"image/jpeg"}):void 0,s=new Blob([r],{type:"image/jpeg"});let a,c,l=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([i?Zs(i):Promise.resolve(void 0),Zs(s)]);c=d[0],a=d[1],l=!0}else{const d=await Promise.all([i?createImageBitmap(i,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:"flipY"})]);c=d[0],a=d[1]}const u=new Ot(c||new ImageData(2,2),Jr,zt,zt,ot,Ds,br,hi,1,ht);u.flipY=l,u.needsUpdate=!0;const f=new Ot(a,Jr,zt,zt,ot,Ds,br,hi,1,Fn);f.flipY=l,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Gh extends hl{load([e,n,r],o,i,s){const a=this.prepareQuadRenderer();let c,l,u;const f=async()=>{if(c&&l&&u){try{await this.render(a,u,c,l)}catch(I){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(r),typeof s=="function"&&s(I),a.disposeOnDemandRenderer();return}typeof o=="function"&&o(a),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let d=!0,g=0,v=0,y=!0,b=0,x=0,_=!0,C=0,S=0;const P=()=>{if(typeof i=="function"){const I=g+b+C,D=v+x+S,L=d&&y&&_;i(new ProgressEvent("progress",{lengthComputable:L,loaded:D,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(r);const R=new Mn(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");c=I,await f()},I=>{d=I.lengthComputable,v=I.loaded,g=I.total,P()},I=>{this.manager.itemError(e),typeof s=="function"&&s(I)});const k=new Mn(this._internalLoadingManager);k.setResponseType("arraybuffer"),k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(n,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");l=I,await f()},I=>{y=I.lengthComputable,x=I.loaded,b=I.total,P()},I=>{this.manager.itemError(n),typeof s=="function"&&s(I)});const T=new Mn(this._internalLoadingManager);return T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),T.load(r,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");u=JSON.parse(I),await f()},I=>{_=I.lengthComputable,S=I.loaded,C=I.total,P()},I=>{this.manager.itemError(r),typeof s=="function"&&s(I)}),a}}class Kh extends hl{load(e,n,r,o){const i=this.prepareQuadRenderer(),s=new Mn(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(a);let l,u,f;try{const d=await Vh(c);l=d.sdr,u=d.gainMap,f=d.metadata}catch(d){if(d instanceof dl||d instanceof fl)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},l=c;else throw d}try{await this.render(i,f,l,u)}catch(d){this.manager.itemError(e),typeof o=="function"&&o(d),i.disposeOnDemandRenderer();return}typeof n=="function"&&n(i),this.manager.itemEnd(e),i.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof o=="function"&&o(a)}),i}}const wr={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},pl="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Dn=t=>Array.isArray(t),rs=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function xo({files:t=rs,path:e="",preset:n=void 0,colorSpace:r=void 0,extensions:o}={}){n&&(os(n),t=wr[n],e=pl);const i=Dn(t),{extension:s,isCubemap:a}=is(t),c=ss(s);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+t);const l=xn(g=>g.gl);p.useLayoutEffect(()=>{if(s!=="webp"&&s!=="jpg"&&s!=="jpeg")return;function g(){ln.clear(c,i?[t]:t)}l.domElement.addEventListener("webglcontextlost",g,{once:!0})},[t,l.domElement]);const u=ln(c,i?[t]:t,g=>{(s==="webp"||s==="jpg"||s==="jpeg")&&g.setRenderer(l),g.setPath==null||g.setPath(e),o&&o(g)});let f=i?u[0]:u;if(s==="jpg"||s==="jpeg"||s==="webp"){var d;f=(d=f.renderTarget)==null?void 0:d.texture}return f.mapping=a?Df:Lf,f.colorSpace=r??(a?"srgb":"srgb-linear"),f}const qh={files:rs,path:"",preset:void 0,extensions:void 0};xo.preload=t=>{const e={...qh,...t};let{files:n,path:r=""}=e;const{preset:o,extensions:i}=e;o&&(os(o),n=wr[o],r=pl);const{extension:s}=is(n);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=ss(s);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);ln.preload(a,Dn(n)?[n]:n,c=>{c.setPath==null||c.setPath(r),i&&i(c)})};const Yh={files:rs,preset:void 0};xo.clear=t=>{const e={...Yh,...t};let{files:n}=e;const{preset:r}=e;r&&(os(r),n=wr[r]);const{extension:o}=is(n),i=ss(o);if(!i)throw new Error("useEnvironment: Unrecognized file extension: "+n);ln.clear(i,Dn(n)?[n]:n)};function os(t){if(!(t in wr))throw new Error("Preset must be one of: "+Object.keys(wr).join(", "))}function is(t){var e;const n=Dn(t)&&t.length===6,r=Dn(t)&&t.length===3&&t.some(s=>s.endsWith("json")),o=Dn(t)?t[0]:t;return{extension:n?"cube":r?"webp":o.startsWith("data:application/exr")?"exr":o.startsWith("data:application/hdr")?"hdr":o.startsWith("data:image/jpeg")?"jpg":(e=o.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:r}}function ss(t){return t==="cube"?Nf:t==="hdr"?Nh:t==="exr"?Fh:t==="jpg"||t==="jpeg"?Kh:t==="webp"?Gh:null}const Xh=t=>t.current&&t.current.isScene,Zh=t=>Xh(t)?t.current:t;function as(t,e,n,r,o={}){var i,s,a,c;o={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...o};const l=Zh(e||n),u=l.background,f=l.environment,d={backgroundBlurriness:l.backgroundBlurriness,backgroundIntensity:l.backgroundIntensity,backgroundRotation:(i=(s=l.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&i!==void 0?i:[0,0,0],environmentIntensity:l.environmentIntensity,environmentRotation:(a=(c=l.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&a!==void 0?a:[0,0,0]};return t!=="only"&&(l.environment=r),t&&(l.background=r),Ls(l,o),()=>{t!=="only"&&(l.environment=f),t&&(l.background=u),Ls(l,d)}}function cs({scene:t,background:e=!1,map:n,...r}){const o=xn(i=>i.scene);return p.useLayoutEffect(()=>{if(n)return as(e,t,o,n,r)}),null}function gl({background:t=!1,scene:e,blur:n,backgroundBlurriness:r,backgroundIntensity:o,backgroundRotation:i,environmentIntensity:s,environmentRotation:a,...c}){const l=xo(c),u=xn(f=>f.scene);return p.useLayoutEffect(()=>as(t,e,u,l,{backgroundBlurriness:n??r,backgroundIntensity:o,backgroundRotation:i,environmentIntensity:s,environmentRotation:a})),p.useEffect(()=>()=>{l.dispose()},[l]),null}function Jh({children:t,near:e=.1,far:n=1e3,resolution:r=256,frames:o=1,map:i,background:s=!1,blur:a,backgroundBlurriness:c,backgroundIntensity:l,backgroundRotation:u,environmentIntensity:f,environmentRotation:d,scene:g,files:v,path:y,preset:b=void 0,extensions:x}){const _=xn(T=>T.gl),C=xn(T=>T.scene),S=p.useRef(null),[P]=p.useState(()=>new Dc),R=p.useMemo(()=>{const T=new Bf(r);return T.texture.type=ft,T},[r]);p.useEffect(()=>()=>{R.dispose()},[R]),p.useLayoutEffect(()=>{if(o===1){const T=_.autoClear;_.autoClear=!0,S.current.update(_,P),_.autoClear=T}return as(s,g,C,R.texture,{backgroundBlurriness:a??c,backgroundIntensity:l,backgroundRotation:u,environmentIntensity:f,environmentRotation:d})},[t,P,R.texture,g,C,s,o,_]);let k=1;return Ji(()=>{if(o===1/0||k<o){const T=_.autoClear;_.autoClear=!0,S.current.update(_,P),_.autoClear=T,k++}}),p.createElement(p.Fragment,null,jf(p.createElement(p.Fragment,null,t,p.createElement("cubeCamera",{ref:S,args:[e,n,R]}),v||b?p.createElement(gl,{background:!0,files:v,preset:b,path:y,extensions:x}):i?p.createElement(cs,{background:!0,map:i,extensions:x}):null),P))}function Qh(t){var e,n,r,o;const i=xo(t),s=t.map||i;p.useMemo(()=>Ff({GroundProjectedEnvImpl:Lh}),[]),p.useEffect(()=>()=>{i.dispose()},[i]);const a=p.useMemo(()=>[s],[s]),c=(e=t.ground)==null?void 0:e.height,l=(n=t.ground)==null?void 0:n.radius,u=(r=(o=t.ground)==null?void 0:o.scale)!==null&&r!==void 0?r:1e3;return p.createElement(p.Fragment,null,p.createElement(cs,Ne({},t,{map:s})),p.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:c,radius:l}))}function ep(t){return t.ground?p.createElement(Qh,t):t.map?p.createElement(cs,t):t.children?p.createElement(Jh,t):p.createElement(gl,t)}function tp(){const t=ts("/testGrid.png");return t.wrapS=t.wrapT=Qr,t.repeat.set(10,10),G.jsx(G.Fragment,{children:G.jsx(bn,{type:"fixed",restitution:.2,friction:0,children:G.jsx(bn,{type:"fixed",colliders:"cuboid",position:[0,0,0],children:G.jsxs("mesh",{children:[G.jsx("boxGeometry",{args:[600,1,600]}),G.jsx("meshStandardMaterial",{map:t})]})})})})}function np(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function rp(...t){return e=>t.forEach(n=>np(n,e))}const ml=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),i=o.find(ip);if(i){const s=i.props.children,a=o.map(c=>c===i?p.Children.count(s)>1?p.Children.only(null):p.isValidElement(s)?s.props.children:null:c);return p.createElement(bi,Ne({},r,{ref:e}),p.isValidElement(s)?p.cloneElement(s,void 0,a):null)}return p.createElement(bi,Ne({},r,{ref:e}),n)});ml.displayName="Slot";const bi=p.forwardRef((t,e)=>{const{children:n,...r}=t;return p.isValidElement(n)?p.cloneElement(n,{...sp(r,n.props),ref:rp(e,n.ref)}):p.Children.count(n)>1?p.Children.only(null):null});bi.displayName="SlotClone";const op=({children:t})=>p.createElement(p.Fragment,null,t);function ip(t){return p.isValidElement(t)&&t.type===op}function sp(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}const ap=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cp=ap.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:i,...s}=r,a=i?ml:e;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(a,Ne({},s,{ref:o}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),lp=p.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...o}=t;return r?Uf.createPortal(p.createElement(cp.div,Ne({},o,{ref:e})),r):null}),up=lp;var Js=Object.prototype.hasOwnProperty;function Er(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Er(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Js.call(t,n)&&++r&&!Js.call(e,n)||!(n in e)||!Er(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function _o(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var To=function(e,n,r,o){this.name=e,this.fn=n,this.args=r,this.modifiers=o};To.prototype._test=function(e){var n=this.fn;try{Ln(this.modifiers.slice(),n,this)(e)}catch{n=function(){return!1}}try{return Ln(this.modifiers.slice(),n,this)(e)}catch{return!1}};To.prototype._check=function(e){try{Ln(this.modifiers.slice(),this.fn,this)(e)}catch{if(Ln(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Ln(this.modifiers.slice(),this.fn,this)(e))throw null};To.prototype._testAsync=function(e){var n=this;return new Promise(function(r,o){yl(n.modifiers.slice(),n.fn,n)(e).then(function(i){i?r(e):o(null)}).catch(function(i){return o(i)})})};function vl(t,e){return e===void 0&&(e="simple"),typeof t=="object"?t[e]:t}function Ln(t,e,n){if(t.length){var r=t.shift(),o=Ln(t,e,n);return r.perform(o,n)}else return vl(e)}function yl(t,e,n){if(t.length){var r=t.shift(),o=yl(t,e,n);return r.performAsync(o,n)}else return function(i){return Promise.resolve(vl(e,"async")(i))}}var fp=function(e,n,r){this.name=e,this.perform=n,this.performAsync=r},ls=function(t){function e(n,r,o,i){for(var s=[],a=arguments.length-4;a-- >0;)s[a]=arguments[a+4];t.call(this,s),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=r,this.cause=o,this.target=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),It=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=[]),this.chain=e,this.nextRuleModifiers=n};It.prototype._applyRule=function(e,n){var r=this;return function(){for(var o=[],i=arguments.length;i--;)o[i]=arguments[i];return r.chain.push(new To(n,e.apply(r,o),o,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};It.prototype._applyModifier=function(e,n){return this.nextRuleModifiers.push(new fp(n,e.simple,e.async)),this};It.prototype._clone=function(){return new It(this.chain.slice(),this.nextRuleModifiers.slice())};It.prototype.test=function(e){return this.chain.every(function(n){return n._test(e)})};It.prototype.testAll=function(e){var n=[];return this.chain.forEach(function(r){try{r._check(e)}catch(o){n.push(new ls(r,e,o))}}),n};It.prototype.check=function(e){this.chain.forEach(function(n){try{n._check(e)}catch(r){throw new ls(n,e,r)}})};It.prototype.testAsync=function(e){var n=this;return new Promise(function(r,o){bl(e,n.chain.slice(),r,o)})};function bl(t,e,n,r){if(e.length){var o=e.shift();o._testAsync(t).then(function(){bl(t,e,n,r)},function(i){r(new ls(o,t,i))})}else n(t)}var Qs=function(t,e){return e&&typeof t=="string"&&t.trim().length===0?!0:t==null};function dp(t,e){return e===void 0&&(e=!1),{simple:function(n){return Qs(n,e)||t.check(n)===void 0},async:function(n){return Qs(n,e)||t.testAsync(n)}}}function tt(){return typeof Proxy<"u"?wl(new It):wi(new It)}var xr={};tt.extend=function(t){Object.assign(xr,t)};tt.clearCustomRules=function(){xr={}};function wl(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var o=wl(t._clone());if(r in no)return o._applyModifier(no[r],r);if(r in xr)return o._applyRule(xr[r],r);if(r in Ei)return o._applyRule(Ei[r],r)}})}function wi(t){var e=function(o,i){return Object.keys(o).forEach(function(s){i[s]=function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];var l=wi(i._clone()),u=l._applyRule(o[s],s).apply(void 0,a);return u}}),i},n=e(Ei,t),r=e(xr,n);return Object.keys(no).forEach(function(o){Object.defineProperty(r,o,{get:function(){var i=wi(r._clone());return i._applyModifier(no[o],o)}})}),r}var no={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(t){return function(e){return Fr(e).some(function(n){try{return t(n)}catch{return!1}})}},async:function(t){return function(e){return Promise.all(Fr(e).map(function(n){try{return t(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(e){return e!==!1&&Fr(e).every(t)}},async:function(t){return function(e){return Promise.all(Fr(e).map(t)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(t,e){return function(n){return ea(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&t(n):t(n)}},async:function(t,e){return function(n){return Promise.resolve(t(n)).then(function(r){return ea(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function ea(t){return t&&t.name==="schema"&&t.args.length>0&&typeof t.args[0]=="object"}function Fr(t){return typeof t=="string"?t.split(""):t}var Ei={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return t===void 0&&(t=!0),function(e){return typeof e=="number"&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||hp;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return An("string")},boolean:function(){return An("boolean")},undefined:function(){return An("undefined")},null:function(){return An("null")},array:function(){return An("array")},object:function(){return An("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return typeof t=="boolean"||t===t.toLowerCase()&&t.trim()!==""}},uppercase:function(){return function(t){return t===t.toUpperCase()&&t.trim()!==""}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return t.length===0}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return pp(t)},passesAnyOf:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(n){return t.some(function(r){return r.test(n)})}},optional:dp};function An(t){return function(e){return Array.isArray(e)&&t==="array"||e===null&&t==="null"||typeof e===t}}function hp(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function pp(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach(function(r){var o=t[r];try{o.check((e||{})[r])}catch(i){i.target=r,n.push(i)}}),n.length>0)throw n;return!0},async:function(e){var n=[],r=Object.keys(t).map(function(o){var i=t[o];return i.testAsync((e||{})[o]).catch(function(s){s.target=o,n.push(s)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var me="colors",Xe="sizes",q="space",gp={gap:q,gridGap:q,columnGap:q,gridColumnGap:q,rowGap:q,gridRowGap:q,inset:q,insetBlock:q,insetBlockEnd:q,insetBlockStart:q,insetInline:q,insetInlineEnd:q,insetInlineStart:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,marginBlock:q,marginBlockEnd:q,marginBlockStart:q,marginInline:q,marginInlineEnd:q,marginInlineStart:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,paddingBlock:q,paddingBlockEnd:q,paddingBlockStart:q,paddingInline:q,paddingInlineEnd:q,paddingInlineStart:q,top:q,right:q,bottom:q,left:q,scrollMargin:q,scrollMarginTop:q,scrollMarginRight:q,scrollMarginBottom:q,scrollMarginLeft:q,scrollMarginX:q,scrollMarginY:q,scrollMarginBlock:q,scrollMarginBlockEnd:q,scrollMarginBlockStart:q,scrollMarginInline:q,scrollMarginInlineEnd:q,scrollMarginInlineStart:q,scrollPadding:q,scrollPaddingTop:q,scrollPaddingRight:q,scrollPaddingBottom:q,scrollPaddingLeft:q,scrollPaddingX:q,scrollPaddingY:q,scrollPaddingBlock:q,scrollPaddingBlockEnd:q,scrollPaddingBlockStart:q,scrollPaddingInline:q,scrollPaddingInlineEnd:q,scrollPaddingInlineStart:q,fontSize:"fontSizes",background:me,backgroundColor:me,backgroundImage:me,borderImage:me,border:me,borderBlock:me,borderBlockEnd:me,borderBlockStart:me,borderBottom:me,borderBottomColor:me,borderColor:me,borderInline:me,borderInlineEnd:me,borderInlineStart:me,borderLeft:me,borderLeftColor:me,borderRight:me,borderRightColor:me,borderTop:me,borderTopColor:me,caretColor:me,color:me,columnRuleColor:me,fill:me,outline:me,outlineColor:me,stroke:me,textDecorationColor:me,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Xe,minBlockSize:Xe,maxBlockSize:Xe,inlineSize:Xe,minInlineSize:Xe,maxInlineSize:Xe,width:Xe,minWidth:Xe,maxWidth:Xe,height:Xe,minHeight:Xe,maxHeight:Xe,flexBasis:Xe,gridTemplateColumns:Xe,gridTemplateRows:Xe,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},mp=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Hn=()=>{const t=Object.create(null);return(e,n,...r)=>{const o=(i=>JSON.stringify(i,mp))(e);return o in t?t[o]:t[o]=n(e,...r)}},wn=Symbol.for("sxs.internal"),us=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),ta=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:vp}=Object.prototype,xi=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),yp=/\s+(?![^()]*\))/,On=t=>e=>t(...typeof e=="string"?String(e).split(yp):[e]),na={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:On((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:On((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:On((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:On((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:On((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:On((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},Bo=/([\d.]+)([^]*)/,bp=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(o=>o.includes("&")?o.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(o)?`:is(${r})`:r):r+" "+o)),n),[]):e,wp=(t,e)=>t in Ep&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,o,i)=>r+(o==="stretch"?`-moz-available${i};${xi(t)}:${r}-webkit-fill-available`:`-moz-fit-content${i};${xi(t)}:${r}fit-content`)+i):String(e),Ep={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},qt=t=>t?t+"-":"",El=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,o,i,s,a)=>s=="$"==!!i?r:(o||s=="--"?"calc(":"")+"var(--"+(s==="$"?qt(e)+(a.includes("$")?"":qt(n))+a.replace(/\$/g,"-"):a)+")"+(o||s=="--"?"*"+(o||"")+(i||"1")+")":"")),xp=/\s*,\s*(?![^()]*\))/,_p=Object.prototype.toString,Pn=(t,e,n,r,o)=>{let i,s,a;const c=(l,u,f)=>{let d,g;const v=y=>{for(d in y){const _=d.charCodeAt(0)===64,C=_&&Array.isArray(y[d])?y[d]:[y[d]];for(g of C){const S=/[A-Z]/.test(x=d)?x:x.replace(/-[^]/g,R=>R[1].toUpperCase()),P=typeof g=="object"&&g&&g.toString===_p&&(!r.utils[S]||!u.length);if(S in r.utils&&!P){const R=r.utils[S];if(R!==s){s=R,v(R(g)),s=null;continue}}else if(S in na){const R=na[S];if(R!==a){a=R,v(R(g)),a=null;continue}}if(_&&(b=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(R,k,T,I,D,L)=>{const F=Bo.test(k),W=.0625*(F?-1:1),[z,X]=F?[I,k]:[k,I];return"("+(T[0]==="="?"":T[0]===">"===F?"max-":"min-")+z+":"+(T[0]!=="="&&T.length===1?X.replace(Bo,(Y,de,le)=>Number(de)+W*(T===">"?1:-1)+le):X)+(D?") and ("+(D[0]===">"?"min-":"max-")+z+":"+(D.length===1?L.replace(Bo,(Y,de,le)=>Number(de)+W*(D===">"?-1:1)+le):L):"")+")"})),P){const R=_?f.concat(d):[...f],k=_?[...u]:bp(u,d.split(xp));i!==void 0&&o(ra(...i)),i=void 0,c(g,k,R)}else i===void 0&&(i=[[],u,f]),d=_||d.charCodeAt(0)!==36?d:`--${qt(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,g=P?g:typeof g=="number"?g&&S in Tp?String(g)+"px":String(g):El(wp(S,g??""),r.prefix,r.themeMap[S]),i[0].push(`${_?`${d} `:`${xi(d)}:`}${g}`)}}var b,x};v(l),i!==void 0&&o(ra(...i)),i=void 0};c(t,e,n)},ra=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,Tp={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},oa=t=>String.fromCharCode(t+(t>25?39:97)),En=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=oa(n%52)+r;return oa(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),ur=["themed","global","styled","onevar","resonevar","allvar","inline"],Sp=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},Rp=t=>{let e;const n=()=>{const{cssRules:o}=e.sheet;return[].map.call(o,(i,s)=>{const{cssText:a}=i;let c="";if(a.startsWith("--sxs"))return"";if(o[s-1]&&(c=o[s-1].cssText).startsWith("--sxs")){if(!i.cssRules.length)return"";for(const l in e.rules)if(e.rules[l].group===i)return`--sxs{--sxs:${[...e.rules[l].cache].join(" ")}}${a}`;return i.cssRules.length?`${c}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:c}=e;if(!c.deleteRule){for(;Object(Object(c.cssRules)[0]).type===3;)c.cssRules.splice(0,1);c.cssRules=[]}for(const l in a)delete a[l]}const o=Object(t).styleSheets||[];for(const a of o)if(Sp(a)){for(let c=0,l=a.cssRules;l[c];++c){const u=Object(l[c]);if(u.type!==1)continue;const f=Object(l[c+1]);if(f.type!==4)continue;++c;const{cssText:d}=u;if(!d.startsWith("--sxs"))continue;const g=d.slice(14,-3).trim().split(/\s+/),v=ur[g[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:n}),e.rules[v]={group:f,index:c,cache:new Set(g)})}if(e)break}if(!e){const a=(c,l)=>({type:l,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return c==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:c}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:i,rules:s}=e;for(let a=ur.length-1;a>=0;--a){const c=ur[a];if(!s[c]){const l=ur[a+1],u=s[l]?s[l].index:i.cssRules.length;i.insertRule("@media{}",u),i.insertRule(`--sxs{--sxs:${a}}`,u),s[c]={group:i.cssRules[u+1],index:u,cache:new Set([a])}}Cp(s[c])}};return r(),e},Cp=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},ir=Symbol(),$p=Hn(),ia=(t,e)=>$p(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const o of n)if(o!=null)if(o[wn]){r.type==null&&(r.type=o[wn].type);for(const i of o[wn].composers)r.composers.add(i)}else o.constructor!==Object||o.$$typeof?r.type==null&&(r.type=o):r.composers.add(Ap(o,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Op(t,r,e)}),Ap=({variants:t,compoundVariants:e,defaultVariants:n,...r},o)=>{const i=`${qt(o.prefix)}c-${En(r)}`,s=[],a=[],c=Object.create(null),l=[];for(const d in n)c[d]=String(n[d]);if(typeof t=="object"&&t)for(const d in t){u=c,f=d,vp.call(u,f)||(c[d]="undefined");const g=t[d];for(const v in g){const y={[d]:String(v)};String(v)==="undefined"&&l.push(d);const b=g[v],x=[y,b,!ta(b)];s.push(x)}}var u,f;if(typeof e=="object"&&e)for(const d of e){let{css:g,...v}=d;g=typeof g=="object"&&g||{};for(const b in v)v[b]=String(v[b]);const y=[v,g,!ta(g)];a.push(y)}return[i,r,s,a,c,l]},Op=(t,e,n)=>{const[r,o,i,s]=kp(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let g=0;g<d[ir].length;g++){const[v,y]=d[ir][g];f.rules[v].apply(y)}return d[ir]=[],null}return d[ir]=[],d.rules={},ur.forEach(g=>d.rules[g]={apply:v=>d[ir].push([g,v])}),d})(n):null,c=(a||n).rules,l=`.${r}${o.length>1?`:where(.${o.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||Ip;const{css:d,...g}=f,v={};for(const x in i)if(delete g[x],x in f){let _=f[x];typeof _=="object"&&_?v[x]={"@initial":i[x],..._}:(_=String(_),v[x]=_!=="undefined"||s.has(x)?_:i[x])}else v[x]=i[x];const y=new Set([...o]);for(const[x,_,C,S]of e.composers){n.rules.styled.cache.has(x)||(n.rules.styled.cache.add(x),Pn(_,[`.${x}`],[],t,k=>{c.styled.apply(k)}));const P=sa(C,v,t.media),R=sa(S,v,t.media,!0);for(const k of P)if(k!==void 0)for(const[T,I,D]of k){const L=`${x}-${En(I)}-${T}`;y.add(L);const F=(D?n.rules.resonevar:n.rules.onevar).cache,W=D?c.resonevar:c.onevar;F.has(L)||(F.add(L),Pn(I,[`.${L}`],[],t,z=>{W.apply(z)}))}for(const k of R)if(k!==void 0)for(const[T,I]of k){const D=`${x}-${En(I)}-${T}`;y.add(D),n.rules.allvar.cache.has(D)||(n.rules.allvar.cache.add(D),Pn(I,[`.${D}`],[],t,L=>{c.allvar.apply(L)}))}}if(typeof d=="object"&&d){const x=`${r}-i${En(d)}-css`;y.add(x),n.rules.inline.cache.has(x)||(n.rules.inline.cache.add(x),Pn(d,[`.${x}`],[],t,_=>{c.inline.apply(_)}))}for(const x of String(f.className||"").trim().split(/\s+/))x&&y.add(x);const b=g.className=[...y].join(" ");return{type:e.type,className:b,selector:l,props:g,toString:()=>b,deferredInjector:a}};return us(u,{className:r,selector:l,[wn]:e,toString:()=>(n.rules.styled.cache.has(r)||u(),r)})},kp=t=>{let e="";const n=[],r={},o=[];for(const[i,,,,s,a]of t){e===""&&(e=i),n.push(i),o.push(...a);for(const c in s){const l=s[c];(r[c]===void 0||l!=="undefined"||a.includes(l))&&(r[c]=l)}}return[e,n,r,new Set(o)]},sa=(t,e,n,r)=>{const o=[];e:for(let[i,s,a]of t){if(a)continue;let c,l=0,u=!1;for(c in i){const f=i[c];let d=e[c];if(d!==f){if(typeof d!="object"||!d)continue e;{let g,v,y=0;for(const b in d){if(f===String(d[b])){if(b!=="@initial"){const x=b.slice(1);(v=v||[]).push(x in n?n[x]:b.replace(/^@media ?/,"")),u=!0}l+=y,g=!0}++y}if(v&&v.length&&(s={["@media "+v.join(", ")]:s}),!g)continue e}}}(o[l]=o[l]||[]).push([r?"cv":`${c}-${i[c]}`,s,u])}return o},Ip={},Pp=Hn(),Mp=(t,e)=>Pp(t,()=>(...n)=>{const r=()=>{for(let o of n){o=typeof o=="object"&&o||{};let i=En(o);if(!e.rules.global.cache.has(i)){if(e.rules.global.cache.add(i),"@import"in o){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(o["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,s++);delete o["@import"]}Pn(o,[],[],t,s=>{e.rules.global.apply(s)})}}return""};return us(r,{toString:r})}),Dp=Hn(),Lp=(t,e)=>Dp(t,()=>n=>{const r=`${qt(t.prefix)}k-${En(n)}`,o=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const i=[];Pn(n,[],[],t,a=>i.push(a));const s=`@keyframes ${r}{${i.join("")}}`;e.rules.global.apply(s)}return r};return us(o,{get name(){return o()},toString:o})}),Np=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+qt(this.prefix)+qt(this.scale)+this.token}toString(){return this.computedValue}},Fp=Hn(),Bp=(t,e)=>Fp(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const o=`.${n=(n=typeof n=="string"?n:"")||`${qt(t.prefix)}t-${En(r)}`}`,i={},s=[];for(const c in r){i[c]={};for(const l in r[c]){const u=`--${qt(t.prefix)}${c}-${l}`,f=El(String(r[c][l]),t.prefix,c);i[c][l]=new Np(l,f,c,t.prefix),s.push(`${u}:${f}`)}}const a=()=>{if(s.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const c=`${r===t.theme?":root,":""}.${n}{${s.join(";")}}`;e.rules.themed.apply(c)}return n};return{...i,get className(){return a()},selector:o,toString:a}}),jp=Hn(),Up=Hn(),Hp=t=>{const e=(n=>{let r=!1;const o=jp(n,i=>{r=!0;const s="prefix"in(i=typeof i=="object"&&i||{})?String(i.prefix):"",a=typeof i.media=="object"&&i.media||{},c=typeof i.root=="object"?i.root||null:globalThis.document||null,l=typeof i.theme=="object"&&i.theme||{},u={prefix:s,media:a,theme:l,themeMap:typeof i.themeMap=="object"&&i.themeMap||{...gp},utils:typeof i.utils=="object"&&i.utils||{}},f=Rp(c),d={css:ia(u,f),globalCss:Mp(u,f),keyframes:Lp(u,f),createTheme:Bp(u,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:u,prefix:s,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(l)),d});return r||o.reset(),o})(t);return e.styled=(({config:n,sheet:r})=>Up(n,()=>{const o=ia(n,r);return(...i)=>{const s=o(...i),a=s[wn].type,c=w.forwardRef((l,u)=>{const f=l&&l.as||a,{props:d,deferredInjector:g}=s(l);return delete d.as,d.ref=u,g?w.createElement(w.Fragment,null,w.createElement(f,d),w.createElement(g,null)):w.createElement(f,d)});return c.className=s.className,c.displayName=`Styled.${a.displayName||a.name||a}`,c.selector=s.selector,c.toString=()=>s.selector,c[wn]=s[wn],c}}))(e),e};function Ut(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function zp(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function xl(...t){return e=>t.forEach(n=>zp(n,e))}function zn(...t){return p.useCallback(xl(...t),t)}function _l(t,e=[]){let n=[];function r(i,s){const a=p.createContext(s),c=n.length;n=[...n,s];function l(f){const{scope:d,children:g,...v}=f,y=(d==null?void 0:d[t][c])||a,b=p.useMemo(()=>v,Object.values(v));return p.createElement(y.Provider,{value:b},g)}function u(f,d){const g=(d==null?void 0:d[t][c])||a,v=p.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,u]}const o=()=>{const i=n.map(s=>p.createContext(s));return function(a){const c=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return o.scopeName=t,[r,Wp(o,...e)]}function Wp(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:c,scopeName:l})=>{const f=c(i)[`__scope${l}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}const Tl=p.forwardRef((t,e)=>{const{children:n,...r}=t,o=p.Children.toArray(n),i=o.find(Vp);if(i){const s=i.props.children,a=o.map(c=>c===i?p.Children.count(s)>1?p.Children.only(null):p.isValidElement(s)?s.props.children:null:c);return p.createElement(_i,Ne({},r,{ref:e}),p.isValidElement(s)?p.cloneElement(s,void 0,a):null)}return p.createElement(_i,Ne({},r,{ref:e}),n)});Tl.displayName="Slot";const _i=p.forwardRef((t,e)=>{const{children:n,...r}=t;return p.isValidElement(n)?p.cloneElement(n,{...Gp(r,n.props),ref:xl(e,n.ref)}):p.Children.count(n)>1?p.Children.only(null):null});_i.displayName="SlotClone";const Sl=({children:t})=>p.createElement(p.Fragment,null,t);function Vp(t){return p.isValidElement(t)&&t.type===Sl}function Gp(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}const Kp=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Tn=Kp.reduce((t,e)=>{const n=p.forwardRef((r,o)=>{const{asChild:i,...s}=r,a=i?Tl:e;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(a,Ne({},s,{ref:o}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function qp(t,e){t&&Qi.flushSync(()=>t.dispatchEvent(e))}function fs(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Yp(t,e=globalThis==null?void 0:globalThis.document){const n=fs(t);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const Ti="dismissableLayer.update",Xp="dismissableLayer.pointerDownOutside",Zp="dismissableLayer.focusOutside";let aa;const Jp=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qp=p.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:c,...l}=t,u=p.useContext(Jp),[f,d]=p.useState(null),g=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,v]=p.useState({}),y=zn(e,T=>d(T)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=b.indexOf(x),C=f?b.indexOf(f):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,P=C>=_,R=eg(T=>{const I=T.target,D=[...u.branches].some(L=>L.contains(I));!P||D||(i==null||i(T),a==null||a(T),T.defaultPrevented||c==null||c())},g),k=tg(T=>{const I=T.target;[...u.branches].some(L=>L.contains(I))||(s==null||s(T),a==null||a(T),T.defaultPrevented||c==null||c())},g);return Yp(T=>{C===u.layers.size-1&&(o==null||o(T),!T.defaultPrevented&&c&&(T.preventDefault(),c()))},g),p.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(aa=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),ca(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=aa)}},[f,g,r,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),ca())},[f,u]),p.useEffect(()=>{const T=()=>v({});return document.addEventListener(Ti,T),()=>document.removeEventListener(Ti,T)},[]),p.createElement(Tn.div,Ne({},l,{ref:y,style:{pointerEvents:S?P?"auto":"none":void 0,...t.style},onFocusCapture:Ut(t.onFocusCapture,k.onFocusCapture),onBlurCapture:Ut(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Ut(t.onPointerDownCapture,R.onPointerDownCapture)}))});function eg(t,e=globalThis==null?void 0:globalThis.document){const n=fs(t),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){Rl(Xp,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function tg(t,e=globalThis==null?void 0:globalThis.document){const n=fs(t),r=p.useRef(!1);return p.useEffect(()=>{const o=i=>{i.target&&!r.current&&Rl(Zp,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ca(){const t=new CustomEvent(Ti);document.dispatchEvent(t)}function Rl(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?qp(o,i):o.dispatchEvent(i)}const ng=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},rg=Hf.useId||(()=>{});let og=0;function ig(t){const[e,n]=p.useState(rg());return ng(()=>{n(r=>r??String(og++))},[t]),e?`radix-${e}`:""}function Rn(t){return t.split("-")[0]}function Ar(t){return t.split("-")[1]}function Wn(t){return["top","bottom"].includes(Rn(t))?"x":"y"}function ds(t){return t==="y"?"height":"width"}function la(t,e,n){let{reference:r,floating:o}=t;const i=r.x+r.width/2-o.width/2,s=r.y+r.height/2-o.height/2,a=Wn(e),c=ds(a),l=r[c]/2-o[c]/2,u=a==="x";let f;switch(Rn(e)){case"top":f={x:i,y:r.y-o.height};break;case"bottom":f={x:i,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:s};break;case"left":f={x:r.x-o.width,y:s};break;default:f={x:r.x,y:r.y}}switch(Ar(e)){case"start":f[a]-=l*(n&&u?-1:1);break;case"end":f[a]+=l*(n&&u?-1:1)}return f}const sg=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:l,y:u}=la(c,r,a),f=r,d={},g=0;for(let v=0;v<i.length;v++){const{name:y,fn:b}=i[v],{x,y:_,data:C,reset:S}=await b({x:l,y:u,initialPlacement:r,placement:f,strategy:o,middlewareData:d,rects:c,platform:s,elements:{reference:t,floating:e}});l=x??l,u=_??u,d={...d,[y]:{...d[y],...C}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(c=S.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):S.rects),{x:l,y:u}=la(c,f,a)),v=-1)}return{x:l,y:u,placement:f,strategy:o,middlewareData:d}};function Cl(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function ro(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function _r(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:g=0}=e,v=Cl(g),y=a[d?f==="floating"?"reference":"floating":f],b=ro(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),x=ro(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...s.floating,x:r,y:o}:s.reference,offsetParent:await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),strategy:c}):s[f]);return{top:b.top-x.top+v.top,bottom:x.bottom-b.bottom+v.bottom,left:b.left-x.left+v.left,right:x.right-b.right+v.right}}const ag=Math.min,vn=Math.max;function Si(t,e,n){return vn(t,ag(e,n))}const ua=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:r=0}=t??{},{x:o,y:i,placement:s,rects:a,platform:c}=e;if(n==null)return{};const l=Cl(r),u={x:o,y:i},f=Wn(s),d=Ar(s),g=ds(f),v=await c.getDimensions(n),y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=a.reference[g]+a.reference[f]-u[f]-a.floating[g],_=u[f]-a.reference[f],C=await(c.getOffsetParent==null?void 0:c.getOffsetParent(n));let S=C?f==="y"?C.clientHeight||0:C.clientWidth||0:0;S===0&&(S=a.floating[g]);const P=x/2-_/2,R=l[y],k=S-v[g]-l[b],T=S/2-v[g]/2+P,I=Si(R,T,k),D=(d==="start"?l[y]:l[b])>0&&T!==I&&a.reference[g]<=a.floating[g];return{[f]:u[f]-(D?T<R?R-T:k-T:0),data:{[f]:I,centerOffset:T-I}}}}),cg={left:"right",right:"left",bottom:"top",top:"bottom"};function oo(t){return t.replace(/left|right|bottom|top/g,e=>cg[e])}function lg(t,e,n){n===void 0&&(n=!1);const r=Ar(t),o=Wn(t),i=ds(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=oo(s)),{main:s,cross:oo(s)}}const ug={start:"end",end:"start"};function fa(t){return t.replace(/start|end/g,e=>ug[e])}const $l=["top","right","bottom","left"];$l.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const fg=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:o,rects:i,initialPlacement:s,platform:a,elements:c}=e,{mainAxis:l=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:g=!0,...v}=t,y=Rn(r),b=f||(y===s||!g?[oo(s)]:function(T){const I=oo(T);return[fa(T),I,fa(I)]}(s)),x=[s,...b],_=await _r(e,v),C=[];let S=((n=o.flip)==null?void 0:n.overflows)||[];if(l&&C.push(_[y]),u){const{main:T,cross:I}=lg(r,i,await(a.isRTL==null?void 0:a.isRTL(c.floating)));C.push(_[T],_[I])}if(S=[...S,{placement:r,overflows:C}],!C.every(T=>T<=0)){var P,R;const T=((P=(R=o.flip)==null?void 0:R.index)!=null?P:0)+1,I=x[T];if(I)return{data:{index:T,overflows:S},reset:{placement:I}};let D="bottom";switch(d){case"bestFit":{var k;const L=(k=S.map(F=>[F,F.overflows.filter(W=>W>0).reduce((W,z)=>W+z,0)]).sort((F,W)=>F[1]-W[1])[0])==null?void 0:k[0].placement;L&&(D=L);break}case"initialPlacement":D=s}if(r!==D)return{reset:{placement:D}}}return{}}}};function da(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ha(t){return $l.some(e=>t[e]>=0)}const dg=function(t){let{strategy:e="referenceHidden",...n}=t===void 0?{}:t;return{name:"hide",async fn(r){const{rects:o}=r;switch(e){case"referenceHidden":{const i=da(await _r(r,{...n,elementContext:"reference"}),o.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ha(i)}}}case"escaped":{const i=da(await _r(r,{...n,altBoundary:!0}),o.floating);return{data:{escapedOffsets:i,escaped:ha(i)}}}default:return{}}}}},hg=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,o=await async function(i,s){const{placement:a,platform:c,elements:l}=i,u=await(c.isRTL==null?void 0:c.isRTL(l.floating)),f=Rn(a),d=Ar(a),g=Wn(a)==="x",v=["left","top"].includes(f)?-1:1,y=u&&g?-1:1,b=typeof s=="function"?s(i):s;let{mainAxis:x,crossAxis:_,alignmentAxis:C}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return d&&typeof C=="number"&&(_=d==="end"?-1*C:C),g?{x:_*y,y:x*v}:{x:x*v,y:_*y}}(e,t);return{x:n+o.x,y:r+o.y,data:o}}}};function Al(t){return t==="x"?"y":"x"}const pg=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:b=>{let{x,y:_}=b;return{x,y:_}}},...c}=t,l={x:n,y:r},u=await _r(e,c),f=Wn(Rn(o)),d=Al(f);let g=l[f],v=l[d];if(i){const b=f==="y"?"bottom":"right";g=Si(g+u[f==="y"?"top":"left"],g,g-u[b])}if(s){const b=d==="y"?"bottom":"right";v=Si(v+u[d==="y"?"top":"left"],v,v-u[b])}const y=a.fn({...e,[f]:g,[d]:v});return{...y,data:{x:y.x-n,y:y.y-r}}}}},gg=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=t,u={x:n,y:r},f=Wn(o),d=Al(f);let g=u[f],v=u[d];const y=typeof a=="function"?a({...i,placement:o}):a,b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const P=f==="y"?"height":"width",R=i.reference[f]-i.floating[P]+b.mainAxis,k=i.reference[f]+i.reference[P]-b.mainAxis;g<R?g=R:g>k&&(g=k)}if(l){var x,_,C,S;const P=f==="y"?"width":"height",R=["top","left"].includes(Rn(o)),k=i.reference[d]-i.floating[P]+(R&&(x=(_=s.offset)==null?void 0:_[d])!=null?x:0)+(R?0:b.crossAxis),T=i.reference[d]+i.reference[P]+(R?0:(C=(S=s.offset)==null?void 0:S[d])!=null?C:0)-(R?b.crossAxis:0);v<k?v=k:v>T&&(v=T)}return{[f]:g,[d]:v}}}},mg=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:o,elements:i}=e,{apply:s,...a}=t,c=await _r(e,a),l=Rn(n),u=Ar(n);let f,d;l==="top"||l==="bottom"?(f=l,d=u===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(d=l,f=u==="end"?"top":"bottom");const g=vn(c.left,0),v=vn(c.right,0),y=vn(c.top,0),b=vn(c.bottom,0),x={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(y!==0||b!==0?y+b:vn(c.top,c.bottom)):c[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(g!==0||v!==0?g+v:vn(c.left,c.right)):c[d])},_=await o.getDimensions(i.floating);s==null||s({...e,...x});const C=await o.getDimensions(i.floating);return _.width!==C.width||_.height!==C.height?{reset:{rects:!0}}:{}}}};function Ol(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function Yt(t){if(t==null)return window;if(!Ol(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function Or(t){return Yt(t).getComputedStyle(t)}function Vt(t){return Ol(t)?"":t?(t.nodeName||"").toLowerCase():""}function kl(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function Pt(t){return t instanceof Yt(t).HTMLElement}function un(t){return t instanceof Yt(t).Element}function hs(t){return typeof ShadowRoot>"u"?!1:t instanceof Yt(t).ShadowRoot||t instanceof ShadowRoot}function So(t){const{overflow:e,overflowX:n,overflowY:r}=Or(t);return/auto|scroll|overlay|hidden/.test(e+r+n)}function vg(t){return["table","td","th"].includes(Vt(t))}function pa(t){const e=/firefox/i.test(kl()),n=Or(t);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"}function Il(){return!/^((?!chrome|android).)*safari/i.test(kl())}const ga=Math.min,gr=Math.max,io=Math.round;function Gt(t,e,n){var r,o,i,s;e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect();let c=1,l=1;e&&Pt(t)&&(c=t.offsetWidth>0&&io(a.width)/t.offsetWidth||1,l=t.offsetHeight>0&&io(a.height)/t.offsetHeight||1);const u=un(t)?Yt(t):window,f=!Il()&&n,d=(a.left+(f&&(r=(o=u.visualViewport)==null?void 0:o.offsetLeft)!=null?r:0))/c,g=(a.top+(f&&(i=(s=u.visualViewport)==null?void 0:s.offsetTop)!=null?i:0))/l,v=a.width/c,y=a.height/l;return{width:v,height:y,top:g,right:d+v,bottom:g+y,left:d,x:d,y:g}}function an(t){return(e=t,(e instanceof Yt(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function Ro(t){return un(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Pl(t){return Gt(an(t)).left+Ro(t).scrollLeft}function yg(t,e,n){const r=Pt(e),o=an(e),i=Gt(t,r&&function(c){const l=Gt(c);return io(l.width)!==c.offsetWidth||io(l.height)!==c.offsetHeight}(e),n==="fixed");let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((Vt(e)!=="body"||So(o))&&(s=Ro(e)),Pt(e)){const c=Gt(e,!0);a.x=c.x+e.clientLeft,a.y=c.y+e.clientTop}else o&&(a.x=Pl(o));return{x:i.left+s.scrollLeft-a.x,y:i.top+s.scrollTop-a.y,width:i.width,height:i.height}}function Ml(t){return Vt(t)==="html"?t:t.assignedSlot||t.parentNode||(hs(t)?t.host:null)||an(t)}function ma(t){return Pt(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function Ri(t){const e=Yt(t);let n=ma(t);for(;n&&vg(n)&&getComputedStyle(n).position==="static";)n=ma(n);return n&&(Vt(n)==="html"||Vt(n)==="body"&&getComputedStyle(n).position==="static"&&!pa(n))?e:n||function(r){let o=Ml(r);for(hs(o)&&(o=o.host);Pt(o)&&!["html","body"].includes(Vt(o));){if(pa(o))return o;o=o.parentNode}return null}(t)||e}function va(t){if(Pt(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=Gt(t);return{width:e.width,height:e.height}}function Dl(t){const e=Ml(t);return["html","body","#document"].includes(Vt(e))?t.ownerDocument.body:Pt(e)&&So(e)?e:Dl(e)}function so(t,e){var n;e===void 0&&(e=[]);const r=Dl(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),i=Yt(r),s=o?[i].concat(i.visualViewport||[],So(r)?r:[]):r,a=e.concat(s);return o?a:a.concat(so(s))}function ya(t,e,n){return e==="viewport"?ro(function(r,o){const i=Yt(r),s=an(r),a=i.visualViewport;let c=s.clientWidth,l=s.clientHeight,u=0,f=0;if(a){c=a.width,l=a.height;const d=Il();(d||!d&&o==="fixed")&&(u=a.offsetLeft,f=a.offsetTop)}return{width:c,height:l,x:u,y:f}}(t,n)):un(e)?function(r,o){const i=Gt(r,!1,o==="fixed"),s=i.top+r.clientTop,a=i.left+r.clientLeft;return{top:s,left:a,x:a,y:s,right:a+r.clientWidth,bottom:s+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,n):ro(function(r){var o;const i=an(r),s=Ro(r),a=(o=r.ownerDocument)==null?void 0:o.body,c=gr(i.scrollWidth,i.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=gr(i.scrollHeight,i.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let u=-s.scrollLeft+Pl(r);const f=-s.scrollTop;return Or(a||i).direction==="rtl"&&(u+=gr(i.clientWidth,a?a.clientWidth:0)-c),{width:c,height:l,x:u,y:f}}(an(t)))}function bg(t){const e=so(t),n=["absolute","fixed"].includes(Or(t).position)&&Pt(t)?Ri(t):t;return un(n)?e.filter(r=>un(r)&&function(o,i){const s=i.getRootNode==null?void 0:i.getRootNode();if(o.contains(i))return!0;if(s&&hs(s)){let a=i;do{if(a&&o===a)return!0;a=a.parentNode||a.host}while(a)}return!1}(r,n)&&Vt(r)!=="body"):[]}const wg={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?bg(e):[].concat(n),r],s=i[0],a=i.reduce((c,l)=>{const u=ya(e,l,o);return c.top=gr(u.top,c.top),c.right=ga(u.right,c.right),c.bottom=ga(u.bottom,c.bottom),c.left=gr(u.left,c.left),c},ya(e,s,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:r}=t;const o=Pt(n),i=an(n);if(n===i)return e;let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((o||!o&&r!=="fixed")&&((Vt(n)!=="body"||So(i))&&(s=Ro(n)),Pt(n))){const c=Gt(n,!0);a.x=c.x+n.clientLeft,a.y=c.y+n.clientTop}return{...e,x:e.x-s.scrollLeft+a.x,y:e.y-s.scrollTop+a.y}},isElement:un,getDimensions:va,getOffsetParent:Ri,getDocumentElement:an,getElementRects:t=>{let{reference:e,floating:n,strategy:r}=t;return{reference:yg(e,Ri(n),r),floating:{...va(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Or(t).direction==="rtl"};function Eg(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=!0,animationFrame:a=!1}=r,c=o&&!a,l=i&&!a,u=c||l?[...un(t)?so(t):[],...so(e)]:[];u.forEach(v=>{c&&v.addEventListener("scroll",n,{passive:!0}),l&&v.addEventListener("resize",n)});let f,d=null;if(s){let v=!0;d=new ResizeObserver(()=>{v||n(),v=!1}),un(t)&&!a&&d.observe(t),d.observe(e)}let g=a?Gt(t):null;return a&&function v(){const y=Gt(t);!g||y.x===g.x&&y.y===g.y&&y.width===g.width&&y.height===g.height||n(),g=y,f=requestAnimationFrame(v)}(),n(),()=>{var v;u.forEach(y=>{c&&y.removeEventListener("scroll",n),l&&y.removeEventListener("resize",n)}),(v=d)==null||v.disconnect(),d=null,a&&cancelAnimationFrame(f)}}const xg=(t,e,n)=>sg(t,e,{platform:wg,...n});var Ci=typeof document<"u"?p.useLayoutEffect:p.useEffect;function $i(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!$i(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!$i(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function _g(t){const e=p.useRef(t);return Ci(()=>{e.current=t}),e}function Tg(t){let{middleware:e,placement:n="bottom",strategy:r="absolute",whileElementsMounted:o}=t===void 0?{}:t;const i=p.useRef(null),s=p.useRef(null),a=_g(o),c=p.useRef(null),[l,u]=p.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[f,d]=p.useState(e);$i(f==null?void 0:f.map(C=>{let{options:S}=C;return S}),e==null?void 0:e.map(C=>{let{options:S}=C;return S}))||d(e);const g=p.useCallback(()=>{!i.current||!s.current||xg(i.current,s.current,{middleware:f,placement:n,strategy:r}).then(C=>{v.current&&Qi.flushSync(()=>{u(C)})})},[f,n,r]);Ci(()=>{v.current&&g()},[g]);const v=p.useRef(!1);Ci(()=>(v.current=!0,()=>{v.current=!1}),[]);const y=p.useCallback(()=>{if(typeof c.current=="function"&&(c.current(),c.current=null),i.current&&s.current)if(a.current){const C=a.current(i.current,s.current,g);c.current=C}else g()},[g,a]),b=p.useCallback(C=>{i.current=C,y()},[y]),x=p.useCallback(C=>{s.current=C,y()},[y]),_=p.useMemo(()=>({reference:i,floating:s}),[]);return p.useMemo(()=>({...l,update:g,refs:_,reference:b,floating:x}),[l,g,_,b,x])}const Sg=t=>{const{element:e,padding:n}=t;function r(o){return Object.prototype.hasOwnProperty.call(o,"current")}return{name:"arrow",options:t,fn(o){return r(e)?e.current!=null?ua({element:e.current,padding:n}).fn(o):{}:e?ua({element:e,padding:n}).fn(o):{}}}},Rg=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return p.createElement(Tn.svg,Ne({},i,{ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),t.asChild?n:p.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Cg=Rg;function $g(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}const fr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{};function Ag(t){const[e,n]=p.useState(void 0);return fr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const c=i.borderBoxSize,l=Array.isArray(c)?c[0]:c;s=l.inlineSize,a=l.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const Ll="Popper",[ps,Nl]=_l(Ll),[Og,Fl]=ps(Ll),kg=t=>{const{__scopePopper:e,children:n}=t,[r,o]=p.useState(null);return p.createElement(Og,{scope:e,anchor:r,onAnchorChange:o},n)},Ig="PopperAnchor",Pg=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=Fl(Ig,n),s=p.useRef(null),a=zn(e,s);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:p.createElement(Tn.div,Ne({},o,{ref:a}))}),ao="PopperContent",[Mg,Dg]=ps(ao),[Lg,Ng]=ps(ao,{hasParent:!1,positionUpdateFns:new Set}),Fg=p.forwardRef((t,e)=>{var n,r,o,i,s,a,c,l;const{__scopePopper:u,side:f="bottom",sideOffset:d=0,align:g="center",alignOffset:v=0,arrowPadding:y=0,collisionBoundary:b=[],collisionPadding:x=0,sticky:_="partial",hideWhenDetached:C=!1,avoidCollisions:S=!0,onPlaced:P,...R}=t,k=Fl(ao,u),[T,I]=p.useState(null),D=zn(e,St=>I(St)),[L,F]=p.useState(null),W=Ag(L),z=(n=W==null?void 0:W.width)!==null&&n!==void 0?n:0,X=(r=W==null?void 0:W.height)!==null&&r!==void 0?r:0,Y=f+(g!=="center"?"-"+g:""),de=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},le=Array.isArray(b)?b:[b],ye=le.length>0,re={padding:de,boundary:le.filter(zg),altBoundary:ye},{reference:Re,floating:fe,strategy:oe,x:he,y:Fe,placement:ue,middlewareData:Pe,update:De}=Tg({strategy:"fixed",placement:Y,whileElementsMounted:Eg,middleware:[Wg(),hg({mainAxis:d+X,alignmentAxis:v}),S?pg({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?gg():void 0,...re}):void 0,L?Sg({element:L,padding:y}):void 0,S?fg({...re}):void 0,mg({...re,apply:({elements:St,availableWidth:V,availableHeight:te})=>{St.floating.style.setProperty("--radix-popper-available-width",`${V}px`),St.floating.style.setProperty("--radix-popper-available-height",`${te}px`)}}),Vg({arrowWidth:z,arrowHeight:X}),C?dg({strategy:"referenceHidden"}):void 0].filter(Hg)});fr(()=>{Re(k.anchor)},[Re,k.anchor]);const gt=he!==null&&Fe!==null,[dn,hn]=Bl(ue),Lt=$g(P);fr(()=>{gt&&(Lt==null||Lt())},[gt,Lt]);const mt=(o=Pe.arrow)===null||o===void 0?void 0:o.x,Zt=(i=Pe.arrow)===null||i===void 0?void 0:i.y,Nt=((s=Pe.arrow)===null||s===void 0?void 0:s.centerOffset)!==0,[Jt,Kn]=p.useState();fr(()=>{T&&Kn(window.getComputedStyle(T).zIndex)},[T]);const{hasParent:qn,positionUpdateFns:_t}=Ng(ao,u),Tt=!qn;p.useLayoutEffect(()=>{if(!Tt)return _t.add(De),()=>{_t.delete(De)}},[Tt,_t,De]),fr(()=>{Tt&&gt&&Array.from(_t).reverse().forEach(St=>requestAnimationFrame(St))},[Tt,gt,_t]);const pn={"data-side":dn,"data-align":hn,...R,ref:D,style:{...R.style,animation:gt?void 0:"none",opacity:(a=Pe.hide)!==null&&a!==void 0&&a.referenceHidden?0:void 0}};return p.createElement("div",{ref:fe,"data-radix-popper-content-wrapper":"",style:{position:oe,left:0,top:0,transform:gt?`translate3d(${Math.round(he)}px, ${Math.round(Fe)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Jt,"--radix-popper-transform-origin":[(c=Pe.transformOrigin)===null||c===void 0?void 0:c.x,(l=Pe.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},p.createElement(Mg,{scope:u,placedSide:dn,onArrowChange:F,arrowX:mt,arrowY:Zt,shouldHideArrow:Nt},Tt?p.createElement(Lg,{scope:u,hasParent:!0,positionUpdateFns:_t},p.createElement(Tn.div,pn)):p.createElement(Tn.div,pn)))}),Bg="PopperArrow",jg={top:"bottom",right:"left",bottom:"top",left:"right"},Ug=p.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,i=Dg(Bg,r),s=jg[i.placedSide];return p.createElement("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},p.createElement(Cg,Ne({},o,{ref:n,style:{...o.style,display:"block"}})))});function Hg(t){return t!==void 0}function zg(t){return t!==null}const Wg=()=>({name:"anchorCssProperties",fn(t){const{rects:e,elements:n}=t,{width:r,height:o}=e.reference;return n.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),n.floating.style.setProperty("--radix-popper-anchor-height",`${o}px`),{}}}),Vg=t=>({name:"transformOrigin",options:t,fn(e){var n,r,o,i,s;const{placement:a,rects:c,middlewareData:l}=e,f=((n=l.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,d=f?0:t.arrowWidth,g=f?0:t.arrowHeight,[v,y]=Bl(a),b={start:"0%",center:"50%",end:"100%"}[y],x=((r=(o=l.arrow)===null||o===void 0?void 0:o.x)!==null&&r!==void 0?r:0)+d/2,_=((i=(s=l.arrow)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0)+g/2;let C="",S="";return v==="bottom"?(C=f?b:`${x}px`,S=`${-g}px`):v==="top"?(C=f?b:`${x}px`,S=`${c.floating.height+g}px`):v==="right"?(C=`${-g}px`,S=f?b:`${_}px`):v==="left"&&(C=`${c.floating.width+g}px`,S=f?b:`${_}px`),{data:{x:C,y:S}}}});function Bl(t){const[e,n="center"]=t.split("-");return[e,n]}const Gg=kg,Kg=Pg,qg=Fg,Yg=Ug,ba=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{};function Xg(t,e){return p.useReducer((n,r)=>{const o=e[n][r];return o??n},t)}const jl=t=>{const{present:e,children:n}=t,r=Zg(e),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=zn(r.ref,o.ref);return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:i}):null};jl.displayName="Presence";function Zg(t){const[e,n]=p.useState(),r=p.useRef({}),o=p.useRef(t),i=p.useRef("none"),s=t?"mounted":"unmounted",[a,c]=Xg(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const l=Br(r.current);i.current=a==="mounted"?l:"none"},[a]),ba(()=>{const l=r.current,u=o.current;if(u!==t){const d=i.current,g=Br(l);t?c("MOUNT"):g==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&d!==g?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,c]),ba(()=>{if(e){const l=f=>{const g=Br(r.current).includes(f.animationName);f.target===e&&g&&Qi.flushSync(()=>c("ANIMATION_END"))},u=f=>{f.target===e&&(i.current=Br(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",l),e.addEventListener("animationend",l),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",l),e.removeEventListener("animationend",l)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function Br(t){return(t==null?void 0:t.animationName)||"none"}function Ul(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Jg({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=Qg({defaultProp:e,onChange:n}),i=t!==void 0,s=i?t:r,a=Ul(n),c=p.useCallback(l=>{if(i){const f=typeof l=="function"?l(t):l;f!==t&&a(f)}else o(l)},[i,t,o,a]);return[s,c]}function Qg({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,o=p.useRef(r),i=Ul(e);return p.useEffect(()=>{o.current!==r&&(i(r),o.current=r)},[r,o,i]),n}const em=p.forwardRef((t,e)=>p.createElement(Tn.span,Ne({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),tm=em,[Co,dE]=_l("Tooltip",[Nl]),$o=Nl(),nm="TooltipProvider",Ai="tooltip.open",[hE,gs]=Co(nm),ms="Tooltip",[rm,Ao]=Co(ms),om=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o=!1,onOpenChange:i,disableHoverableContent:s,delayDuration:a}=t,c=gs(ms,t.__scopeTooltip),l=$o(e),[u,f]=p.useState(null),d=ig(),g=p.useRef(0),v=s??c.disableHoverableContent,y=a??c.delayDuration,b=p.useRef(!1),[x=!1,_]=Jg({prop:r,defaultProp:o,onChange:k=>{k?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ai))):c.onClose(),i==null||i(k)}}),C=p.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),S=p.useCallback(()=>{window.clearTimeout(g.current),b.current=!1,_(!0)},[_]),P=p.useCallback(()=>{window.clearTimeout(g.current),_(!1)},[_]),R=p.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,_(!0)},y)},[y,_]);return p.useEffect(()=>()=>window.clearTimeout(g.current),[]),p.createElement(Gg,l,p.createElement(rm,{scope:e,contentId:d,open:x,stateAttribute:C,trigger:u,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayed?R():S()},[c.isOpenDelayed,R,S]),onTriggerLeave:p.useCallback(()=>{v?P():window.clearTimeout(g.current)},[P,v]),onOpen:S,onClose:P,disableHoverableContent:v},n))},wa="TooltipTrigger",im=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Ao(wa,n),i=gs(wa,n),s=$o(n),a=p.useRef(null),c=zn(e,a,o.onTriggerChange),l=p.useRef(!1),u=p.useRef(!1),f=p.useCallback(()=>l.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),p.createElement(Kg,Ne({asChild:!0},s),p.createElement(Tn.button,Ne({"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute},r,{ref:c,onPointerMove:Ut(t.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ut(t.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:Ut(t.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ut(t.onFocus,()=>{l.current||o.onOpen()}),onBlur:Ut(t.onBlur,o.onClose),onClick:Ut(t.onClick,o.onClose)})))}),sm="TooltipPortal",[pE,am]=Co(sm,{forceMount:void 0}),Tr="TooltipContent",cm=p.forwardRef((t,e)=>{const n=am(Tr,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=t,s=Ao(Tr,t.__scopeTooltip);return p.createElement(jl,{present:r||s.open},s.disableHoverableContent?p.createElement(Hl,Ne({side:o},i,{ref:e})):p.createElement(lm,Ne({side:o},i,{ref:e})))}),lm=p.forwardRef((t,e)=>{const n=Ao(Tr,t.__scopeTooltip),r=gs(Tr,t.__scopeTooltip),o=p.useRef(null),i=zn(e,o),[s,a]=p.useState(null),{trigger:c,onClose:l}=n,u=o.current,{onPointerInTransitChange:f}=r,d=p.useCallback(()=>{a(null),f(!1)},[f]),g=p.useCallback((v,y)=>{const b=v.currentTarget,x={x:v.clientX,y:v.clientY},_=pm(x,b.getBoundingClientRect()),C=_==="right"||_==="bottom"?-5:5,P=_==="right"||_==="left"?{x:v.clientX+C,y:v.clientY}:{x:v.clientX,y:v.clientY+C},R=gm(y.getBoundingClientRect()),k=vm([P,...R]);a(k),f(!0)},[f]);return p.useEffect(()=>()=>d(),[d]),p.useEffect(()=>{if(c&&u){const v=b=>g(b,u),y=b=>g(b,c);return c.addEventListener("pointerleave",v),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",y)}}},[c,u,g,d]),p.useEffect(()=>{if(s){const v=y=>{const b=y.target,x={x:y.clientX,y:y.clientY},_=(c==null?void 0:c.contains(b))||(u==null?void 0:u.contains(b)),C=!mm(x,s);_?d():C&&(d(),l())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,u,s,l,d]),p.createElement(Hl,Ne({},t,{ref:i}))}),[um,fm]=Co(ms,{isInside:!1}),Hl=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=t,c=Ao(Tr,n),l=$o(n),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(Ai,u),()=>document.removeEventListener(Ai,u)),[u]),p.useEffect(()=>{if(c.trigger){const f=d=>{const g=d.target;g!=null&&g.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),p.createElement(Qp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:u},p.createElement(qg,Ne({"data-state":c.stateAttribute},l,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),p.createElement(Sl,null,r),p.createElement(um,{scope:n,isInside:!0},p.createElement(tm,{id:c.contentId,role:"tooltip"},o||r))))}),dm="TooltipArrow",hm=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=$o(n);return fm(dm,n).isInside?null:p.createElement(Yg,Ne({},o,r,{ref:e}))});function pm(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:return null}}function gm(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function mm(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i].x,c=e[i].y,l=e[s].x,u=e[s].y;c>r!=u>r&&n<(l-a)*(r-c)/(u-c)+a&&(o=!o)}return o}function vm(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ym(e)}function ym(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}const bm=om,wm=im,Em=cm,xm=hm;function _m(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function ve(t,e){if(t==null)return{};var n=_m(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}let Oe;(function(t){t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY"})(Oe||(Oe={}));const Tm={[Oe.UNSUPPORTED_INPUT]:(t,e)=>[`An input with type \`${t}\` input was found at path \`${e}\` but it's not supported yet.`],[Oe.NO_COMPONENT_FOR_TYPE]:(t,e)=>[`Type \`${t}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Oe.UNKNOWN_INPUT]:(t,e)=>[`input at path \`${t}\` is not recognized.`,e],[Oe.DUPLICATE_KEYS]:(t,e,n)=>[`Key \`${t}\` of path \`${e}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[Oe.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[Oe.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[Oe.THEME_ERROR]:(t,e)=>[`Error accessing the theme \`${t}.${e}\` value.`],[Oe.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[Oe.PATH_DOESNT_EXIST]:t=>[`Error accessing the value at path \`${t}\``],[Oe.INPUT_TYPE_OVERRIDE]:(t,e,n)=>[`Input at path \`${t}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${n}\`.`],[Oe.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function zl(t,e,...n){const[r,...o]=Tm[e](...n);console[t]("LEVA: "+r,...o)}const Ht=zl.bind(null,"warn"),Sm=zl.bind(null,"log"),Rm=["value"],Cm=["schema"],$m=["value"],Wl=[],Sn={};function Ea(t){let{value:e}=t,n=ve(t,Rm);for(let r of Wl){const o=r(e,n);if(o)return o}}function Xt(t,e){let{schema:n}=e,r=ve(e,Cm);if(t in Sn){Ht(Oe.ALREADY_REGISTERED_TYPE,t);return}Wl.push((o,i)=>n(o,i)&&t),Sn[t]=r}function jo(t,e,n,r){const{normalize:o}=Sn[t];if(o)return o(e,n,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:i}=e,s=ve(e,$m);return{value:i,settings:s}}function Am(t,e,n,r,o,i){const{sanitize:s}=Sn[t];return s?s(e,n,r,o,i):e}function xa(t,e,n){const{format:r}=Sn[t];return r?r(e,n):e}function Om(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_a(Object(n),!0).forEach(function(r){Om(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const fn=(t,e,n)=>t>n?n:t<e?e:t,km=t=>{if(t===""||typeof t=="number")return t;try{const e=rn(t);if(!isNaN(e))return e}catch{}return parseFloat(t)},Im=Math.log(10);function Ta(t){let e=Math.abs(+String(t).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const n=Math.floor(Math.log(e)/Im)+1,r=Math.floor(Math.log10(Math.abs(t))),o=Math.pow(10,r-n);return Math.max(o,.001)}const co=(t,e,n)=>n===e?0:(fn(t,e,n)-e)/(n-e),lo=(t,e,n)=>t*(n-e)+e,Pm=()=>"_"+Math.random().toString(36).substr(2,9),Sa=/\(([0-9+\-*/^ .]+)\)/,Ra=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Ca=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,$a=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Aa=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,Oa=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function rn(t){if(isNaN(Number(t)))if(Sa.test(t)){const e=t.replace(Sa,(n,r)=>String(rn(r)));return rn(e)}else if(Ra.test(t)){const e=t.replace(Ra,(n,r,o)=>String(Math.pow(Number(r),Number(o))));return rn(e)}else if(Ca.test(t)){const e=t.replace(Ca,(n,r,o)=>String(Number(r)*Number(o)));return rn(e)}else if($a.test(t)){const e=t.replace($a,(n,r,o)=>{if(o!=0)return String(Number(r)/Number(o));throw new Error("Division by zero")});return rn(e)}else if(Aa.test(t)){const e=t.replace(Aa,(n,r,o)=>String(Number(r)+Number(o)));return rn(e)}else if(Oa.test(t)){const e=t.replace(Oa,(n,r,o)=>String(Number(r)-Number(o)));return rn(e)}else return Number(t);return Number(t)}function Mm(t,e){return e.reduce((n,r)=>(t&&t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}function Dm(t,e){const n=ee({},t);return e.forEach(r=>r in t&&delete n[r]),n}function Lm(t,e){return t.reduce((n,r,o)=>Object.assign(n,{[e[o]]:r}),{})}function Vl(t){return Object.prototype.toString.call(t)==="[object Object]"}const Nm=t=>Vl(t)&&Object.keys(t).length===0;let wt;(function(t){t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER"})(wt||(wt={}));let Et;(function(t){t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D"})(Et||(Et={}));const Fm=["type","__customInput"],Bm=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],jm=["type"];function Gl(t,e,n={},r){var o,i;if(typeof t!="object"||Array.isArray(t))return{type:r,input:t,options:ee({key:e,label:e,optional:!1,disabled:!1,order:0},n)};if("__customInput"in t){const{type:P,__customInput:R}=t,k=ve(t,Fm);return Gl(R,e,k,P)}const{render:s,label:a,optional:c,order:l=0,disabled:u,hint:f,onChange:d,onEditStart:g,onEditEnd:v,transient:y}=t,b=ve(t,Bm),x=ee({render:s,key:e,label:a??e,hint:f,transient:y??!!d,onEditStart:g,onEditEnd:v,disabled:u,optional:c,order:l},n);let{type:_}=b,C=ve(b,jm);if(_=r??_,_ in wt)return{type:_,input:C,options:x};let S;return r&&Vl(C)&&"value"in C?S=C.value:S=Nm(C)?void 0:C,{type:_,input:S,options:ee(ee({},x),{},{onChange:d,optional:(o=x.optional)!==null&&o!==void 0?o:!1,disabled:(i=x.disabled)!==null&&i!==void 0?i:!1})}}function Um(t,e,n,r){const o=Gl(t,e),{type:i,input:s,options:a}=o;if(i)return i in wt?o:{type:i,input:jo(i,s,n,r),options:a};let c=Ea(s);return c?{type:c,input:jo(c,s,n,r),options:a}:(c=Ea({value:s}),c?{type:c,input:jo(c,{value:s},n,r),options:a}:!1)}function ka(t,e,n,r,o){const{value:i,type:s,settings:a}=t;t.value=Kl({type:s,value:i,settings:a},e,n,r),t.fromPanel=o}const Hm=function(e,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=n,this.error=r};function Kl({type:t,value:e,settings:n},r,o,i){const s=t!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=Am(t,s,n,e,o,i)}catch(c){throw new Hm(`The value \`${r}\` did not result in a correct value.`,e,c)}return Er(a,e)?e:a}const ql=(t,e,n=!1)=>{let r=0;return function(){const o=arguments,i=n&&!r,s=()=>t.apply(this,o);window.clearTimeout(r),r=window.setTimeout(s,e),i&&s()}},Yl=t=>t.shiftKey?5:t.altKey?1/5:1,zm=["value"],Wm=["min","max"],Vm=t=>{if(typeof t=="number")return!0;if(typeof t=="string"){const e=parseFloat(t);return isNaN(e)?!1:t.substring((""+e).length).trim().length<4}return!1},Xl=(t,{min:e=-1/0,max:n=1/0,suffix:r})=>{const o=parseFloat(t);if(t===""||isNaN(o))throw Error("Invalid number");const i=fn(o,e,n);return r?i+r:i},Gm=(t,{pad:e=0,suffix:n})=>{const r=parseFloat(t).toFixed(e);return n?r+n:r},Zl=t=>{let{value:e}=t,n=ve(t,zm);const{min:r=-1/0,max:o=1/0}=n,i=ve(n,Wm);let s=parseFloat(e);const a=typeof e=="string"?e.substring((""+s).length):void 0;s=fn(s,r,o);let c=n.step;c||(Number.isFinite(r)?Number.isFinite(o)?c=+(Math.abs(o-r)/100).toPrecision(1):c=+(Math.abs(s-r)/100).toPrecision(1):Number.isFinite(o)&&(c=+(Math.abs(o-s)/100).toPrecision(1)));const l=c?Ta(c)*10:Ta(s);c=c||l/10;const u=Math.round(fn(Math.log10(1/l),0,2));return{value:a?s+a:s,settings:ee({initialValue:s,step:c,pad:u,min:r,max:o,suffix:a},i)}},Jl=(t,{step:e,initialValue:n})=>{const r=Math.round((t-n)/e);return n+r*e};var Ql=Object.freeze({__proto__:null,schema:Vm,sanitize:Xl,format:Gm,normalize:Zl,sanitizeStep:Jl});function Ie(){return Ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ie.apply(this,arguments)}const eu=p.createContext({});function qe(){return p.useContext(eu)}const vs=p.createContext(null),tu=p.createContext(null),nu=p.createContext(null);function kr(){return p.useContext(tu)}function Km(){return p.useContext(nu)}const ru=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function jr(t,e){const[n,r]=t.split(" "),o={};return n!=="none"&&(o.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${n!=="default"&&n||e.borderColor}`),r&&(o.backgroundColor=r),o}const sr={$inputStyle:()=>t=>jr(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>jr(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>jr(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>jr(t,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Q,css:gE,createTheme:qm,globalCss:Ym,keyframes:mE}=Hp({prefix:"leva",theme:ru(),utils:ee(ee({},sr),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":sr.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":sr.$focusStyle()(t)}),$hover:t=>({"&:hover":sr.$hoverStyle()(t)}),$active:t=>({"&:active":sr.$activeStyle()(t)})})}),Xm=Ym({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function Zm(t){const e=ru();if(!t)return{theme:e,className:""};Object.keys(t).forEach(r=>{Object.assign(e[r],t[r])});const n=qm(e);return{theme:e,className:n.className}}function Kt(t,e){const{theme:n}=p.useContext(vs);if(!(t in n)||!(e in n[t]))return Ht(Oe.THEME_ERROR,t,e),"";let r=e;for(;;){let o=n[t][r];if(typeof o=="string"&&o.charAt(0)==="$")r=o.substr(1);else return o}}const ou=Q("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),iu=Q("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${ou}`]:{paddingLeft:0}}),Jm=Q(iu,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Qm=Q("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),e0=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],t0=["onUpdate"];function ys(t){let{innerLabel:e,value:n,onUpdate:r,onChange:o,onKeyDown:i,type:s,id:a,inputType:c="text",rows:l=0}=t,u=ve(t,e0);const{id:f,emitOnEditStart:d,emitOnEditEnd:g,disabled:v}=qe(),y=a||f,b=p.useRef(null),x=l>0,_=x?"textarea":"input",C=p.useCallback(R=>k=>{const T=k.currentTarget.value;R(T)},[]);w.useEffect(()=>{const R=b.current,k=C(T=>{r(T),g()});return R==null||R.addEventListener("blur",k),()=>R==null?void 0:R.removeEventListener("blur",k)},[C,r,g]);const S=p.useCallback(R=>{R.key==="Enter"&&C(r)(R)},[C,r]),P=Object.assign({as:_},x?{rows:l}:{},u);return w.createElement(Qm,{textArea:x},e&&typeof e=="string"?w.createElement(iu,null,e):e,w.createElement(ou,Ie({levaType:s,ref:b,id:y,type:c,autoComplete:"off",spellCheck:"false",value:n,onChange:C(o),onFocus:()=>d(),onKeyPress:S,onKeyDown:i,disabled:v},P)))}function n0(t){let{onUpdate:e}=t,n=ve(t,t0);const r=p.useCallback(i=>e(km(i)),[e]),o=p.useCallback(i=>{const s=i.key==="ArrowUp"?1:i.key==="ArrowDown"?-1:0;if(s){i.preventDefault();const a=i.altKey?.1:i.shiftKey?10:1;e(c=>parseFloat(c)+s*a)}},[e]);return w.createElement(ys,Ie({},n,{onUpdate:r,onKeyDown:o,type:"number"}))}const uo=Q("div",{}),Oi=Q("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),r0=Q("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Oi}::after`]:{opacity:.6},[`${uo}:hover > & + ${Oi}::after`]:{opacity:.6},[`${uo}:hover > & > svg`]:{opacity:1}}),su=Q("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${uo}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),au=Q("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${su} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),cu=Q(au,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),o0=Q("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),i0=Q("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ki=Q("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),s0=Q("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ki}`]:{pointerEvents:"auto"}}}}}),lu=Q("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),a0=Q("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),c0=Q(xm,{fill:"$toolTipBackground"});function bs({children:t}){const{className:e}=p.useContext(vs);return w.createElement(up,{className:e},t)}const l0=["align"];function u0(){const{id:t,disable:e,disabled:n}=qe();return w.createElement(w.Fragment,null,w.createElement(i0,{id:t+"__disable",type:"checkbox",checked:!n,onChange:()=>e(!n)}),w.createElement("label",{htmlFor:t+"__disable"}))}function f0(t){const{id:e,optional:n,hint:r}=qe(),o=t.htmlFor||(e?{htmlFor:e}:null),i=!r&&typeof t.children=="string"?{title:t.children}:null;return w.createElement(w.Fragment,null,n&&w.createElement(u0,null),r!==void 0?w.createElement(bm,null,w.createElement(wm,{asChild:!0},w.createElement(ki,Ie({},o,t))),w.createElement(Em,{side:"top",sideOffset:2},w.createElement(a0,null,r,w.createElement(c0,null)))):w.createElement(ki,Ie({},o,i,t)))}function xt(t){let{align:e}=t,n=ve(t,l0);const{value:r,label:o,key:i,disabled:s}=qe(),{hideCopyButton:a}=Km(),c=!a&&i!==void 0,[l,u]=p.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[i]:r??""})),u(!0)}catch{Ht(Oe.CLIPBOARD_ERROR,{[i]:r})}};return w.createElement(o0,{align:e,onPointerLeave:()=>u(!1)},w.createElement(f0,n),c&&!s&&w.createElement("div",{title:`Click to copy ${typeof o=="string"?o:i} value`},l?w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},w.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),w.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):w.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},w.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),w.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const d0=["toggled"],h0=Q("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function ws(t){let{toggled:e}=t,n=ve(t,d0);return w.createElement(h0,Ie({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},n),w.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const p0=["input"];function pt(t){let{input:e}=t,n=ve(t,p0);return e?w.createElement(cu,n):w.createElement(au,n)}function uu({value:t,type:e,settings:n,setValue:r}){const[o,i]=p.useState(xa(e,t,n)),s=p.useRef(t),a=p.useRef(n);a.current=n;const c=p.useCallback(u=>i(xa(e,u,a.current)),[e]),l=p.useCallback(u=>{try{r(u)}catch(f){const{type:d,previousValue:g}=f;if(d!=="LEVA_ERROR")throw f;c(g)}},[c,r]);return p.useEffect(()=>{Er(t,s.current)||c(t),s.current=t},[t,c]),{displayValue:o,onChange:i,onUpdate:l}}function Ir(t,e){const{emitOnEditStart:n,emitOnEditEnd:r}=qe();return Eh(o=>{o.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const i=t(o);return o.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),i},e)}function g0(t){const e=p.useRef(null),n=p.useRef(null),r=p.useRef(!1);return p.useEffect(()=>{const o=ql(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,t(e.current,n.current)},250);return window.addEventListener("resize",o),r.current||(o(),r.current=!0),()=>window.removeEventListener("resize",o)},[t]),p.useEffect(()=>{n.current=e.current.getContext("2d")},[]),[e,n]}function fu(){const t=p.useRef(null),e=p.useRef({x:0,y:0}),n=p.useCallback(r=>{Object.assign(e.current,r),t.current&&(t.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[t,n]}const m0=["__refCount"],Uo=(t,e)=>{if(!t[e])return null;const n=t[e];return ve(n,m0)};function v0(t){const e=kr(),[n,r]=p.useState(Uo(e.getData(),t)),o=p.useCallback(l=>e.setValueAtPath(t,l,!0),[t,e]),i=p.useCallback(l=>e.setSettingsAtPath(t,l),[t,e]),s=p.useCallback(l=>e.disableInputAtPath(t,l),[t,e]),a=p.useCallback(()=>e.emitOnEditStart(t),[t,e]),c=p.useCallback(()=>e.emitOnEditEnd(t),[t,e]);return p.useEffect(()=>{r(Uo(e.getData(),t));const l=e.useStore.subscribe(u=>Uo(u.data,t),r,{equalityFn:_o});return()=>l()},[e,t]),[n,{set:o,setSettings:i,disable:s,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:c}]}const y0=Q("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),du=Q("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Ii=Q("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),hu=Q("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),pu=Q("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function b0({value:t,min:e,max:n,onDrag:r,step:o,initialValue:i}){const s=p.useRef(null),a=p.useRef(null),c=p.useRef(0),l=Kt("sizes","scrubberWidth"),u=Ir(({event:d,first:g,xy:[v],movement:[y],memo:b})=>{if(g){const{width:_,left:C}=s.current.getBoundingClientRect();c.current=_-parseFloat(l),b=(d==null?void 0:d.target)===a.current?t:lo((v-C)/_,e,n)}const x=b+lo(y/c.current,0,n-e);return r(Jl(x,{step:o,initialValue:i})),b}),f=co(t,e,n);return w.createElement(hu,Ie({ref:s},u()),w.createElement(du,null,w.createElement(pu,{style:{left:0,right:`${(1-f)*100}%`}})),w.createElement(Ii,{ref:a,style:{left:`calc(${f} * (100% - ${l}))`}}))}const w0=w.memo(({label:t,onUpdate:e,step:n,innerLabelTrim:r})=>{const[o,i]=p.useState(!1),s=Ir(({active:a,delta:[c],event:l,memo:u=0,first:f,last:d,target:g})=>(f&&g.requestPointerLock(),d&&document.exitPointerLock(),i(a),u+=c/2,Math.abs(u)>=1&&(e(v=>parseFloat(v)+Math.floor(u)*n*Yl(l)),u=0),u));return w.createElement(Jm,Ie({dragging:o,title:t.length>1?t:""},s()),t.slice(0,r))});function gu({label:t,id:e,displayValue:n,onUpdate:r,onChange:o,settings:i,innerLabelTrim:s=1}){const a=s>0&&w.createElement(w0,{label:t,step:i.step,onUpdate:r,innerLabelTrim:s});return w.createElement(n0,{id:e,value:String(n),onUpdate:r,onChange:o,innerLabel:a})}function E0(){const t=qe(),{label:e,value:n,onUpdate:r,settings:o,id:i}=t,{min:s,max:a}=o,c=a!==1/0&&s!==-1/0;return w.createElement(pt,{input:!0},w.createElement(xt,null,e),w.createElement(y0,{hasRange:c},c&&w.createElement(b0,Ie({value:parseFloat(n),onDrag:r},o)),w.createElement(gu,Ie({},t,{id:i,label:"value",innerLabelTrim:c?0:1}))))}const{sanitizeStep:x0}=Ql,_0=ve(Ql,["sanitizeStep"]);var T0=ee({component:E0},_0);const S0=(t,e)=>tt().schema({options:tt().passesAnyOf(tt().object(),tt().array())}).test(e),R0=(t,{values:e})=>{if(e.indexOf(t)<0)throw Error("Selected value doesn't match Select options");return t},C0=(t,{values:e})=>e.indexOf(t),$0=t=>{let{value:e,options:n}=t,r,o;return Array.isArray(n)?(o=n,r=n.map(i=>String(i))):(o=Object.values(n),r=Object.keys(n)),"value"in t?o.includes(e)||(r.unshift(String(e)),o.unshift(e)):e=o[0],Object.values(n).includes(e)||(n[String(e)]=e),{value:e,settings:{keys:r,values:o}}};var A0=Object.freeze({__proto__:null,schema:S0,sanitize:R0,format:C0,normalize:$0});const O0=Q("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Pi=Q("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),k0=Q("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Pi}:focus + &`]:{$focusStyle:""},[`${Pi}:hover + &`]:{$hoverStyle:""}});function I0({displayValue:t,value:e,onUpdate:n,id:r,settings:o,disabled:i}){const{keys:s,values:a}=o,c=p.useRef();return e===a[t]&&(c.current=s[t]),w.createElement(O0,null,w.createElement(Pi,{id:r,value:t,onChange:l=>n(a[Number(l.currentTarget.value)]),disabled:i},s.map((l,u)=>w.createElement("option",{key:l,value:u},l))),w.createElement(k0,null,c.current),w.createElement(ws,{toggled:!0}))}function P0(){const{label:t,value:e,displayValue:n,onUpdate:r,id:o,disabled:i,settings:s}=qe();return w.createElement(pt,{input:!0},w.createElement(xt,null,t),w.createElement(I0,{id:o,value:e,displayValue:n,onUpdate:r,settings:s,disabled:i}))}var M0=ee({component:P0},A0);const D0=t=>tt().string().test(t),L0=t=>{if(typeof t!="string")throw Error("Invalid string");return t},N0=({value:t,editable:e=!0,rows:n=!1})=>({value:t,settings:{editable:e,rows:typeof n=="number"?n:n?5:0}});var F0=Object.freeze({__proto__:null,schema:D0,sanitize:L0,normalize:N0});const B0=["displayValue","onUpdate","onChange","editable"],j0=Q("div",{whiteSpace:"pre-wrap"});function U0(t){let{displayValue:e,onUpdate:n,onChange:r,editable:o=!0}=t,i=ve(t,B0);return o?w.createElement(ys,Ie({value:e,onUpdate:n,onChange:r},i)):w.createElement(j0,null,e)}function H0(){const{label:t,settings:e,displayValue:n,onUpdate:r,onChange:o}=qe();return w.createElement(pt,{input:!0},w.createElement(xt,null,t),w.createElement(U0,Ie({displayValue:n,onUpdate:r,onChange:o},e)))}var z0=ee({component:H0},F0);const W0=t=>tt().boolean().test(t),V0=t=>{if(typeof t!="boolean")throw Error("Invalid boolean");return t};var G0=Object.freeze({__proto__:null,schema:W0,sanitize:V0});const K0=Q("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function q0({value:t,onUpdate:e,id:n,disabled:r}){return w.createElement(K0,null,w.createElement("input",{id:n,type:"checkbox",checked:t,onChange:o=>e(o.currentTarget.checked),disabled:r}),w.createElement("label",{htmlFor:n},w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Y0(){const{label:t,value:e,onUpdate:n,disabled:r,id:o}=qe();return w.createElement(pt,{input:!0},w.createElement(xt,null,t),w.createElement(q0,{value:e,onUpdate:n,id:o,disabled:r}))}var X0=ee({component:Y0},G0);const Z0=["locked"];function J0({value:t,id:e,valueKey:n,settings:r,onUpdate:o,innerLabelTrim:i}){const s=p.useRef(t[n]);s.current=t[n];const a=p.useCallback(l=>o({[n]:Kl({type:"NUMBER",value:s.current,settings:r},l)}),[o,r,n]),c=uu({type:"NUMBER",value:t[n],settings:r,setValue:a});return w.createElement(gu,{id:e,label:n,value:t[n],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:r,innerLabelTrim:i})}const Q0=Q("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function ev(t){let{locked:e}=t,n=ve(t,Z0);return w.createElement("svg",Ie({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),e?w.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):w.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Es({value:t,onUpdate:e,settings:n,innerLabelTrim:r}){const{id:o,setSettings:i}=qe(),{lock:s,locked:a}=n;return w.createElement(Q0,{withLock:s},s&&w.createElement(ev,{locked:a,onClick:()=>i({locked:!a})}),Object.keys(t).map((c,l)=>w.createElement(J0,{id:l===0?o:`${o}.${c}`,key:c,valueKey:c,value:t,settings:n[c],onUpdate:e,innerLabelTrim:r})))}const mu=(t,e)=>{const n={};let r=0,o=1/0;Object.entries(t).forEach(([i,s])=>{n[i]=Zl(ee({value:s},e[i])).settings,r=Math.max(r,n[i].step),o=Math.min(o,n[i].pad)});for(let i in n){const{step:s,min:a,max:c}=e[i]||{};!isFinite(s)&&(!isFinite(a)||!isFinite(c))&&(n[i].step=r,n[i].pad=o)}return n},tv=["lock"],nv=["value"];function rv(t){const e=tt().array().length(t).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const o=Object.values(r);return o.length===t&&o.every(i=>isFinite(i))};return r=>e.test(r)||n(r)}function ov(t){return Array.isArray(t)?"array":"object"}function mr(t,e,n){return ov(t)===e?t:e==="array"?Object.values(t):Lm(t,n)}const iv=(t,e,n)=>{const r=mr(t,"object",e.keys);for(let s in r)r[s]=Xl(r[s],e[s]);const o=Object.keys(r);let i={};if(o.length===e.keys.length)i=r;else{const s=mr(n,"object",e.keys);if(o.length===1&&e.locked){const a=o[0],c=r[a],l=s[a],u=l!==0?c/l:1;for(let f in s)f===a?i[a]=c:i[f]=s[f]*u}else i=ee(ee({},s),r)}return mr(i,e.format,e.keys)},sv=(t,e)=>mr(t,"object",e.keys),av=t=>!!t&&("step"in t||"min"in t||"max"in t);function cv(t,e,n=[]){const{lock:r=!1}=e,o=ve(e,tv),i=Array.isArray(t)?"array":"object",s=i==="object"?Object.keys(t):n,a=mr(t,"object",s),c=av(o)?s.reduce((u,f)=>Object.assign(u,{[f]:o}),{}):o,l=mu(a,c);return{value:i==="array"?t:a,settings:ee(ee({},l),{},{format:i,keys:s,lock:r,locked:!1})}}function vu(t){return{schema:rv(t.length),normalize:e=>{let{value:n}=e,r=ve(e,nv);return cv(n,r,t)},format:(e,n)=>sv(e,n),sanitize:(e,n,r)=>iv(e,n,r)}}var lv={grad:.9,turn:360,rad:360/(2*Math.PI)},Bt=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ze=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},dt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},yu=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Ia=function(t){return{r:dt(t.r,0,255),g:dt(t.g,0,255),b:dt(t.b,0,255),a:dt(t.a)}},Ho=function(t){return{r:ze(t.r),g:ze(t.g),b:ze(t.b),a:ze(t.a,3)}},uv=/^#([0-9a-f]{3,8})$/i,Ur=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},bu=function(t){var e=t.r,n=t.g,r=t.b,o=t.a,i=Math.max(e,n,r),s=i-Math.min(e,n,r),a=s?i===e?(n-r)/s:i===n?2+(r-e)/s:4+(e-n)/s:0;return{h:60*(a<0?a+6:a),s:i?s/i*100:0,v:i/255*100,a:o}},wu=function(t){var e=t.h,n=t.s,r=t.v,o=t.a;e=e/360*6,n/=100,r/=100;var i=Math.floor(e),s=r*(1-n),a=r*(1-(e-i)*n),c=r*(1-(1-e+i)*n),l=i%6;return{r:255*[r,a,s,s,c,r][l],g:255*[c,r,r,a,s,s][l],b:255*[s,s,c,r,r,a][l],a:o}},Pa=function(t){return{h:yu(t.h),s:dt(t.s,0,100),l:dt(t.l,0,100),a:dt(t.a)}},Ma=function(t){return{h:ze(t.h),s:ze(t.s),l:ze(t.l),a:ze(t.a,3)}},Da=function(t){return wu((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},vr=function(t){return{h:(e=bu(t)).h,s:(o=(200-(n=e.s))*(r=e.v)/100)>0&&o<200?n*r/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,n,r,o},fv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mi={string:[[function(t){var e=uv.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?ze(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?ze(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=hv.exec(t)||pv.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ia({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=fv.exec(t)||dv.exec(t);if(!e)return null;var n,r,o=Pa({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(lv[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Da(o)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,o=t.a,i=o===void 0?1:o;return Bt(e)&&Bt(n)&&Bt(r)?Ia({r:Number(e),g:Number(n),b:Number(r),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,o=t.a,i=o===void 0?1:o;if(!Bt(e)||!Bt(n)||!Bt(r))return null;var s=Pa({h:Number(e),s:Number(n),l:Number(r),a:Number(i)});return Da(s)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,o=t.a,i=o===void 0?1:o;if(!Bt(e)||!Bt(n)||!Bt(r))return null;var s=function(a){return{h:yu(a.h),s:dt(a.s,0,100),v:dt(a.v,0,100),a:dt(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(i)});return wu(s)},"hsv"]]},La=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},Eu=function(t){return typeof t=="string"?La(t.trim(),Mi.string):typeof t=="object"&&t!==null?La(t,Mi.object):[null,void 0]},gv=function(t){return Eu(t)[1]},zo=function(t,e){var n=vr(t);return{h:n.h,s:dt(n.s+100*e,0,100),l:n.l,a:n.a}},Wo=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Na=function(t,e){var n=vr(t);return{h:n.h,s:n.s,l:dt(n.l+100*e,0,100),a:n.a}},Di=function(){function t(e){this.parsed=Eu(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return ze(Wo(this.rgba),2)},t.prototype.isDark=function(){return Wo(this.rgba)<.5},t.prototype.isLight=function(){return Wo(this.rgba)>=.5},t.prototype.toHex=function(){return e=Ho(this.rgba),n=e.r,r=e.g,o=e.b,s=(i=e.a)<1?Ur(ze(255*i)):"","#"+Ur(n)+Ur(r)+Ur(o)+s;var e,n,r,o,i,s},t.prototype.toRgb=function(){return Ho(this.rgba)},t.prototype.toRgbString=function(){return e=Ho(this.rgba),n=e.r,r=e.g,o=e.b,(i=e.a)<1?"rgba("+n+", "+r+", "+o+", "+i+")":"rgb("+n+", "+r+", "+o+")";var e,n,r,o,i},t.prototype.toHsl=function(){return Ma(vr(this.rgba))},t.prototype.toHslString=function(){return e=Ma(vr(this.rgba)),n=e.h,r=e.s,o=e.l,(i=e.a)<1?"hsla("+n+", "+r+"%, "+o+"%, "+i+")":"hsl("+n+", "+r+"%, "+o+"%)";var e,n,r,o,i},t.prototype.toHsv=function(){return e=bu(this.rgba),{h:ze(e.h),s:ze(e.s),v:ze(e.v),a:ze(e.a,3)};var e},t.prototype.invert=function(){return Ze({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Ze(zo(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ze(zo(this.rgba,-e))},t.prototype.grayscale=function(){return Ze(zo(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Ze(Na(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Ze(Na(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Ze({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):ze(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=vr(this.rgba);return typeof e=="number"?Ze({h:e,s:n.s,l:n.l,a:n.a}):ze(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Ze(e).toHex()},t}(),Ze=function(t){return t instanceof Di?t:new Di(t)},Fa=[],mv=function(t){t.forEach(function(e){Fa.indexOf(e)<0&&(e(Di,Mi),Fa.push(e))})};function vv(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var o in n)r[n[o]]=o;var i={};t.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=r[this.toHex()];if(l)return l;if(s!=null&&s.closest){var u=this.toRgb(),f=1/0,d="black";if(!i.length)for(var g in n)i[g]=new t(n[g]).toRgb();for(var v in n){var y=(a=u,c=i[v],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));y<f&&(f=y,d=v)}return d}},e.string.push([function(s){var a=s.toLowerCase(),c=a==="transparent"?"#0000":n[a];return c?new t(c).toRgb():null},"name"])}function Vn(){return(Vn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function xs(t,e){if(t==null)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e.indexOf(n=i[r])>=0||(o[n]=t[n]);return o}function Li(t){var e=p.useRef(t),n=p.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Bn=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},yr=function(t){return"touches"in t},Ni=function(t){return t&&t.ownerDocument.defaultView||self},Ba=function(t,e,n){var r=t.getBoundingClientRect(),o=yr(e)?function(i,s){for(var a=0;a<i.length;a++)if(i[a].identifier===s)return i[a];return i[0]}(e.touches,n):e;return{left:Bn((o.pageX-(r.left+Ni(t).pageXOffset))/r.width),top:Bn((o.pageY-(r.top+Ni(t).pageYOffset))/r.height)}},ja=function(t){!yr(t)&&t.preventDefault()},_s=w.memo(function(t){var e=t.onMove,n=t.onKey,r=xs(t,["onMove","onKey"]),o=p.useRef(null),i=Li(e),s=Li(n),a=p.useRef(null),c=p.useRef(!1),l=p.useMemo(function(){var g=function(b){ja(b),(yr(b)?b.touches.length>0:b.buttons>0)&&o.current?i(Ba(o.current,b,a.current)):y(!1)},v=function(){return y(!1)};function y(b){var x=c.current,_=Ni(o.current),C=b?_.addEventListener:_.removeEventListener;C(x?"touchmove":"mousemove",g),C(x?"touchend":"mouseup",v)}return[function(b){var x=b.nativeEvent,_=o.current;if(_&&(ja(x),!function(S,P){return P&&!yr(S)}(x,c.current)&&_)){if(yr(x)){c.current=!0;var C=x.changedTouches||[];C.length&&(a.current=C[0].identifier)}_.focus(),i(Ba(_,x,a.current)),y(!0)}},function(b){var x=b.which||b.keyCode;x<37||x>40||(b.preventDefault(),s({left:x===39?.05:x===37?-.05:0,top:x===40?.05:x===38?-.05:0}))},y]},[s,i]),u=l[0],f=l[1],d=l[2];return p.useEffect(function(){return d},[d]),w.createElement("div",Vn({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:o,onKeyDown:f,tabIndex:0,role:"slider"}))}),Pr=function(t){return t.filter(Boolean).join(" ")},Ts=function(t){var e=t.color,n=t.left,r=t.top,o=r===void 0?.5:r,i=Pr(["react-colorful__pointer",t.className]);return w.createElement("div",{className:i,style:{top:100*o+"%",left:100*n+"%"}},w.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Je=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},xu=function(t){var e=t.s,n=t.v,r=t.a,o=(200-e)*n/100;return{h:Je(t.h),s:Je(o>0&&o<200?e*n/100/(o<=100?o:200-o)*100:0),l:Je(o/2),a:Je(r,2)}},Fi=function(t){var e=xu(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Vo=function(t){var e=xu(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},_u=function(t){var e=t.h,n=t.s,r=t.v,o=t.a;e=e/360*6,n/=100,r/=100;var i=Math.floor(e),s=r*(1-n),a=r*(1-(e-i)*n),c=r*(1-(1-e+i)*n),l=i%6;return{r:Je(255*[r,a,s,s,c,r][l]),g:Je(255*[c,r,r,a,s,s][l]),b:Je(255*[s,s,c,r,r,a][l]),a:Je(o,2)}},Tu=function(t){var e=t.r,n=t.g,r=t.b,o=t.a,i=Math.max(e,n,r),s=i-Math.min(e,n,r),a=s?i===e?(n-r)/s:i===n?2+(r-e)/s:4+(e-n)/s:0;return{h:Je(60*(a<0?a+6:a)),s:Je(i?s/i*100:0),v:Je(i/255*100),a:o}},Su=w.memo(function(t){var e=t.hue,n=t.onChange,r=Pr(["react-colorful__hue",t.className]);return w.createElement("div",{className:r},w.createElement(_s,{onMove:function(o){n({h:360*o.left})},onKey:function(o){n({h:Bn(e+360*o.left,0,360)})},"aria-label":"Hue","aria-valuenow":Je(e),"aria-valuemax":"360","aria-valuemin":"0"},w.createElement(Ts,{className:"react-colorful__hue-pointer",left:e/360,color:Fi({h:e,s:100,v:100,a:1})})))}),Ru=w.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:Fi({h:e.h,s:100,v:100,a:1})};return w.createElement("div",{className:"react-colorful__saturation",style:r},w.createElement(_s,{onMove:function(o){n({s:100*o.left,v:100-100*o.top})},onKey:function(o){n({s:Bn(e.s+100*o.left,0,100),v:Bn(e.v-100*o.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Je(e.s)+"%, Brightness "+Je(e.v)+"%"},w.createElement(Ts,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Fi(e)})))}),Ss=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function Cu(t,e,n){var r=Li(n),o=p.useState(function(){return t.toHsva(e)}),i=o[0],s=o[1],a=p.useRef({color:e,hsva:i});p.useEffect(function(){if(!t.equal(e,a.current.color)){var l=t.toHsva(e);a.current={hsva:l,color:e},s(l)}},[e,t]),p.useEffect(function(){var l;Ss(i,a.current.hsva)||t.equal(l=t.fromHsva(i),a.current.color)||(a.current={hsva:i,color:l},r(l))},[i,t,r]);var c=p.useCallback(function(l){s(function(u){return Object.assign({},u,l)})},[]);return[i,c]}var yv=typeof window<"u"?p.useLayoutEffect:p.useEffect,bv=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Ua=new Map,$u=function(t){yv(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!Ua.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Ua.set(e,n);var r=bv();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},wv=function(t){var e=t.className,n=t.colorModel,r=t.color,o=r===void 0?n.defaultColor:r,i=t.onChange,s=xs(t,["className","colorModel","color","onChange"]),a=p.useRef(null);$u(a);var c=Cu(n,o,i),l=c[0],u=c[1],f=Pr(["react-colorful",e]);return w.createElement("div",Vn({},s,{ref:a,className:f}),w.createElement(Ru,{hsva:l,onChange:u}),w.createElement(Su,{hue:l.h,onChange:u,className:"react-colorful__last-control"}))},Ev=function(t){var e=t.className,n=t.hsva,r=t.onChange,o={backgroundImage:"linear-gradient(90deg, "+Vo(Object.assign({},n,{a:0}))+", "+Vo(Object.assign({},n,{a:1}))+")"},i=Pr(["react-colorful__alpha",e]),s=Je(100*n.a);return w.createElement("div",{className:i},w.createElement("div",{className:"react-colorful__alpha-gradient",style:o}),w.createElement(_s,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Bn(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},w.createElement(Ts,{className:"react-colorful__alpha-pointer",left:n.a,color:Vo(n)})))},xv=function(t){var e=t.className,n=t.colorModel,r=t.color,o=r===void 0?n.defaultColor:r,i=t.onChange,s=xs(t,["className","colorModel","color","onChange"]),a=p.useRef(null);$u(a);var c=Cu(n,o,i),l=c[0],u=c[1],f=Pr(["react-colorful",e]);return w.createElement("div",Vn({},s,{ref:a,className:f}),w.createElement(Ru,{hsva:l,onChange:u}),w.createElement(Su,{hue:l.h,onChange:u}),w.createElement(Ev,{hsva:l,onChange:u,className:"react-colorful__last-control"}))},_v={defaultColor:{r:0,g:0,b:0,a:1},toHsva:Tu,fromHsva:_u,equal:Ss},Tv=function(t){return w.createElement(xv,Vn({},t,{colorModel:_v}))},Sv={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return Tu({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=_u(t)).r,g:e.g,b:e.b};var e},equal:Ss},Rv=function(t){return w.createElement(wv,Vn({},t,{colorModel:Sv}))},Cv=Cd();const _e=es(Cv);var $v=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Mr(t,e){var n=Av(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Av(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),o=$v.get(r);o&&Object.defineProperty(t,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return t}var Ov=[".DS_Store","Thumbs.db"];function kv(t){return jn(this,void 0,void 0,function(){return Un(this,function(e){return fo(t)&&Iv(t)?[2,Lv(t.dataTransfer,t.type)]:Pv(t)?[2,Mv(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,Dv(t)]:[2,[]]})})}function Iv(t){return fo(t.dataTransfer)}function Pv(t){return fo(t)&&fo(t.target)}function fo(t){return typeof t=="object"&&t!==null}function Mv(t){return Bi(t.target.files).map(function(e){return Mr(e)})}function Dv(t){return jn(this,void 0,void 0,function(){var e;return Un(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Mr(r)})]}})})}function Lv(t,e){return jn(this,void 0,void 0,function(){var n,r;return Un(this,function(o){switch(o.label){case 0:return t===null?[2,[]]:t.items?(n=Bi(t.items).filter(function(i){return i.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(Nv))]):[3,2];case 1:return r=o.sent(),[2,Ha(Au(r))];case 2:return[2,Ha(Bi(t.files).map(function(i){return Mr(i)}))]}})})}function Ha(t){return t.filter(function(e){return Ov.indexOf(e.name)===-1})}function Bi(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function Nv(t){if(typeof t.webkitGetAsEntry!="function")return za(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?Ou(e):za(t)}function Au(t){return t.reduce(function(e,n){return $d(e,Array.isArray(n)?Au(n):[n])},[])}function za(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=Mr(e);return Promise.resolve(n)}function Fv(t){return jn(this,void 0,void 0,function(){return Un(this,function(e){return[2,t.isDirectory?Ou(t):Bv(t)]})})}function Ou(t){var e=t.createReader();return new Promise(function(n,r){var o=[];function i(){var s=this;e.readEntries(function(a){return jn(s,void 0,void 0,function(){var c,l,u;return Un(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return c=f.sent(),n(c),[3,4];case 3:return l=f.sent(),r(l),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(Fv)),o.push(u),i(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}i()})}function Bv(t){return jn(this,void 0,void 0,function(){return Un(this,function(e){return[2,new Promise(function(n,r){t.file(function(o){var i=Mr(o,t.fullPath);n(i)},function(o){r(o)})})]})})}var Hr={},Wa;function jv(){return Wa||(Wa=1,Hr.__esModule=!0,Hr.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",o=(t.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return n.some(function(s){var a=s.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?i===a.replace(/\/.*$/,""):o===a})}return!0}),Hr}var Uv=jv();const Hv=es(Uv);function Va(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ga(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Va(Object(n),!0).forEach(function(r){ku(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ku(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ka(t,e){return Gv(t)||Vv(t,e)||Wv(t,e)||zv()}function zv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wv(t,e){if(t){if(typeof t=="string")return qa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qa(t,e)}}function qa(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vv(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,s,a;try{for(n=n.call(t);!(o=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));o=!0);}catch(c){i=!0,a=c}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw a}}return r}}function Gv(t){if(Array.isArray(t))return t}var Kv="file-invalid-type",qv="file-too-large",Yv="file-too-small",Xv="too-many-files",Zv=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Kv,message:"File type must be ".concat(n)}},Ya=function(e){return{code:qv,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Xa=function(e){return{code:Yv,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Jv={code:Xv,message:"Too many files"};function Iu(t,e){var n=t.type==="application/x-moz-file"||Hv(t,e);return[n,n?null:Zv(e)]}function Pu(t,e,n){if(ar(t.size))if(ar(e)&&ar(n)){if(t.size>n)return[!1,Ya(n)];if(t.size<e)return[!1,Xa(e)]}else{if(ar(e)&&t.size<e)return[!1,Xa(e)];if(ar(n)&&t.size>n)return[!1,Ya(n)]}return[!0,null]}function ar(t){return t!=null}function Qv(t){var e=t.files,n=t.accept,r=t.minSize,o=t.maxSize,i=t.multiple,s=t.maxFiles;return!i&&e.length>1||i&&s>=1&&e.length>s?!1:e.every(function(a){var c=Iu(a,n),l=Ka(c,1),u=l[0],f=Pu(a,r,o),d=Ka(f,1),g=d[0];return u&&g})}function ho(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function zr(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Za(t){t.preventDefault()}function ey(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function ty(t){return t.indexOf("Edge/")!==-1}function ny(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return ey(t)||ty(t)}function At(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return e.some(function(a){return!ho(r)&&a&&a.apply(void 0,[r].concat(i)),ho(r)})}}function ry(){return"showOpenFilePicker"in window}function oy(t){return t=typeof t=="string"?t.split(","):t,[{description:"everything",accept:Array.isArray(t)?t.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,n){return Ga(Ga({},e),{},ku({},n,[]))},{}):{}}]}function iy(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function sy(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}var ay=["children"],cy=["open"],ly=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],uy=["refKey","onChange","onClick"];function fy(t){return py(t)||hy(t)||Mu(t)||dy()}function dy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hy(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function py(t){if(Array.isArray(t))return ji(t)}function Go(t,e){return vy(t)||my(t,e)||Mu(t,e)||gy()}function gy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mu(t,e){if(t){if(typeof t=="string")return ji(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ji(t,e)}}function ji(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function my(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,s,a;try{for(n=n.call(t);!(o=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));o=!0);}catch(c){i=!0,a=c}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw a}}return r}}function vy(t){if(Array.isArray(t))return t}function Ja(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ja(Object(n),!0).forEach(function(r){Ui(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ui(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function po(t,e){if(t==null)return{};var n=yy(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yy(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var Rs=p.forwardRef(function(t,e){var n=t.children,r=po(t,ay),o=Lu(r),i=o.open,s=po(o,cy);return p.useImperativeHandle(e,function(){return{open:i}},[i]),w.createElement(p.Fragment,null,n(Ae(Ae({},s),{},{open:i})))});Rs.displayName="Dropzone";var Du={disabled:!1,getFilesFromEvent:kv,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Rs.defaultProps=Du;Rs.propTypes={children:_e.func,accept:_e.oneOfType([_e.string,_e.arrayOf(_e.string)]),multiple:_e.bool,preventDropOnDocument:_e.bool,noClick:_e.bool,noKeyboard:_e.bool,noDrag:_e.bool,noDragEventsBubbling:_e.bool,minSize:_e.number,maxSize:_e.number,maxFiles:_e.number,disabled:_e.bool,getFilesFromEvent:_e.func,onFileDialogCancel:_e.func,onFileDialogOpen:_e.func,useFsAccessApi:_e.bool,onDragEnter:_e.func,onDragLeave:_e.func,onDragOver:_e.func,onDrop:_e.func,onDropAccepted:_e.func,onDropRejected:_e.func,validator:_e.func};var Hi={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Lu(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ae(Ae({},Du),t),n=e.accept,r=e.disabled,o=e.getFilesFromEvent,i=e.maxSize,s=e.minSize,a=e.multiple,c=e.maxFiles,l=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,d=e.onDrop,g=e.onDropAccepted,v=e.onDropRejected,y=e.onFileDialogCancel,b=e.onFileDialogOpen,x=e.useFsAccessApi,_=e.preventDropOnDocument,C=e.noClick,S=e.noKeyboard,P=e.noDrag,R=e.noDragEventsBubbling,k=e.validator,T=p.useMemo(function(){return typeof b=="function"?b:Qa},[b]),I=p.useMemo(function(){return typeof y=="function"?y:Qa},[y]),D=p.useRef(null),L=p.useRef(null),F=p.useReducer(by,Hi),W=Go(F,2),z=W[0],X=W[1],Y=z.isFocused,de=z.isFileDialogActive,le=z.draggedFiles,ye=p.useRef(typeof window<"u"&&window.isSecureContext&&x&&ry()),re=function(){!ye.current&&de&&setTimeout(function(){if(L.current){var te=L.current.files;te.length||(X({type:"closeDialog"}),I())}},300)};p.useEffect(function(){return window.addEventListener("focus",re,!1),function(){window.removeEventListener("focus",re,!1)}},[L,de,I,ye]);var Re=p.useRef([]),fe=function(te){D.current&&D.current.contains(te.target)||(te.preventDefault(),Re.current=[])};p.useEffect(function(){return _&&(document.addEventListener("dragover",Za,!1),document.addEventListener("drop",fe,!1)),function(){_&&(document.removeEventListener("dragover",Za),document.removeEventListener("drop",fe))}},[D,_]);var oe=p.useCallback(function(V){V.preventDefault(),V.persist(),Jt(V),Re.current=[].concat(fy(Re.current),[V.target]),zr(V)&&Promise.resolve(o(V)).then(function(te){ho(V)&&!R||(X({draggedFiles:te,isDragActive:!0,type:"setDraggedFiles"}),l&&l(V))})},[o,l,R]),he=p.useCallback(function(V){V.preventDefault(),V.persist(),Jt(V);var te=zr(V);if(te&&V.dataTransfer)try{V.dataTransfer.dropEffect="copy"}catch{}return te&&f&&f(V),!1},[f,R]),Fe=p.useCallback(function(V){V.preventDefault(),V.persist(),Jt(V);var te=Re.current.filter(function(We){return D.current&&D.current.contains(We)}),Me=te.indexOf(V.target);Me!==-1&&te.splice(Me,1),Re.current=te,!(te.length>0)&&(X({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),zr(V)&&u&&u(V))},[D,u,R]),ue=p.useCallback(function(V,te){var Me=[],We=[];V.forEach(function(nt){var Qt=Iu(nt,n),vt=Go(Qt,2),Yn=vt[0],Xn=vt[1],Zn=Pu(nt,s,i),Rt=Go(Zn,2),je=Rt[0],Cn=Rt[1],Ct=k?k(nt):null;if(Yn&&je&&!Ct)Me.push(nt);else{var Ve=[Xn,Cn];Ct&&(Ve=Ve.concat(Ct)),We.push({file:nt,errors:Ve.filter(function(Ue){return Ue})})}}),(!a&&Me.length>1||a&&c>=1&&Me.length>c)&&(Me.forEach(function(nt){We.push({file:nt,errors:[Jv]})}),Me.splice(0)),X({acceptedFiles:Me,fileRejections:We,type:"setFiles"}),d&&d(Me,We,te),We.length>0&&v&&v(We,te),Me.length>0&&g&&g(Me,te)},[X,a,n,s,i,c,d,g,v,k]),Pe=p.useCallback(function(V){V.preventDefault(),V.persist(),Jt(V),Re.current=[],zr(V)&&Promise.resolve(o(V)).then(function(te){ho(V)&&!R||ue(te,V)}),X({type:"reset"})},[o,ue,R]),De=p.useCallback(function(){if(ye.current){X({type:"openDialog"}),T();var V={multiple:a,types:oy(n)};window.showOpenFilePicker(V).then(function(te){return o(te)}).then(function(te){ue(te,null),X({type:"closeDialog"})}).catch(function(te){iy(te)?(I(te),X({type:"closeDialog"})):sy(te)&&(ye.current=!1,L.current&&(L.current.value=null,L.current.click()))});return}L.current&&(X({type:"openDialog"}),T(),L.current.value=null,L.current.click())},[X,T,I,x,ue,n,a]),gt=p.useCallback(function(V){!D.current||!D.current.isEqualNode(V.target)||(V.key===" "||V.key==="Enter"||V.keyCode===32||V.keyCode===13)&&(V.preventDefault(),De())},[D,De]),dn=p.useCallback(function(){X({type:"focus"})},[]),hn=p.useCallback(function(){X({type:"blur"})},[]),Lt=p.useCallback(function(){C||(ny()?setTimeout(De,0):De())},[C,De]),mt=function(te){return r?null:te},Zt=function(te){return S?null:mt(te)},Nt=function(te){return P?null:mt(te)},Jt=function(te){R&&te.stopPropagation()},Kn=p.useMemo(function(){return function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=V.refKey,Me=te===void 0?"ref":te,We=V.role,nt=V.onKeyDown,Qt=V.onFocus,vt=V.onBlur,Yn=V.onClick,Xn=V.onDragEnter,Zn=V.onDragOver,Rt=V.onDragLeave,je=V.onDrop,Cn=po(V,ly);return Ae(Ae(Ui({onKeyDown:Zt(At(nt,gt)),onFocus:Zt(At(Qt,dn)),onBlur:Zt(At(vt,hn)),onClick:mt(At(Yn,Lt)),onDragEnter:Nt(At(Xn,oe)),onDragOver:Nt(At(Zn,he)),onDragLeave:Nt(At(Rt,Fe)),onDrop:Nt(At(je,Pe)),role:typeof We=="string"&&We!==""?We:"button"},Me,D),!r&&!S?{tabIndex:0}:{}),Cn)}},[D,gt,dn,hn,Lt,oe,he,Fe,Pe,S,P,r]),qn=p.useCallback(function(V){V.stopPropagation()},[]),_t=p.useMemo(function(){return function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},te=V.refKey,Me=te===void 0?"ref":te,We=V.onChange,nt=V.onClick,Qt=po(V,uy),vt=Ui({accept:n,multiple:a,type:"file",style:{display:"none"},onChange:mt(At(We,Pe)),onClick:mt(At(nt,qn)),tabIndex:-1},Me,L);return Ae(Ae({},vt),Qt)}},[L,n,a,Pe,r]),Tt=le.length,pn=Tt>0&&Qv({files:le,accept:n,minSize:s,maxSize:i,multiple:a,maxFiles:c}),St=Tt>0&&!pn;return Ae(Ae({},z),{},{isDragAccept:pn,isDragReject:St,isFocused:Y&&!r,getRootProps:Kn,getInputProps:_t,rootRef:D,inputRef:L,open:mt(De)})}function by(t,e){switch(e.type){case"focus":return Ae(Ae({},t),{},{isFocused:!0});case"blur":return Ae(Ae({},t),{},{isFocused:!1});case"openDialog":return Ae(Ae({},Hi),{},{isFileDialogActive:!0});case"closeDialog":return Ae(Ae({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,r=e.draggedFiles;return Ae(Ae({},t),{},{draggedFiles:r,isDragActive:n});case"setFiles":return Ae(Ae({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Ae({},Hi);default:return t}}function Qa(){}function wy(t){let e;const n=new Set,r=(l,u)=>{const f=typeof l=="function"?l(e):l;if(f!==e){const d=e;e=u?f:Object.assign({},e,f),n.forEach(g=>g(e,d))}},o=()=>e,i=(l,u=o,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=u(e);function g(){const v=u(e);if(!f(d,v)){const y=d;l(d=v,y)}}return n.add(g),()=>n.delete(g)},c={setState:r,getState:o,subscribe:(l,u,f)=>u||f?i(l,u,f):(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return e=t(r,o,c),c}const Ey=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ec=Ey?p.useEffect:p.useLayoutEffect;function xy(t){const e=typeof t=="function"?wy(t):t,n=(r=e.getState,o=Object.is)=>{const[,i]=p.useReducer(b=>b+1,0),s=e.getState(),a=p.useRef(s),c=p.useRef(r),l=p.useRef(o),u=p.useRef(!1),f=p.useRef();f.current===void 0&&(f.current=r(s));let d,g=!1;(a.current!==s||c.current!==r||l.current!==o||u.current)&&(d=r(s),g=!o(f.current,d)),ec(()=>{g&&(f.current=d),a.current=s,c.current=r,l.current=o,u.current=!1});const v=p.useRef(s);ec(()=>{const b=()=>{try{const _=e.getState(),C=c.current(_);l.current(f.current,C)||(a.current=_,f.current=C,i())}catch{u.current=!0,i()}},x=e.subscribe(b);return e.getState()!==v.current&&b(),x},[]);const y=g?d:f.current;return p.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const o=r.length<=0;return{value:r.shift(),done:o}}}},n}const _y=t=>(e,n,r)=>{const o=r.subscribe;return r.subscribe=(s,a,c)=>{let l=s;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let f=s(r.getState());l=d=>{const g=s(d);if(!u(f,g)){const v=f;a(f=g,v)}},c!=null&&c.fireImmediately&&a(f,f)}return o(l)},t(e,n,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Ko,tc;function Ty(){return tc||(tc=1,Ko=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),Ko}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var qo,nc;function Nu(){if(nc)return qo;nc=1;var t=Ty();function e(n){return t(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}return qo=function(r){var o,i;return!(e(r)===!1||(o=r.constructor,typeof o!="function")||(i=o.prototype,e(i)===!1)||i.hasOwnProperty("isPrototypeOf")===!1)},qo}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Yo,rc;function Cs(){if(rc)return Yo;rc=1;var t=Nu();return Yo=function(n){return t(n)||typeof n=="function"||Array.isArray(n)},Yo}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Xo,oc;function Sy(){return oc||(oc=1,Xo=function(e,n,r){for(var o in e)if(n.call(r,e[o],o,e)===!1)break}),Xo}var Zo,ic;function Ry(){if(ic)return Zo;ic=1;var t=Cs(),e=Sy();function n(s,a){for(var c=arguments.length,l=0;++l<c;){var u=arguments[l];o(u)&&e(u,r,s)}return s}function r(s,a){if(i(a)){var c=this[a];o(s)&&o(c)?n(c,s):this[a]=s}}function o(s){return t(s)&&!Array.isArray(s)}function i(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return Zo=n,Zo}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Jo,sc;function Cy(){if(sc)return Jo;sc=1,Jo=function(n,r,o,i,s){if(!t(n)||!r)return n;if(r=e(r),o&&(r+="."+e(o)),i&&(r+="."+e(i)),s&&(r+="."+e(s)),r in n)return n[r];for(var a=r.split("."),c=a.length,l=-1;n&&++l<c;){for(var u=a[l];u[u.length-1]==="\\";)u=u.slice(0,-1)+"."+a[++l];n=n[u]}return n};function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function e(n){return n?Array.isArray(n)?n.join("."):n:""}return Jo}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var Qo,ac;function $y(){return ac||(ac=1,Qo=function(t,e){if(t===null||typeof t>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return t;for(var n=Object.prototype.propertyIsEnumerable,r=Object(t),o=arguments.length,i=0;++i<o;)for(var s=Object(arguments[i]),a=Object.getOwnPropertySymbols(s),c=0;c<a.length;c++){var l=a[c];n.call(s,l)&&(r[l]=s[l])}return r}),Qo}var ei,cc;function Ay(){if(cc)return ei;cc=1;var t=Cs(),e=$y();ei=Object.assign||function(a){if(a===null||typeof a>"u")throw new TypeError("Cannot convert undefined or null to object");i(a)||(a={});for(var c=1;c<arguments.length;c++){var l=arguments[c];r(l)&&(l=o(l)),i(l)&&(n(a,l),e(a,l))}return a};function n(a,c){for(var l in c)s(c,l)&&(a[l]=c[l])}function r(a){return a&&typeof a=="string"}function o(a){var c={};for(var l in a)c[l]=a[l];return c}function i(a){return a&&typeof a=="object"||t(a)}function s(a,c){return Object.prototype.hasOwnProperty.call(a,c)}return ei}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ti,lc;function Oy(){if(lc)return ti;lc=1;var t=Ay();ti=function(o,i,s){if(typeof o!="string")throw new TypeError("expected a string");typeof i=="function"&&(s=i,i=null),typeof i=="string"&&(i={sep:i});var a=t({sep:"."},i),c=a.quotes||['"',"'","`"],l;a.brackets===!0?l={"<":">","(":")","[":"]","{":"}"}:a.brackets&&(l=a.brackets);var u=[],f=[],d=[""],g=a.sep,v=o.length,y=-1,b;function x(){if(l&&f.length)return l[f[f.length-1]]}for(;++y<v;){var _=o[y],C=o[y+1],S={val:_,idx:y,arr:d,str:o};if(u.push(S),_==="\\"){S.val=r(a,o,y)===!0?_+C:C,S.escaped=!0,typeof s=="function"&&s(S),d[d.length-1]+=S.val,y++;continue}if(l&&l[_]){f.push(_);var P=x(),R=y+1;if(o.indexOf(P,R+1)!==-1)for(;f.length&&R<v;){var k=o[++R];if(k==="\\"){k++;continue}if(c.indexOf(k)!==-1){R=e(o,k,R+1);continue}if(P=x(),f.length&&o.indexOf(P,R+1)===-1)break;if(l[k]){f.push(k);continue}P===k&&f.pop()}if(b=R,b===-1){d[d.length-1]+=_;continue}_=o.slice(y,b+1),S.val=_,S.idx=y=b}if(c.indexOf(_)!==-1){if(b=e(o,_,y+1),b===-1){d[d.length-1]+=_;continue}n(_,a)===!0?_=o.slice(y,b+1):_=o.slice(y+1,b),S.val=_,S.idx=y=b}if(typeof s=="function"&&(s(S,u),_=S.val,y=S.idx),S.val===g&&S.split!==!1){d.push("");continue}d[d.length-1]+=S.val}return d};function e(o,i,s,a){var c=o.indexOf(i,s);return o.charAt(c-1)==="\\"?e(o,i,c+1):c}function n(o,i){return i.keepDoubleQuotes===!0&&o==='"'||i.keepSingleQuotes===!0&&o==="'"?!0:i.keepQuotes}function r(o,i,s){return typeof o.keepEscaping=="function"?o.keepEscaping(i,s):o.keepEscaping===!0||i[s+1]==="\\"}return ti}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ni,uc;function ky(){return uc||(uc=1,ni=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),ni}var ri,fc;function Iy(){if(fc)return ri;fc=1;var t=ky();ri=function(o){t(o)||(o={});for(var i=arguments.length,s=1;s<i;s++){var a=arguments[s];t(a)&&e(o,a)}return o};function e(r,o){for(var i in o)n(o,i)&&(r[i]=o[i])}function n(r,o){return Object.prototype.hasOwnProperty.call(r,o)}return ri}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var oi,dc;function Py(){return dc||(dc=1,oi=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),oi}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var ii,hc;function My(){if(hc)return ii;hc=1;var t=Oy(),e=Iy(),n=Nu(),r=Py();ii=function(i,s,a){if(!r(i)||(Array.isArray(s)&&(s=[].concat.apply([],s).join(".")),typeof s!="string"))return i;for(var c=t(s,{sep:".",brackets:!0}).filter(o),l=c.length,u=-1,f=i;++u<l;){var d=c[u];if(u!==l-1){r(f[d])||(f[d]={}),f=f[d];continue}n(f[d])&&n(a)?f[d]=e({},f[d],a):f[d]=a}return i};function o(i){return i!=="__proto__"&&i!=="constructor"&&i!=="prototype"}return ii}var si,pc;function Dy(){if(pc)return si;pc=1;var t=Cs(),e=Ry(),n=Cy(),r=My();return si=function(i,s,a){if(!t(i))throw new TypeError("expected an object");if(typeof s!="string"||a==null)return e.apply(null,arguments);if(typeof a=="string")return r(i,s,a),i;var c=n(i,s);return t(a)&&t(c)&&(a=e({},c,a)),r(i,s,a),i},si}var Ly=Dy();const Ny=es(Ly),$s=(...t)=>t.filter(Boolean).join(".");function Fy(t){const e=t.split(".");return[e.pop(),e.join(".")||void 0]}function By(t,e){return Object.entries(Mm(t,e)).reduce((n,[,{value:r,disabled:o,key:i}])=>(n[i]=o?void 0:r,n),{})}function jy(t,e){const n=p.useRef();return Er(t,n.current)||(n.current=t),n.current}function Fu(t,e){return p.useMemo(t,jy(e))}function Uy(t){const e=p.useRef(null),n=p.useRef(null),r=p.useRef(!0);return p.useLayoutEffect(()=>{t||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),p.useEffect(()=>{if(r.current){r.current=!1;return}let o;const i=e.current,s=()=>{t&&(i.style.removeProperty("height"),i.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};i.addEventListener("transitionend",s,{once:!0});const{height:a}=n.current.getBoundingClientRect();return i.style.height=a+"px",t||(i.style.overflow="hidden",o=window.setTimeout(()=>i.style.height="0px",50)),()=>{i.removeEventListener("transitionend",s),clearTimeout(o)}},[t]),{wrapperRef:e,contentRef:n}}const Hy=t=>{const[e,n]=p.useState(t.getVisiblePaths());return p.useEffect(()=>{n(t.getVisiblePaths());const r=t.useStore.subscribe(t.getVisiblePaths,n,{equalityFn:_o});return()=>r()},[t]),e};function zy(t,e,n){return t.useStore(o=>{const i=ee(ee({},n),o.data);return By(i,e)},_o)}function Bu(t=3){const e=p.useRef(null),n=p.useRef(null),[r,o]=p.useState(!1),i=p.useCallback(()=>o(!0),[]),s=p.useCallback(()=>o(!1),[]);return p.useLayoutEffect(()=>{if(r){const{bottom:a,top:c,left:l}=e.current.getBoundingClientRect(),{height:u}=n.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=l+"px",f==="down"?n.current.style.top=a+t+"px":n.current.style.bottom=window.innerHeight-c+t+"px"}},[t,r]),{popinRef:e,wrapperRef:n,shown:r,show:i,hide:s}}mv([vv]);const Wy={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};tt.extend({color:()=>t=>Ze(t).isValid()});const Vy=t=>tt().color().test(t);function ju(t,{format:e,hasAlpha:n,isString:r}){const o=Wy[e]+(r&&e!=="hex"?"String":""),i=t[o]();return typeof i=="object"&&!n?Dm(i,["a"]):i}const Uu=(t,e)=>{const n=Ze(t);if(!n.isValid())throw Error("Invalid color");return ju(n,e)},Gy=(t,e)=>ju(Ze(t),ee(ee({},e),{},{isString:!0,format:"hex"})),Ky=({value:t})=>{const e=gv(t),n=e==="name"?"hex":e,r=typeof t=="object"?"a"in t:e==="hex"&&t.length===8||/^(rgba)|(hsla)|(hsva)/.test(t),o={format:n,hasAlpha:r,isString:typeof t=="string"};return{value:Uu(t,o),settings:o}};var qy=Object.freeze({__proto__:null,schema:Vy,sanitize:Uu,format:Gy,normalize:Ky});const Yy=Q("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Xy=Q("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Zy=Q("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function gc(t,e){return e!=="rgb"?Ze(t).toRgb():t}function Jy({value:t,displayValue:e,settings:n,onUpdate:r}){const{emitOnEditStart:o,emitOnEditEnd:i}=qe(),{format:s,hasAlpha:a}=n,{popinRef:c,wrapperRef:l,shown:u,show:f,hide:d}=Bu(),g=p.useRef(0),[v,y]=p.useState(()=>gc(t,s)),b=a?Tv:Rv,x=()=>{y(gc(t,s)),f(),o()},_=()=>{d(),i(),window.clearTimeout(g.current)},C=()=>{g.current=window.setTimeout(_,500)};return p.useEffect(()=>()=>window.clearTimeout(g.current),[]),w.createElement(w.Fragment,null,w.createElement(Yy,{ref:c,active:u,onClick:()=>x(),style:{color:e}}),u&&w.createElement(bs,null,w.createElement(lu,{onPointerUp:_}),w.createElement(Zy,{ref:l,onMouseEnter:()=>window.clearTimeout(g.current),onMouseLeave:S=>S.buttons===0&&C()},w.createElement(b,{color:v,onChange:r}))))}function Qy(){const{value:t,displayValue:e,label:n,onChange:r,onUpdate:o,settings:i}=qe();return w.createElement(pt,{input:!0},w.createElement(xt,null,n),w.createElement(Xy,null,w.createElement(Jy,{value:t,displayValue:e,onChange:r,onUpdate:o,settings:i}),w.createElement(ys,{value:e,onChange:r,onUpdate:o})))}var eb=ee({component:Qy},qy);function tb(){const{label:t,displayValue:e,onUpdate:n,settings:r}=qe();return w.createElement(pt,{input:!0},w.createElement(xt,null,t),w.createElement(Es,{value:e,settings:r,onUpdate:n}))}var nb=ee({component:tb},vu(["x","y","z"]));const rb=Q("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),ob=Q("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function ib({value:t,settings:e,onUpdate:n}){const r=p.useRef(),o=p.useRef(0),i=p.useRef(0),s=p.useRef(1),[a,c]=p.useState(!1),[l,u]=p.useState(!1),[f,d]=fu(),g=p.useRef(null),v=p.useRef(null);p.useLayoutEffect(()=>{if(a){const{top:F,left:W,width:z,height:X}=g.current.getBoundingClientRect();v.current.style.left=W+z/2+"px",v.current.style.top=F+X/2+"px"}},[a]);const{keys:[y,b],joystick:x}=e,_=x==="invertY"?1:-1,{[y]:{step:C},[b]:{step:S}}=e,P=Kt("sizes","joystickWidth"),R=Kt("sizes","joystickHeight"),k=parseFloat(P)*.8/2,T=parseFloat(R)*.8/2,I=p.useCallback(()=>{r.current||(u(!0),o.current&&d({x:o.current*k}),i.current&&d({y:i.current*-T}),r.current=window.setInterval(()=>{n(F=>{const W=C*o.current*s.current,z=_*S*i.current*s.current;return Array.isArray(F)?{[y]:F[0]+W,[b]:F[1]+z}:{[y]:F[y]+W,[b]:F[b]+z}})},16))},[k,T,n,d,C,S,y,b,_]),D=p.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);p.useEffect(()=>{function F(W){s.current=Yl(W)}return window.addEventListener("keydown",F),window.addEventListener("keyup",F),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",F),window.removeEventListener("keyup",F)}},[]);const L=Ir(({first:F,active:W,delta:[z,X],movement:[Y,de]})=>{F&&c(!0);const le=fn(Y,-k,k),ye=fn(de,-T,T);o.current=Math.abs(Y)>Math.abs(le)?Math.sign(Y-le):0,i.current=Math.abs(de)>Math.abs(ye)?Math.sign(ye-de):0;let re=t[y],Re=t[b];W?(o.current||(re+=z*C*s.current,d({x:le})),i.current||(Re-=_*X*S*s.current,d({y:ye})),o.current||i.current?I():D(),n({[y]:re,[b]:Re})):(c(!1),o.current=0,i.current=0,d({x:0,y:0}),D())});return w.createElement(rb,Ie({ref:g},L()),a&&w.createElement(bs,null,w.createElement(ob,{ref:v,isOutOfBounds:l},w.createElement("div",null),w.createElement("span",{ref:f}))))}const sb=Q("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function ab(){const{label:t,displayValue:e,onUpdate:n,settings:r}=qe();return w.createElement(pt,{input:!0},w.createElement(xt,null,t),w.createElement(sb,{withJoystick:!!r.joystick},r.joystick&&w.createElement(ib,{value:e,settings:r,onUpdate:n}),w.createElement(Es,{value:e,settings:r,onUpdate:n})))}const cb=["joystick"],Hu=vu(["x","y"]),lb=t=>{let{joystick:e=!0}=t,n=ve(t,cb);const{value:r,settings:o}=Hu.normalize(n);return{value:r,settings:ee(ee({},o),{},{joystick:e})}};var ub=ee(ee({component:ab},Hu),{},{normalize:lb});const fb=t=>{if(t!==void 0){if(t instanceof File)try{return URL.createObjectURL(t)}catch{return}if(typeof t=="string"&&t.indexOf("blob:")===0)return t;throw Error("Invalid image format [undefined | blob | File].")}},db=(t,e)=>typeof e=="object"&&"image"in e,hb=({image:t})=>({value:t});var pb=Object.freeze({__proto__:null,sanitize:fb,schema:db,normalize:hb});const gb=Q("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),mb=Q("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),vb=Q("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),yb=Q("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),bb=Q("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),wb=Q("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Eb(){const{label:t,value:e,onUpdate:n,disabled:r}=qe(),{popinRef:o,wrapperRef:i,shown:s,show:a,hide:c}=Bu(),l=p.useCallback(v=>{v.length&&n(v[0])},[n]),u=p.useCallback(v=>{v.stopPropagation(),n(void 0)},[n]),{getRootProps:f,getInputProps:d,isDragAccept:g}=Lu({maxFiles:1,accept:"image/*",onDrop:l,disabled:r});return w.createElement(pt,{input:!0},w.createElement(xt,null,t),w.createElement(gb,null,w.createElement(vb,{ref:o,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:c,style:{backgroundImage:e?`url(${e})`:"none"}}),s&&!!e&&w.createElement(bs,null,w.createElement(lu,{onPointerUp:c,style:{cursor:"pointer"}}),w.createElement(yb,{ref:i,style:{backgroundImage:`url(${e})`}})),w.createElement(mb,f({isDragAccept:g}),w.createElement("input",d()),w.createElement(bb,null,g?"drop image":"click or drop")),w.createElement(wb,{onClick:u,disabled:!e})))}var xb=ee({component:Eb},pb);const mc=tt().number(),_b=(t,e)=>tt().array().length(2).every.number().test(t)&&tt().schema({min:mc,max:mc}).test(e),go=t=>({min:t[0],max:t[1]}),zu=(t,{bounds:[e,n]},r)=>{const o=Array.isArray(t)?go(t):t,i={min:r[0],max:r[1]},{min:s,max:a}=ee(ee({},i),o);return[fn(Number(s),e,Math.max(e,a)),fn(Number(a),Math.min(n,s),n)]},Tb=({value:t,min:e,max:n})=>{const r={min:e,max:n},o=mu(go(t),{min:r,max:r}),i=[e,n],s=ee(ee({},o),{},{bounds:i});return{value:zu(go(t),s,t),settings:s}};var Sb=Object.freeze({__proto__:null,schema:_b,format:go,sanitize:zu,normalize:Tb});const Rb=["value","bounds","onDrag"],Cb=["bounds"],$b=Q("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function Ab(t){let{value:e,bounds:[n,r],onDrag:o}=t,i=ve(t,Rb);const s=p.useRef(null),a=p.useRef(null),c=p.useRef(null),l=p.useRef(0),u=Kt("sizes","scrubberWidth"),f=Ir(({event:v,first:y,xy:[b],movement:[x],memo:_={}})=>{if(y){const{width:S,left:P}=s.current.getBoundingClientRect();l.current=S-parseFloat(u);const R=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===c.current;_.pos=lo((b-P)/S,n,r);const k=Math.abs(_.pos-e.min)-Math.abs(_.pos-e.max);_.key=k<0||k===0&&_.pos<=e.min?"min":"max",R&&(_.pos=e[_.key])}const C=_.pos+lo(x/l.current,0,r-n);return o({[_.key]:x0(C,i[_.key])}),_}),d=`calc(${co(e.min,n,r)} * (100% - ${u} - 8px) + 4px)`,g=`calc(${1-co(e.max,n,r)} * (100% - ${u} - 8px) + 4px)`;return w.createElement(hu,Ie({ref:s},f()),w.createElement(du,null,w.createElement(pu,{style:{left:d,right:g}})),w.createElement(Ii,{position:"left",ref:a,style:{left:d}}),w.createElement(Ii,{position:"right",ref:c,style:{right:g}}))}function Ob(){const{label:t,displayValue:e,onUpdate:n,settings:r}=qe(),o=ve(r,Cb);return w.createElement(w.Fragment,null,w.createElement(pt,{input:!0},w.createElement(xt,null,t),w.createElement($b,null,w.createElement(Ab,Ie({value:e},r,{onDrag:n})),w.createElement(Es,{value:e,settings:o,onUpdate:n,innerLabelTrim:0}))))}var kb=ee({component:Ob},Sb);const Ib=()=>{const t=new Map;return{on:(e,n)=>{let r=t.get(e);r===void 0&&(r=new Set,t.set(e,r)),r.add(n)},off:(e,n)=>{const r=t.get(e);r!==void 0&&(r.delete(n),r.size===0&&t.delete(e))},emit:(e,...n)=>{const r=t.get(e);if(r!==void 0)for(const o of r)o(...n)}}},Pb=["type","value"],Mb=["onChange","transient","onEditStart","onEditEnd"],Db=function(){const e=xy(_y(()=>({data:{}}))),n=Ib();this.storeId=Pm(),this.useStore=e;const r={},o=new Set;this.getVisiblePaths=()=>{const s=this.getData(),a=Object.keys(s),c=[];Object.entries(r).forEach(([u,f])=>{f.render&&a.some(d=>d.indexOf(u)===0)&&!f.render(this.get)&&c.push(u+".")});const l=[];return o.forEach(u=>{u in s&&s[u].__refCount>0&&c.every(f=>u.indexOf(f)===-1)&&(!s[u].render||s[u].render(this.get))&&l.push(u)}),l},this.setOrderedPaths=s=>{s.forEach(a=>o.add(a))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{e.setState(a=>{const c=a.data;return s.forEach(l=>{if(l in c){const u=c[l];u.__refCount--,u.__refCount===0&&u.type in wt&&delete c[l]}}),{data:c}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=s=>r[s]||{},this.getData=()=>e.getState().data,this.addData=(s,a)=>{e.setState(c=>{const l=c.data;return Object.entries(s).forEach(([u,f])=>{let d=l[u];if(d){const{type:g,value:v}=f,y=ve(f,Pb);g!==d.type?Ht(Oe.INPUT_TYPE_OVERRIDE,g):((d.__refCount===0||a)&&Object.assign(d,y),d.__refCount++)}else l[u]=ee(ee({},f),{},{__refCount:1})}),{data:l}})},this.setValueAtPath=(s,a,c)=>{e.setState(l=>{const u=l.data;return ka(u[s],a,s,this,c),{data:u}})},this.setSettingsAtPath=(s,a)=>{e.setState(c=>{const l=c.data;return l[s].settings=ee(ee({},l[s].settings),a),{data:l}})},this.disableInputAtPath=(s,a)=>{e.setState(c=>{const l=c.data;return l[s].disabled=a,{data:l}})},this.set=(s,a)=>{e.setState(c=>{const l=c.data;return Object.entries(s).forEach(([u,f])=>{try{ka(l[u],f,void 0,void 0,a)}catch{}}),{data:l}})},this.getInput=s=>{try{return this.getData()[s]}catch{Ht(Oe.PATH_DOESNT_EXIST,s)}},this.get=s=>{var a;return(a=this.getInput(s))===null||a===void 0?void 0:a.value},this.emitOnEditStart=s=>{n.emit(`onEditStart:${s}`,this.get(s),s,ee(ee({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{n.emit(`onEditEnd:${s}`,this.get(s),s,ee(ee({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,a)=>{const c=`onEditStart:${s}`;return n.on(c,a),()=>n.off(c,a)},this.subscribeToEditEnd=(s,a)=>{const c=`onEditEnd:${s}`;return n.on(c,a),()=>n.off(c,a)};const i=(s,a,c)=>{const l={};return Object.entries(s).forEach(([u,f])=>{if(u==="")return Ht(Oe.EMPTY_KEY);let d=$s(a,u);if(f.type===wt.FOLDER){const g=i(f.schema,d,c);Object.assign(l,g),d in r||(r[d]=f.settings)}else if(u in c)Ht(Oe.DUPLICATE_KEYS,u,d,c[u].path);else{const g=Um(f,u,d,l);if(g){const{type:v,options:y,input:b}=g,{onChange:x,transient:_,onEditStart:C,onEditEnd:S}=y,P=ve(y,Mb);l[d]=ee(ee(ee({type:v},P),b),{},{fromPanel:!0}),c[u]={path:d,onChange:x,transient:_,onEditStart:C,onEditEnd:S}}else Ht(Oe.UNKNOWN_INPUT,d,f)}}),l};this.getDataFromSchema=s=>{const a={};return[i(s,"",a),a]}},Wu=new Db,Lb={collapsed:!1};function Nb(t,e){return{type:wt.FOLDER,schema:t,settings:ee(ee({},Lb),e)}}const vc=t=>"__levaInput"in t,Fb=(t,e)=>{const n={},r=e?e.toLowerCase():null;return t.forEach(o=>{const[i,s]=Fy(o);(!r||i.toLowerCase().indexOf(r)>-1)&&Ny(n,s,{[i]:{__levaInput:!0,path:o}})}),n},Bb=["type","label","path","valueKey","value","settings","setValue","disabled"];function jb(t){let{type:e,label:n,path:r,valueKey:o,value:i,settings:s,setValue:a,disabled:c}=t,l=ve(t,Bb);const{displayValue:u,onChange:f,onUpdate:d}=uu({type:e,value:i,settings:s,setValue:a}),g=Sn[e].component;return g?w.createElement(eu.Provider,{value:ee({key:o,path:r,id:""+r,label:n,displayValue:u,value:i,onChange:f,onUpdate:d,settings:s,setValue:a,disabled:c},l)},w.createElement(s0,{disabled:c},w.createElement(g,null))):(Ht(Oe.NO_COMPONENT_FOR_TYPE,e,r),null)}const Ub=Q("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Hb({onClick:t,settings:e,label:n}){const r=kr();return w.createElement(pt,null,w.createElement(Ub,{disabled:e.disabled,onClick:()=>t(r.get)},n))}const zb=Q("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Wb=Q("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Vb=({label:t,opts:e})=>{let n=typeof t=="string"&&t.trim()===""?null:t,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(n=e.label),r=e.opts),{label:n,opts:r}};function Gb(t){const{label:e,opts:n}=Vb(t),r=kr();return w.createElement(pt,{input:!!e},e&&w.createElement(xt,null,e),w.createElement(zb,null,Object.entries(n).map(([o,i])=>w.createElement(Wb,{key:o,onClick:()=>i(r.get)},o))))}const Kb=Q("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),Vu=100;function qb(t,e){t.push(e),t.length>Vu&&t.shift()}const Yb=p.forwardRef(function({initialValue:t},e){const n=Kt("colors","highlight3"),r=Kt("colors","elevation2"),o=Kt("colors","highlight1"),[i,s]=p.useMemo(()=>[Ze(o).alpha(.4).toRgbString(),Ze(o).alpha(.1).toRgbString()],[o]),a=p.useRef([t]),c=p.useRef(t),l=p.useRef(t),u=p.useRef(),f=p.useCallback((v,y)=>{if(!v)return;const{width:b,height:x}=v,_=new Path2D,C=b/Vu,S=x*.05;for(let k=0;k<a.current.length;k++){const T=co(a.current[k],c.current,l.current),I=C*k,D=x-T*(x-S*2)-S;_.lineTo(I,D)}y.clearRect(0,0,b,x);const P=new Path2D(_);P.lineTo(C*(a.current.length+1),x),P.lineTo(0,x),P.lineTo(0,0);const R=y.createLinearGradient(0,0,0,x);R.addColorStop(0,i),R.addColorStop(1,s),y.fillStyle=R,y.fill(P),y.strokeStyle=r,y.lineJoin="round",y.lineWidth=14,y.stroke(_),y.strokeStyle=n,y.lineWidth=2,y.stroke(_)},[n,r,i,s]),[d,g]=g0(f);return p.useImperativeHandle(e,()=>({frame:v=>{(c.current===void 0||v<c.current)&&(c.current=v),(l.current===void 0||v>l.current)&&(l.current=v),qb(a.current,v),u.current=requestAnimationFrame(()=>f(d.current,g.current))}}),[d,g,f]),p.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),w.createElement(Kb,{ref:d})}),yc=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),Xb=p.forwardRef(function({initialValue:t},e){const[n,r]=p.useState(yc(t));return p.useImperativeHandle(e,()=>({frame:o=>r(yc(o))}),[]),w.createElement("div",null,n)});function bc(t){return typeof t=="function"?t():t.current}function Zb({label:t,objectOrFn:e,settings:n}){const r=p.useRef(),o=p.useRef(bc(e));return p.useEffect(()=>{const i=window.setInterval(()=>{var s;document.hidden||(s=r.current)===null||s===void 0||s.frame(bc(e))},n.interval);return()=>window.clearInterval(i)},[e,n.interval]),w.createElement(pt,{input:!0},w.createElement(xt,{align:"top"},t),n.graph?w.createElement(Yb,{ref:r,initialValue:o.current}):w.createElement(Xb,{ref:r,initialValue:o.current}))}const Jb=["type","label","key"],Qb={[wt.BUTTON]:Hb,[wt.BUTTON_GROUP]:Gb,[wt.MONITOR]:Zb},e1=w.memo(({path:t})=>{const[e,{set:n,setSettings:r,disable:o,storeId:i,emitOnEditStart:s,emitOnEditEnd:a}]=v0(t);if(!e)return null;const{type:c,label:l,key:u}=e,f=ve(e,Jb);if(c in wt){const d=Qb[c];return w.createElement(d,Ie({label:l,path:t},f))}return c in Sn?w.createElement(jb,Ie({key:i+t,type:c,label:l,storeId:i,path:t,valueKey:u,setValue:n,setSettings:r,disable:o,emitOnEditStart:s,emitOnEditEnd:a},f)):(Sm(Oe.UNSUPPORTED_INPUT,c,t),null)});function t1({toggle:t,toggled:e,name:n}){return w.createElement(r0,{onClick:()=>t()},w.createElement(ws,{toggled:e}),w.createElement("div",null,n))}const n1=({name:t,path:e,tree:n})=>{const r=kr(),o=$s(e,t),{collapsed:i,color:s}=r.getFolderSettings(o),[a,c]=p.useState(!i),l=p.useRef(null),u=Kt("colors","folderWidgetColor"),f=Kt("colors","folderTextColor");return p.useLayoutEffect(()=>{l.current.style.setProperty("--leva-colors-folderWidgetColor",s||u),l.current.style.setProperty("--leva-colors-folderTextColor",s||f)},[s,u,f]),w.createElement(uo,{ref:l},w.createElement(t1,{name:t,toggled:a,toggle:()=>c(d=>!d)}),w.createElement(Gu,{parent:o,tree:n,toggled:a}))},Gu=w.memo(({isRoot:t=!1,fill:e=!1,flat:n=!1,parent:r,tree:o,toggled:i})=>{const{wrapperRef:s,contentRef:a}=Uy(i),c=kr(),l=([f,d])=>{var g;return(vc(d)?(g=c.getInput(d.path))===null||g===void 0?void 0:g.order:c.getFolderSettings($s(r,f)).order)||0},u=Object.entries(o).sort((f,d)=>l(f)-l(d));return w.createElement(Oi,{ref:s,isRoot:t,fill:e,flat:n},w.createElement(su,{ref:a,isRoot:t,toggled:i},u.map(([f,d])=>vc(d)?w.createElement(e1,{key:d.path,valueKey:d.valueKey,path:d.path}):w.createElement(n1,{key:f,name:f,path:r,tree:d}))))}),r1=Q("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${cu}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),Ku=40,mo=Q("i",{$flexCenter:"",width:Ku,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),o1=Q("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),i1=Q("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${mo}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),s1=Q("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),a1=Q("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:Ku}}}}),c1=w.forwardRef(({setFilter:t,toggle:e},n)=>{const[r,o]=p.useState(""),i=p.useMemo(()=>ql(t,250),[t]),s=()=>{t(""),o("")},a=c=>{const l=c.currentTarget.value;e(!0),o(l)};return p.useEffect(()=>{i(r)},[r,i]),w.createElement(w.Fragment,null,w.createElement(s1,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:c=>c.stopPropagation(),onChange:a}),w.createElement(mo,{onClick:()=>s(),style:{visibility:r?"visible":"hidden"}},w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},w.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function l1({setFilter:t,onDrag:e,onDragStart:n,onDragEnd:r,toggle:o,toggled:i,title:s,drag:a,filterEnabled:c,from:l}){const[u,f]=p.useState(!1),d=p.useRef(null);p.useEffect(()=>{var v,y;u?(v=d.current)===null||v===void 0||v.focus():(y=d.current)===null||y===void 0||y.blur()},[u]);const g=Ir(({offset:[v,y],first:b,last:x})=>{e({x:v,y}),b&&n({x:v,y}),x&&r({x:v,y})},{filterTaps:!0,from:({offset:[v,y]})=>[(l==null?void 0:l.x)||v,(l==null?void 0:l.y)||y]});return p.useEffect(()=>{const v=y=>{y.key==="L"&&y.shiftKey&&y.metaKey&&f(b=>!b)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),w.createElement(w.Fragment,null,w.createElement(o1,{mode:a?"drag":void 0},w.createElement(mo,{active:!i,onClick:()=>o()},w.createElement(ws,{toggled:i,width:12,height:8})),w.createElement(a1,Ie({},a?g():{},{drag:a,filterEnabled:c}),s===void 0&&a?w.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},w.createElement("circle",{cx:"2",cy:"2",r:"2"}),w.createElement("circle",{cx:"14",cy:"2",r:"2"}),w.createElement("circle",{cx:"26",cy:"2",r:"2"}),w.createElement("circle",{cx:"2",cy:"12",r:"2"}),w.createElement("circle",{cx:"14",cy:"12",r:"2"}),w.createElement("circle",{cx:"26",cy:"12",r:"2"})):s),c&&w.createElement(mo,{active:u,onClick:()=>f(v=>!v)},w.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},w.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),w.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),w.createElement(i1,{toggled:u},w.createElement(c1,{ref:d,setFilter:t,toggle:o})))}const u1=["store","hidden","theme","collapsed"];function f1(t){let{store:e,hidden:n=!1,theme:r,collapsed:o=!1}=t,i=ve(t,u1);const s=Fu(()=>Zm(r),[r]),[a,c]=p.useState(!o),l=typeof o=="object"?!o.collapsed:a,u=p.useMemo(()=>typeof o=="object"?f=>{typeof f=="function"?o.onChange(!f(!o.collapsed)):o.onChange(!f)}:c,[o]);return!e||n?null:w.createElement(vs.Provider,{value:s},w.createElement(d1,Ie({store:e},i,{toggled:l,setToggle:u,rootClass:s.className})))}const d1=w.memo(({store:t,rootClass:e,fill:n=!1,flat:r=!1,neverHide:o=!1,oneLineLabels:i=!1,titleBar:s={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:c,setToggle:l})=>{var u,f;const d=Hy(t),[g,v]=p.useState(""),y=p.useMemo(()=>Fb(d,g),[d,g]),[b,x]=fu(),_=o||d.length>0,C=typeof s=="object"&&s.title||void 0,S=typeof s=="object"&&(u=s.drag)!==null&&u!==void 0?u:!0,P=typeof s=="object"&&(f=s.filter)!==null&&f!==void 0?f:!0,R=typeof s=="object"&&s.position||void 0,k=typeof s=="object"&&s.onDrag||void 0,T=typeof s=="object"&&s.onDragStart||void 0,I=typeof s=="object"&&s.onDragEnd||void 0;return w.useEffect(()=>{x({x:R==null?void 0:R.x,y:R==null?void 0:R.y})},[R,x]),Xm(),w.createElement(nu.Provider,{value:{hideCopyButton:a}},w.createElement(r1,{ref:b,className:e,fill:n,flat:r,oneLineLabels:i,hideTitleBar:!s,style:{display:_?"block":"none"}},s&&w.createElement(l1,{onDrag:D=>{x(D),k==null||k(D)},onDragStart:D=>T==null?void 0:T(D),onDragEnd:D=>I==null?void 0:I(D),setFilter:v,toggle:D=>l(L=>D??!L),toggled:c,title:C,drag:S,filterEnabled:P,from:R}),_&&w.createElement(tu.Provider,{value:t},w.createElement(Gu,{isRoot:!0,fill:n,flat:r,tree:y,toggled:c}))))}),h1=["isRoot"];let vo=!1,yn=null;function p1(t){let{isRoot:e=!1}=t,n=ve(t,h1);return p.useEffect(()=>(vo=!0,!e&&yn&&(yn.remove(),yn=null),()=>{e||(vo=!1)}),[e]),w.createElement(f1,Ie({store:Wu},n))}function g1(t){p.useEffect(()=>{t&&!vo&&(yn||(yn=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(yn),zf.createRoot(yn).render(w.createElement(p1,{isRoot:!0})))),vo=!0)},[t])}function m1(t,e,n,r,o){let i,s,a,c,l;return typeof t=="string"?(s=t,i=e,Array.isArray(n)&&(l=n)):(i=t,Array.isArray(e)?l=e:(c=e,l=n)),{schema:i,folderName:s,folderSettings:a,hookSettings:c,deps:l||[]}}function qu(t,e,n,r,o){const{folderName:i,schema:s,folderSettings:a,hookSettings:c,deps:l}=m1(t,e,n),u=typeof s=="function",f=p.useRef(!1),d=p.useRef(!0),g=Fu(()=>{f.current=!0;const L=typeof s=="function"?s():s;return i?{[i]:Nb(L,a)}:L},l),v=!(c!=null&&c.store);g1(v);const[y]=p.useState(()=>(c==null?void 0:c.store)||Wu),[b,x]=p.useMemo(()=>y.getDataFromSchema(g),[y,g]),[_,C,S,P,R]=p.useMemo(()=>{const L=[],F=[],W={},z={},X={};return Object.values(x).forEach(({path:Y,onChange:de,onEditStart:le,onEditEnd:ye,transient:re})=>{L.push(Y),de?(W[Y]=de,re||F.push(Y)):F.push(Y),le&&(z[Y]=le),ye&&(X[Y]=ye)}),[L,F,W,z,X]},[x]),k=p.useMemo(()=>y.orderPaths(_),[_,y]),T=zy(y,C,b),I=p.useCallback(L=>{const F=Object.entries(L).reduce((W,[z,X])=>Object.assign(W,{[x[z].path]:X}),{});y.set(F,!1)},[y,x]),D=p.useCallback(L=>y.get(x[L].path),[y,x]);return p.useEffect(()=>{const L=!d.current&&f.current;return y.addData(b,L),d.current=!1,f.current=!1,()=>y.disposePaths(k)},[y,k,b]),p.useEffect(()=>{const L=[];return Object.entries(S).forEach(([F,W])=>{W(y.get(F),F,ee({initial:!0,get:y.get},y.getInput(F)));const z=y.useStore.subscribe(X=>{const Y=X.data[F];return[Y.disabled?void 0:Y.value,Y]},([X,Y])=>W(X,F,ee({initial:!1,get:y.get},Y)),{equalityFn:_o});L.push(z)}),()=>L.forEach(F=>F())},[y,S]),p.useEffect(()=>{const L=[];return Object.entries(P).forEach(([F,W])=>L.push(y.subscribeToEditStart(F,W))),Object.entries(R).forEach(([F,W])=>L.push(y.subscribeToEditEnd(F,W))),()=>L.forEach(F=>F())},[P,R,y]),u?[T,I,D]:T}Xt(Et.SELECT,M0);Xt(Et.IMAGE,xb);Xt(Et.NUMBER,T0);Xt(Et.COLOR,eb);Xt(Et.STRING,z0);Xt(Et.BOOLEAN,X0);Xt(Et.INTERVAL,kb);Xt(Et.VECTOR3D,nb);Xt(Et.VECTOR2D,ub);const v1=new ge(0,1,0),wc=new sn,Ec=new sn,y1=(t,e,n)=>{const{world:r}=Xc(),o=p.useRef(null);return p.useEffect(()=>{const{current:i}=t,{current:s}=e;if(!i||!s)return;const a=r.createVehicleController(i),c=new ge(0,-1,0);return n.forEach(l=>{a.addWheel(l.position,c,l.axleCs,l.suspensionRestLength,l.radius)}),n.forEach((l,u)=>{a.setWheelSuspensionStiffness(u,l.suspensionStiffness),a.setWheelMaxSuspensionTravel(u,l.maxSuspensionTravel)}),o.current=a,()=>{o.current=null,r.removeVehicleController(a)}},[]),_d(i=>{if(!o.current)return;const s=o.current;s.updateVehicle(i.timestep);const{current:a}=e;a==null||a.forEach((c,l)=>{var y;const u=s.wheelAxleCs(l),f=((y=s.wheelChassisConnectionPointCs(l))==null?void 0:y.y)||0,d=s.wheelSuspensionLength(l)||0,g=s.wheelSteering(l)||0,v=s.wheelRotation(l)||0;c.position.y=f-d,wc.setFromAxisAngle(v1,g),Ec.setFromAxisAngle(u,v),c.quaternion.multiplyQuaternions(wc,Ec)})}),{vehicleController:o}};function xc(t,e){if(e===Wf)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===pi||e===jc){let n=t.getIndex();if(n===null){const s=[],a=t.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)s.push(c);t.setIndex(s),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,o=[];if(e===pi)for(let s=1;s<=r;s++)o.push(n.getX(0)),o.push(n.getX(s)),o.push(n.getX(s+1));else for(let s=0;s<r;s++)s%2===0?(o.push(n.getX(s)),o.push(n.getX(s+1)),o.push(n.getX(s+2))):(o.push(n.getX(s+2)),o.push(n.getX(s+1)),o.push(n.getX(s)));o.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=t.clone();return i.setIndex(o),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class b1 extends Bc{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new T1(n)}),this.register(function(n){return new S1(n)}),this.register(function(n){return new M1(n)}),this.register(function(n){return new D1(n)}),this.register(function(n){return new L1(n)}),this.register(function(n){return new C1(n)}),this.register(function(n){return new $1(n)}),this.register(function(n){return new A1(n)}),this.register(function(n){return new O1(n)}),this.register(function(n){return new _1(n)}),this.register(function(n){return new k1(n)}),this.register(function(n){return new R1(n)}),this.register(function(n){return new P1(n)}),this.register(function(n){return new I1(n)}),this.register(function(n){return new E1(n)}),this.register(function(n){return new N1(n)}),this.register(function(n){return new F1(n)})}load(e,n,r,o){const i=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const l=hr.extractUrlBase(e);s=hr.resolveURL(l,this.path)}else s=hr.extractUrlBase(e);this.manager.itemStart(e);const a=function(l){o?o(l):console.error(l),i.manager.itemError(e),i.manager.itemEnd(e)},c=new Mn(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{i.parse(l,s,function(u){n(u),i.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,o){let i;const s={},a={},c=new TextDecoder;if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===Yu){try{s[se.KHR_BINARY_GLTF]=new B1(e)}catch(f){o&&o(f);return}i=JSON.parse(s[se.KHR_BINARY_GLTF].content)}else i=JSON.parse(c.decode(e));else i=e;if(i.asset===void 0||i.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new J1(i,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,s[f.name]=!0}if(i.extensionsUsed)for(let u=0;u<i.extensionsUsed.length;++u){const f=i.extensionsUsed[u],d=i.extensionsRequired||[];switch(f){case se.KHR_MATERIALS_UNLIT:s[f]=new x1;break;case se.KHR_DRACO_MESH_COMPRESSION:s[f]=new j1(i,this.dracoLoader);break;case se.KHR_TEXTURE_TRANSFORM:s[f]=new U1;break;case se.KHR_MESH_QUANTIZATION:s[f]=new H1;break;default:d.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(r,o)}parseAsync(e,n){const r=this;return new Promise(function(o,i){r.parse(e,n,o,i)})}}function w1(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const se={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class E1{constructor(e){this.parser=e,this.name=se.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,o=n.length;r<o;r++){const i=n[r];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let o=n.cache.get(r);if(o)return o;const i=n.json,c=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let l;const u=new _n(16777215);c.color!==void 0&&u.setRGB(c.color[0],c.color[1],c.color[2],ht);const f=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new Kf(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Gf(u),l.distance=f;break;case"spot":l=new Vf(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),jt(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=n.createUniqueName(c.name||"light_"+e),o=Promise.resolve(l),n.cache.add(r,o),o}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,i=r.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return r._getNodeRef(n.cache,a,c)})}}class x1{constructor(){this.name=se.KHR_MATERIALS_UNLIT}getMaterialType(){return In}extendParams(e,n,r){const o=[];e.color=new _n(1,1,1),e.opacity=1;const i=n.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const s=i.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],ht),e.opacity=s[3]}i.baseColorTexture!==void 0&&o.push(r.assignTexture(e,"map",i.baseColorTexture,Fn))}return Promise.all(o)}}class _1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name].emissiveStrength;return i!==void 0&&(n.emissiveIntensity=i),Promise.resolve()}}class T1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];if(s.clearcoatFactor!==void 0&&(n.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&i.push(r.assignTexture(n,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&i.push(r.assignTexture(n,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(i.push(r.assignTexture(n,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Uc(a,a)}return Promise.all(i)}}class S1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.dispersion=i.dispersion!==void 0?i.dispersion:0,Promise.resolve()}}class R1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];return s.iridescenceFactor!==void 0&&(n.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&i.push(r.assignTexture(n,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(n.iridescenceIOR=s.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&i.push(r.assignTexture(n,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class C1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[];n.sheenColor=new _n(0,0,0),n.sheenRoughness=0,n.sheen=1;const s=o.extensions[this.name];if(s.sheenColorFactor!==void 0){const a=s.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],ht)}return s.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&i.push(r.assignTexture(n,"sheenColorMap",s.sheenColorTexture,Fn)),s.sheenRoughnessTexture!==void 0&&i.push(r.assignTexture(n,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class $1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];return s.transmissionFactor!==void 0&&(n.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&i.push(r.assignTexture(n,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class A1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];n.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&i.push(r.assignTexture(n,"thicknessMap",s.thicknessTexture)),n.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return n.attenuationColor=new _n().setRGB(a[0],a[1],a[2],ht),Promise.all(i)}}class O1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const o=this.parser.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=o.extensions[this.name];return n.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class k1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];n.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&i.push(r.assignTexture(n,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return n.specularColor=new _n().setRGB(a[0],a[1],a[2],ht),s.specularColorTexture!==void 0&&i.push(r.assignTexture(n,"specularColorMap",s.specularColorTexture,Fn)),Promise.all(i)}}class I1{constructor(e){this.parser=e,this.name=se.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];return n.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&i.push(r.assignTexture(n,"bumpMap",s.bumpTexture)),Promise.all(i)}}class P1{constructor(e){this.parser=e,this.name=se.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Dt}extendMaterialParams(e,n){const r=this.parser,o=r.json.materials[e];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const i=[],s=o.extensions[this.name];return s.anisotropyStrength!==void 0&&(n.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(n.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&i.push(r.assignTexture(n,"anisotropyMap",s.anisotropyTexture)),Promise.all(i)}}class M1{constructor(e){this.parser=e,this.name=se.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,o=r.textures[e];if(!o.extensions||!o.extensions[this.name])return null;const i=o.extensions[this.name],s=n.options.ktx2Loader;if(!s){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,i.source,s)}}class D1{constructor(e){this.parser=e,this.name=se.EXT_TEXTURE_WEBP}loadTexture(e){const n=this.name,r=this.parser,o=r.json,i=o.textures[e];if(!i.extensions||!i.extensions[n])return null;const s=i.extensions[n],a=o.images[s.source];let c=r.textureLoader;if(a.uri){const l=r.options.manager.getHandler(a.uri);l!==null&&(c=l)}return r.loadTextureImage(e,s.source,c)}}class L1{constructor(e){this.parser=e,this.name=se.EXT_TEXTURE_AVIF}loadTexture(e){const n=this.name,r=this.parser,o=r.json,i=o.textures[e];if(!i.extensions||!i.extensions[n])return null;const s=i.extensions[n],a=o.images[s.source];let c=r.textureLoader;if(a.uri){const l=r.options.manager.getHandler(a.uri);l!==null&&(c=l)}return r.loadTextureImage(e,s.source,c)}}class N1{constructor(e){this.name=se.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const o=r.extensions[this.name],i=this.parser.getDependency("buffer",o.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(a){const c=o.byteOffset||0,l=o.byteLength||0,u=o.count,f=o.byteStride,d=new Uint8Array(a,c,l);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(u,f,d,o.mode,o.filter).then(function(g){return g.buffer}):s.ready.then(function(){const g=new ArrayBuffer(u*f);return s.decodeGltfBuffer(new Uint8Array(g),u,f,d,o.mode,o.filter),g})})}else return null}}class F1{constructor(e){this.name=se.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const o=n.meshes[r.mesh];for(const l of o.primitives)if(l.mode!==at.TRIANGLES&&l.mode!==at.TRIANGLE_STRIP&&l.mode!==at.TRIANGLE_FAN&&l.mode!==void 0)return null;const s=r.extensions[this.name].attributes,a=[],c={};for(const l in s)a.push(this.parser.getDependency("accessor",s[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),f=u.isGroup?u.children:[u],d=l[0].count,g=[];for(const v of f){const y=new eo,b=new ge,x=new sn,_=new ge(1,1,1),C=new qf(v.geometry,v.material,d);for(let S=0;S<d;S++)c.TRANSLATION&&b.fromBufferAttribute(c.TRANSLATION,S),c.ROTATION&&x.fromBufferAttribute(c.ROTATION,S),c.SCALE&&_.fromBufferAttribute(c.SCALE,S),C.setMatrixAt(S,y.compose(b,x,_));for(const S in c)if(S==="_COLOR_0"){const P=c[S];C.instanceColor=new Yf(P.array,P.itemSize,P.normalized)}else S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&v.geometry.setAttribute(S,c[S]);Hc.prototype.copy.call(C,v),this.parser.assignFinalMaterial(C),g.push(C)}return u.isGroup?(u.clear(),u.add(...g),u):g[0]}))}}const Yu="glTF",cr=12,_c={JSON:1313821514,BIN:5130562};class B1{constructor(e){this.name=se.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,cr),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Yu)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-cr,i=new DataView(e,cr);let s=0;for(;s<o;){const a=i.getUint32(s,!0);s+=4;const c=i.getUint32(s,!0);if(s+=4,c===_c.JSON){const l=new Uint8Array(e,cr+s,a);this.content=r.decode(l)}else if(c===_c.BIN){const l=cr+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class j1{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=se.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,o=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},c={},l={};for(const u in s){const f=zi[u]||u.toLowerCase();a[f]=s[u]}for(const u in e.attributes){const f=zi[u]||u.toLowerCase();if(s[u]!==void 0){const d=r.accessors[e.attributes[u]],g=Nn[d.componentType];l[f]=g.name,c[f]=d.normalized===!0}}return n.getDependency("bufferView",i).then(function(u){return new Promise(function(f,d){o.decodeDracoFile(u,function(g){for(const v in g.attributes){const y=g.attributes[v],b=c[v];b!==void 0&&(y.normalized=b)}f(g)},a,l,ht,d)})})}}class U1{constructor(){this.name=se.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class H1{constructor(){this.name=se.KHR_MESH_QUANTIZATION}}class Xu extends yd{constructor(e,n,r,o){super(e,n,r,o)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,o=this.valueSize,i=e*o*3+o;for(let s=0;s!==o;s++)n[s]=r[i+s];return n}interpolate_(e,n,r,o){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,u=o-n,f=(r-n)/u,d=f*f,g=d*f,v=e*l,y=v-l,b=-2*g+3*d,x=g-d,_=1-b,C=x-d+f;for(let S=0;S!==a;S++){const P=s[y+S+a],R=s[y+S+c]*u,k=s[v+S+a],T=s[v+S]*u;i[S]=_*P+C*R+b*k+x*T}return i}}const z1=new sn;class W1 extends Xu{interpolate_(e,n,r,o){const i=super.interpolate_(e,n,r,o);return z1.fromArray(i).normalize().toArray(i),i}}const at={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Nn={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Tc={9728:Wc,9729:ot,9984:ed,9985:Qf,9986:Jf,9987:zc},Sc={33071:zt,33648:td,10497:Qr},ai={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zi={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},V1={CUBICSPLINE:void 0,LINEAR:Kc,STEP:gd},ci={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function G1(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Vc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:vd})),t.DefaultMaterial}function mn(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function jt(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function K1(t,e,n){let r=!1,o=!1,i=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(o=!0),f.COLOR_0!==void 0&&(i=!0),r&&o&&i)break}if(!r&&!o&&!i)return Promise.resolve(t);const s=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(r){const d=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;s.push(d)}if(o){const d=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(d)}if(i){const d=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;c.push(d)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(l){const u=l[0],f=l[1],d=l[2];return r&&(t.morphAttributes.position=u),o&&(t.morphAttributes.normal=f),i&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function q1(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,o=n.length;r<o;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Y1(t){let e;const n=t.extensions&&t.extensions[se.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+li(n.attributes):e=t.indices+":"+li(t.attributes)+":"+t.mode,t.targets!==void 0)for(let r=0,o=t.targets.length;r<o;r++)e+=":"+li(t.targets[r]);return e}function li(t){let e="";const n=Object.keys(t).sort();for(let r=0,o=n.length;r<o;r++)e+=n[r]+":"+t[n[r]]+";";return e}function Wi(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function X1(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":t.search(/\.ktx2($|\?)/i)>0||t.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const Z1=new eo;class J1{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new w1,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,o=-1,i=!1,s=-1;if(typeof navigator<"u"){const a=navigator.userAgent;r=/^((?!chrome|android).)*safari/i.test(a)===!0;const c=a.match(/Version\/(\d+)/);o=r&&c?parseInt(c[1],10):-1,i=a.indexOf("Firefox")>-1,s=i?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||r&&o<17||i&&s<98?this.textureLoader=new wo(this.options.manager):this.textureLoader=new Xf(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,o=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(s){const a={scene:s[0][o.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:o.asset,parser:r,userData:{}};return mn(i,a,o),jt(a,o),Promise.all(r._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let o=0,i=n.length;o<i;o++){const s=n[o].joints;for(let a=0,c=s.length;a<c;a++)e[s[a]].isBone=!0}for(let o=0,i=e.length;o<i;o++){const s=e[o];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(r[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const o=r.clone(),i=(s,a)=>{const c=this.associations.get(s);c!=null&&this.associations.set(a,c);for(const[l,u]of s.children.entries())i(u,a.children[l])};return i(r,o),o.name+="_instance_"+e.uses[n]++,o}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const o=e(n[r]);if(o)return o}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let o=0;o<n.length;o++){const i=e(n[o]);i&&r.push(i)}return r}getDependency(e,n){const r=e+":"+n;let o=this.cache.get(r);if(!o){switch(e){case"scene":o=this.loadScene(n);break;case"node":o=this._invokeOne(function(i){return i.loadNode&&i.loadNode(n)});break;case"mesh":o=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(n)});break;case"accessor":o=this.loadAccessor(n);break;case"bufferView":o=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(n)});break;case"buffer":o=this.loadBuffer(n);break;case"material":o=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(n)});break;case"texture":o=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(n)});break;case"skin":o=this.loadSkin(n);break;case"animation":o=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(n)});break;case"camera":o=this.loadCamera(n);break;default:if(o=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,n)}),!o)throw new Error("Unknown type: "+e);break}this.cache.add(r,o)}return o}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,o=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(o.map(function(i,s){return r.getDependency(e,s)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[se.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(i,s){r.load(hr.resolveURL(n.uri,o.path),i,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const o=n.byteLength||0,i=n.byteOffset||0;return r.slice(i,i+o)})}loadAccessor(e){const n=this,r=this.json,o=this.json.accessors[e];if(o.bufferView===void 0&&o.sparse===void 0){const s=ai[o.type],a=Nn[o.componentType],c=o.normalized===!0,l=new a(o.count*s);return Promise.resolve(new Io(l,s,c))}const i=[];return o.bufferView!==void 0?i.push(this.getDependency("bufferView",o.bufferView)):i.push(null),o.sparse!==void 0&&(i.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(i).then(function(s){const a=s[0],c=ai[o.type],l=Nn[o.componentType],u=l.BYTES_PER_ELEMENT,f=u*c,d=o.byteOffset||0,g=o.bufferView!==void 0?r.bufferViews[o.bufferView].byteStride:void 0,v=o.normalized===!0;let y,b;if(g&&g!==f){const x=Math.floor(d/g),_="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+x+":"+o.count;let C=n.cache.get(_);C||(y=new l(a,x*g,o.count*g/u),C=new Zf(y,g/u),n.cache.add(_,C)),b=new md(C,c,d%g/u,v)}else a===null?y=new l(o.count*c):y=new l(a,d,o.count*c),b=new Io(y,c,v);if(o.sparse!==void 0){const x=ai.SCALAR,_=Nn[o.sparse.indices.componentType],C=o.sparse.indices.byteOffset||0,S=o.sparse.values.byteOffset||0,P=new _(s[1],C,o.sparse.count*x),R=new l(s[2],S,o.sparse.count*c);a!==null&&(b=new Io(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let k=0,T=P.length;k<T;k++){const I=P[k];if(b.setX(I,R[k*c]),c>=2&&b.setY(I,R[k*c+1]),c>=3&&b.setZ(I,R[k*c+2]),c>=4&&b.setW(I,R[k*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}b.normalized=v}return b})}loadTexture(e){const n=this.json,r=this.options,i=n.textures[e].source,s=n.images[i];let a=this.textureLoader;if(s.uri){const c=r.manager.getHandler(s.uri);c!==null&&(a=c)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,n,r){const o=this,i=this.json,s=i.textures[e],a=i.images[n],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(n,r).then(function(u){u.flipY=!1,u.name=s.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const d=(i.samplers||{})[s.sampler]||{};return u.magFilter=Tc[d.magFilter]||ot,u.minFilter=Tc[d.minFilter]||zc,u.wrapS=Sc[d.wrapS]||Qr,u.wrapT=Sc[d.wrapT]||Qr,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==Wc&&u.minFilter!==ot,o.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,n){const r=this,o=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const s=o.images[e],a=self.URL||self.webkitURL;let c=s.uri||"",l=!1;if(s.bufferView!==void 0)c=r.getDependency("bufferView",s.bufferView).then(function(f){l=!0;const d=new Blob([f],{type:s.mimeType});return c=a.createObjectURL(d),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(d,g){let v=d;n.isImageBitmapLoader===!0&&(v=function(y){const b=new Ot(y);b.needsUpdate=!0,d(b)}),n.load(hr.resolveURL(f,i.path),v,void 0,g)})}).then(function(f){return l===!0&&a.revokeObjectURL(c),jt(f,s),f.userData.mimeType=s.mimeType||X1(s.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,n,r,o){const i=this;return this.getDependency("texture",r.index).then(function(s){if(!s)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(s=s.clone(),s.channel=r.texCoord),i.extensions[se.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[se.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=i.associations.get(s);s=i.extensions[se.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),i.associations.set(s,c)}}return o!==void 0&&(s.colorSpace=o),e[n]=s,s})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const o=n.attributes.tangent===void 0,i=n.attributes.color!==void 0,s=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let c=this.cache.get(a);c||(c=new nd,Po.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,c.sizeAttenuation=!1,this.cache.add(a,c)),r=c}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let c=this.cache.get(a);c||(c=new rd,Po.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,this.cache.add(a,c)),r=c}if(o||i||s){let a="ClonedMaterial:"+r.uuid+":";o&&(a+="derivative-tangents:"),i&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=r.clone(),i&&(c.vertexColors=!0),s&&(c.flatShading=!0),o&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(r))),r=c}e.material=r}getMaterialType(){return Vc}loadMaterial(e){const n=this,r=this.json,o=this.extensions,i=r.materials[e];let s;const a={},c=i.extensions||{},l=[];if(c[se.KHR_MATERIALS_UNLIT]){const f=o[se.KHR_MATERIALS_UNLIT];s=f.getMaterialType(),l.push(f.extendParams(a,i,n))}else{const f=i.pbrMetallicRoughness||{};if(a.color=new _n(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],ht),a.opacity=d[3]}f.baseColorTexture!==void 0&&l.push(n.assignTexture(a,"map",f.baseColorTexture,Fn)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(l.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),l.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),s=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}i.doubleSided===!0&&(a.side=Pc);const u=i.alphaMode||ci.OPAQUE;if(u===ci.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===ci.MASK&&(a.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&s!==In&&(l.push(n.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new Uc(1,1),i.normalTexture.scale!==void 0)){const f=i.normalTexture.scale;a.normalScale.set(f,f)}if(i.occlusionTexture!==void 0&&s!==In&&(l.push(n.assignTexture(a,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&s!==In){const f=i.emissiveFactor;a.emissive=new _n().setRGB(f[0],f[1],f[2],ht)}return i.emissiveTexture!==void 0&&s!==In&&l.push(n.assignTexture(a,"emissiveMap",i.emissiveTexture,Fn)),Promise.all(l).then(function(){const f=new s(a);return i.name&&(f.name=i.name),jt(f,i),n.associations.set(f,{materials:e}),i.extensions&&mn(o,f,i),f})}createUniqueName(e){const n=od.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,o=this.primitiveCache;function i(a){return r[se.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(c){return Rc(c,a,n)})}const s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=Y1(l),f=o[u];if(f)s.push(f.promise);else{let d;l.extensions&&l.extensions[se.KHR_DRACO_MESH_COMPRESSION]?d=i(l):d=Rc(new id,l,n),o[u]={primitive:l,promise:d},s.push(d)}}return Promise.all(s)}loadMesh(e){const n=this,r=this.json,o=this.extensions,i=r.meshes[e],s=i.primitives,a=[];for(let c=0,l=s.length;c<l;c++){const u=s[c].material===void 0?G1(this.cache):this.getDependency("material",s[c].material);a.push(u)}return a.push(n.loadGeometries(s)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let g=0,v=u.length;g<v;g++){const y=u[g],b=s[g];let x;const _=l[g];if(b.mode===at.TRIANGLES||b.mode===at.TRIANGLE_STRIP||b.mode===at.TRIANGLE_FAN||b.mode===void 0)x=i.isSkinnedMesh===!0?new sd(y,_):new bo(y,_),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),b.mode===at.TRIANGLE_STRIP?x.geometry=xc(x.geometry,jc):b.mode===at.TRIANGLE_FAN&&(x.geometry=xc(x.geometry,pi));else if(b.mode===at.LINES)x=new ad(y,_);else if(b.mode===at.LINE_STRIP)x=new cd(y,_);else if(b.mode===at.LINE_LOOP)x=new ld(y,_);else if(b.mode===at.POINTS)x=new ud(y,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(x.geometry.morphAttributes).length>0&&q1(x,i),x.name=n.createUniqueName(i.name||"mesh_"+e),jt(x,i),b.extensions&&mn(o,x,b),n.assignFinalMaterial(x),f.push(x)}for(let g=0,v=f.length;g<v;g++)n.associations.set(f[g],{meshes:e,primitives:g});if(f.length===1)return i.extensions&&mn(o,f[0],i),f[0];const d=new Mo;i.extensions&&mn(o,d,i),n.associations.set(d,{meshes:e});for(let g=0,v=f.length;g<v;g++)d.add(f[g]);return d})}loadCamera(e){let n;const r=this.json.cameras[e],o=r[r.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new fd(Gc.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):r.type==="orthographic"&&(n=new Lc(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),jt(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let o=0,i=n.joints.length;o<i;o++)r.push(this._loadNodeShallow(n.joints[o]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(o){const i=o.pop(),s=o,a=[],c=[];for(let l=0,u=s.length;l<u;l++){const f=s[l];if(f){a.push(f);const d=new eo;i!==null&&d.fromArray(i.array,l*16),c.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[l])}return new dd(a,c)})}loadAnimation(e){const n=this.json,r=this,o=n.animations[e],i=o.name?o.name:"animation_"+e,s=[],a=[],c=[],l=[],u=[];for(let f=0,d=o.channels.length;f<d;f++){const g=o.channels[f],v=o.samplers[g.sampler],y=g.target,b=y.node,x=o.parameters!==void 0?o.parameters[v.input]:v.input,_=o.parameters!==void 0?o.parameters[v.output]:v.output;y.node!==void 0&&(s.push(this.getDependency("node",b)),a.push(this.getDependency("accessor",x)),c.push(this.getDependency("accessor",_)),l.push(v),u.push(y))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(f){const d=f[0],g=f[1],v=f[2],y=f[3],b=f[4],x=[];for(let _=0,C=d.length;_<C;_++){const S=d[_],P=g[_],R=v[_],k=y[_],T=b[_];if(S===void 0)continue;S.updateMatrix&&S.updateMatrix();const I=r._createAnimationTracks(S,P,R,k,T);if(I)for(let D=0;D<I.length;D++)x.push(I[D])}return new hd(i,void 0,x)})}createNodeMesh(e){const n=this.json,r=this,o=n.nodes[e];return o.mesh===void 0?null:r.getDependency("mesh",o.mesh).then(function(i){const s=r._getNodeRef(r.meshCache,o.mesh,i);return o.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let c=0,l=o.weights.length;c<l;c++)a.morphTargetInfluences[c]=o.weights[c]}),s})}loadNode(e){const n=this.json,r=this,o=n.nodes[e],i=r._loadNodeShallow(e),s=[],a=o.children||[];for(let l=0,u=a.length;l<u;l++)s.push(r.getDependency("node",a[l]));const c=o.skin===void 0?Promise.resolve(null):r.getDependency("skin",o.skin);return Promise.all([i,Promise.all(s),c]).then(function(l){const u=l[0],f=l[1],d=l[2];d!==null&&u.traverse(function(g){g.isSkinnedMesh&&g.bind(d,Z1)});for(let g=0,v=f.length;g<v;g++)u.add(f[g]);return u})}_loadNodeShallow(e){const n=this.json,r=this.extensions,o=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const i=n.nodes[e],s=i.name?o.createUniqueName(i.name):"",a=[],c=o._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),i.camera!==void 0&&a.push(o.getDependency("camera",i.camera).then(function(l){return o._getNodeRef(o.cameraCache,i.camera,l)})),o._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(i.isBone===!0?u=new pd:l.length>1?u=new Mo:l.length===1?u=l[0]:u=new Hc,u!==l[0])for(let f=0,d=l.length;f<d;f++)u.add(l[f]);if(i.name&&(u.userData.name=i.name,u.name=s),jt(u,i),i.extensions&&mn(r,u,i),i.matrix!==void 0){const f=new eo;f.fromArray(i.matrix),u.applyMatrix4(f)}else i.translation!==void 0&&u.position.fromArray(i.translation),i.rotation!==void 0&&u.quaternion.fromArray(i.rotation),i.scale!==void 0&&u.scale.fromArray(i.scale);if(!o.associations.has(u))o.associations.set(u,{});else if(i.mesh!==void 0&&o.meshCache.refs[i.mesh]>1){const f=o.associations.get(u);o.associations.set(u,{...f})}return o.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],o=this,i=new Mo;r.name&&(i.name=o.createUniqueName(r.name)),jt(i,r),r.extensions&&mn(n,i,r);const s=r.nodes||[],a=[];for(let c=0,l=s.length;c<l;c++)a.push(o.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let u=0,f=c.length;u<f;u++)i.add(c[u]);const l=u=>{const f=new Map;for(const[d,g]of o.associations)(d instanceof Po||d instanceof Ot)&&f.set(d,g);return u.traverse(d=>{const g=o.associations.get(d);g!=null&&f.set(d,g)}),f};return o.associations=l(i),i})}_createAnimationTracks(e,n,r,o,i){const s=[],a=e.name?e.name:e.uuid,c=[];nn[i.path]===nn.weights?e.traverse(function(d){d.morphTargetInfluences&&c.push(d.name?d.name:d.uuid)}):c.push(a);let l;switch(nn[i.path]){case nn.weights:l=Fs;break;case nn.rotation:l=Bs;break;case nn.translation:case nn.scale:l=Ns;break;default:switch(r.itemSize){case 1:l=Fs;break;case 2:case 3:default:l=Ns;break}break}const u=o.interpolation!==void 0?V1[o.interpolation]:Kc,f=this._getArrayFromAccessor(r);for(let d=0,g=c.length;d<g;d++){const v=new l(c[d]+"."+nn[i.path],n.array,f,u);o.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),s.push(v)}return s}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const r=Wi(n.constructor),o=new Float32Array(n.length);for(let i=0,s=n.length;i<s;i++)o[i]=n[i]*r;n=o}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const o=this instanceof Bs?W1:Xu;return new o(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Q1(t,e,n){const r=e.attributes,o=new bd;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(o.set(new ge(c[0],c[1],c[2]),new ge(l[0],l[1],l[2])),a.normalized){const u=Wi(Nn[a.componentType]);o.min.multiplyScalar(u),o.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const a=new ge,c=new ge;for(let l=0,u=i.length;l<u;l++){const f=i[l];if(f.POSITION!==void 0){const d=n.json.accessors[f.POSITION],g=d.min,v=d.max;if(g!==void 0&&v!==void 0){if(c.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),c.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),c.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),d.normalized){const y=Wi(Nn[d.componentType]);c.multiplyScalar(y)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(a)}t.boundingBox=o;const s=new wd;o.getCenter(s.center),s.radius=o.min.distanceTo(o.max)/2,t.boundingSphere=s}function Rc(t,e,n){const r=e.attributes,o=[];function i(s,a){return n.getDependency("accessor",s).then(function(c){t.setAttribute(a,c)})}for(const s in r){const a=zi[s]||s.toLowerCase();a in t.attributes||o.push(i(r[s],a))}if(e.indices!==void 0&&!t.index){const s=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});o.push(s)}return js.workingColorSpace!==ht&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${js.workingColorSpace}" not supported.`),jt(t,e),Q1(t,e,n),Promise.all(o).then(function(){return e.targets!==void 0?K1(t,e.targets,n):t})}const Mt=Object.create(null);Mt.open="0";Mt.close="1";Mt.ping="2";Mt.pong="3";Mt.message="4";Mt.upgrade="5";Mt.noop="6";const qr=Object.create(null);Object.keys(Mt).forEach(t=>{qr[Mt[t]]=t});const Vi={type:"error",data:"parser error"},Zu=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ju=typeof ArrayBuffer=="function",Qu=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,As=({type:t,data:e},n,r)=>Zu&&e instanceof Blob?n?r(e):Cc(e,r):Ju&&(e instanceof ArrayBuffer||Qu(e))?n?r(e):Cc(new Blob([e]),r):r(Mt[t]+(e||"")),Cc=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function $c(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let ui;function ew(t,e){if(Zu&&t.data instanceof Blob)return t.data.arrayBuffer().then($c).then(e);if(Ju&&(t.data instanceof ArrayBuffer||Qu(t.data)))return e($c(t.data));As(t,!1,n=>{ui||(ui=new TextEncoder),e(ui.encode(n))})}const Ac="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Ac.length;t++)dr[Ac.charCodeAt(t)]=t;const tw=t=>{let e=t.length*.75,n=t.length,r,o=0,i,s,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)i=dr[t.charCodeAt(r)],s=dr[t.charCodeAt(r+1)],a=dr[t.charCodeAt(r+2)],c=dr[t.charCodeAt(r+3)],u[o++]=i<<2|s>>4,u[o++]=(s&15)<<4|a>>2,u[o++]=(a&3)<<6|c&63;return l},nw=typeof ArrayBuffer=="function",Os=(t,e)=>{if(typeof t!="string")return{type:"message",data:ef(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:rw(t.substring(1),e)}:qr[n]?t.length>1?{type:qr[n],data:t.substring(1)}:{type:qr[n]}:Vi},rw=(t,e)=>{if(nw){const n=tw(t);return ef(n,e)}else return{base64:!0,data:t}},ef=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},tf="",ow=(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach((i,s)=>{As(i,!1,a=>{r[s]=a,++o===n&&e(r.join(tf))})})},iw=(t,e)=>{const n=t.split(tf),r=[];for(let o=0;o<n.length;o++){const i=Os(n[o],e);if(r.push(i),i.type==="error")break}return r};function sw(){return new TransformStream({transform(t,e){ew(t,n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const i=new DataView(o.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{o=new Uint8Array(9);const i=new DataView(o.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(n)})}})}let fi;function Wr(t){return t.reduce((e,n)=>e+n.length,0)}function Vr(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let o=0;o<e;o++)n[o]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function aw(t,e){fi||(fi=new TextDecoder);const n=[];let r=0,o=-1,i=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(r===0){if(Wr(n)<1)break;const c=Vr(n,1);i=(c[0]&128)===128,o=c[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(Wr(n)<2)break;const c=Vr(n,2);o=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Wr(n)<8)break;const c=Vr(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(Vi);break}o=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Wr(n)<o)break;const c=Vr(n,o);a.enqueue(Os(i?c:fi.decode(c),e)),r=0}if(o===0||o>t){a.enqueue(Vi);break}}}})}const nf=4;function Le(t){if(t)return cw(t)}function cw(t){for(var e in Le.prototype)t[e]=Le.prototype[e];return t}Le.prototype.on=Le.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Le.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Le.prototype.off=Le.prototype.removeListener=Le.prototype.removeAllListeners=Le.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Le.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this};Le.prototype.emitReserved=Le.prototype.emit;Le.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Le.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Oo=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),lt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),lw="arraybuffer";function rf(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const uw=lt.setTimeout,fw=lt.clearTimeout;function ko(t,e){e.useNativeTimers?(t.setTimeoutFn=uw.bind(lt),t.clearTimeoutFn=fw.bind(lt)):(t.setTimeoutFn=lt.setTimeout.bind(lt),t.clearTimeoutFn=lt.clearTimeout.bind(lt))}const dw=1.33;function hw(t){return typeof t=="string"?pw(t):Math.ceil((t.byteLength||t.size)*dw)}function pw(t){let e=0,n=0;for(let r=0,o=t.length;r<o;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function of(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function gw(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function mw(t){let e={},n=t.split("&");for(let r=0,o=n.length;r<o;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class vw extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class ks extends Le{constructor(e){super(),this.writable=!1,ko(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new vw(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Os(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=gw(e);return n.length?"?"+n:""}}class yw extends ks{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};iw(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ow(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=of()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let sf=!1;try{sf=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const bw=sf;function ww(){}class Ew extends yw{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class kt extends Le{constructor(e,n,r){super(),this.createRequest=e,ko(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=rf(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=kt.requestsCount++,kt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ww,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete kt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}kt.requestsCount=0;kt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Oc);else if(typeof addEventListener=="function"){const t="onpagehide"in lt?"pagehide":"unload";addEventListener(t,Oc,!1)}}function Oc(){for(let t in kt.requests)kt.requests.hasOwnProperty(t)&&kt.requests[t].abort()}const xw=function(){const t=af({xdomain:!1});return t&&t.responseType!==null}();class _w extends Ew{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=xw&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new kt(af,this.uri(),e)}}function af(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||bw))return new XMLHttpRequest}catch{}if(!e)try{return new lt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const cf=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Tw extends ks{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=cf?{}:rf(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;As(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}o&&Oo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=of()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const di=lt.WebSocket||lt.MozWebSocket;class Sw extends Tw{createSocket(e,n,r){return cf?new di(e,n,r):n?new di(e,n):new di(e)}doWrite(e,n){this.ws.send(n)}}class Rw extends ks{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=aw(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),o=sw();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const i=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),i())}).catch(a=>{})};i();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;this._writer.write(r).then(()=>{o&&Oo(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Cw={websocket:Sw,webtransport:Rw,polling:_w},$w=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Aw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gi(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let o=$w.exec(t||""),i={},s=14;for(;s--;)i[Aw[s]]=o[s]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Ow(i,i.path),i.queryKey=kw(i,i.query),i}function Ow(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function kw(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,i){o&&(n[o]=i)}),n}const Ki=typeof addEventListener=="function"&&typeof removeEventListener=="function",Yr=[];Ki&&addEventListener("offline",()=>{Yr.forEach(t=>t())},!1);class cn extends Le{constructor(e,n){if(super(),this.binaryType=lw,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Gi(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Gi(n.host).host);ko(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=mw(this.opts.query)),Ki&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Yr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=nf,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&cn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",cn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(n+=hw(o)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Oo(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,o){if(typeof n=="function"&&(o=n,n=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(cn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ki&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Yr.indexOf(this._offlineEventListener);r!==-1&&Yr.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}cn.protocol=nf;class Iw extends cn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;cn.priorWebsocketSuccess=!1;const o=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;cn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function i(){r||(r=!0,u(),n.close(),n=null)}const s=f=>{const d=new Error("probe error: "+f);d.transport=n.name,i(),this.emitReserved("upgradeError",d)};function a(){s("transport closed")}function c(){s("socket closed")}function l(f){n&&f.name!==n.name&&i()}const u=()=>{n.removeListener("open",o),n.removeListener("error",s),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",o),n.once("error",s),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Pw=class extends Iw{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(o=>Cw[o]).filter(o=>!!o)),super(e,r)}};function Mw(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Gi(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Dw=typeof ArrayBuffer=="function",Lw=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,lf=Object.prototype.toString,Nw=typeof Blob=="function"||typeof Blob<"u"&&lf.call(Blob)==="[object BlobConstructor]",Fw=typeof File=="function"||typeof File<"u"&&lf.call(File)==="[object FileConstructor]";function Is(t){return Dw&&(t instanceof ArrayBuffer||Lw(t))||Nw&&t instanceof Blob||Fw&&t instanceof File}function Xr(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Xr(t[n]))return!0;return!1}if(Is(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Xr(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Xr(t[n]))return!0;return!1}function Bw(t){const e=[],n=t.data,r=t;return r.data=qi(n,e),r.attachments=e.length,{packet:r,buffers:e}}function qi(t,e){if(!t)return t;if(Is(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=qi(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=qi(t[r],e));return n}return t}function jw(t,e){return t.data=Yi(t.data,e),delete t.attachments,t}function Yi(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Yi(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Yi(t[n],e));return t}const Uw=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Hw=5;var ce;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ce||(ce={}));class zw{constructor(e){this.replacer=e}encode(e){return(e.type===ce.EVENT||e.type===ce.ACK)&&Xr(e)?this.encodeAsBinary({type:e.type===ce.EVENT?ce.BINARY_EVENT:ce.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ce.BINARY_EVENT||e.type===ce.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Bw(e),r=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(r),o}}function kc(t){return Object.prototype.toString.call(t)==="[object Object]"}class Ps extends Le{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ce.BINARY_EVENT;r||n.type===ce.BINARY_ACK?(n.type=r?ce.EVENT:ce.ACK,this.reconstructor=new Ww(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Is(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ce[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ce.BINARY_EVENT||r.type===ce.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(i,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const i=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(Ps.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ce.CONNECT:return kc(n);case ce.DISCONNECT:return n===void 0;case ce.CONNECT_ERROR:return typeof n=="string"||kc(n);case ce.EVENT:case ce.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Uw.indexOf(n[0])===-1);case ce.ACK:case ce.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ww{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=jw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Vw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ps,Encoder:zw,get PacketType(){return ce},protocol:Hw},Symbol.toStringTag,{value:"Module"}));function bt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Gw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class uf extends Le{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[bt(e,"open",this.onopen.bind(this)),bt(e,"packet",this.onpacket.bind(this)),bt(e,"error",this.onerror.bind(this)),bt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,o,i;if(Gw.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:ce.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,f=n.pop();this._registerAckCallback(u,f),s.id=u}const a=(o=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||o===void 0?void 0:o.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;const o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},o),s=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,o)=>{const i=(s,a)=>s?o(s):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...i)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ce.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ce.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ce.EVENT:case ce.BINARY_EVENT:this.onevent(e);break;case ce.ACK:case ce.BINARY_ACK:this.onack(e);break;case ce.DISCONNECT:this.ondisconnect();break;case ce.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...o){r||(r=!0,n.packet({type:ce.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ce.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Gn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Gn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Gn.prototype.reset=function(){this.attempts=0};Gn.prototype.setMin=function(t){this.ms=t};Gn.prototype.setMax=function(t){this.max=t};Gn.prototype.setJitter=function(t){this.jitter=t};class Xi extends Le{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,ko(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Gn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||Vw;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Pw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=bt(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=bt(n,"error",i);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{o(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(o),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(bt(e,"ping",this.onping.bind(this)),bt(e,"data",this.ondata.bind(this)),bt(e,"error",this.onerror.bind(this)),bt(e,"close",this.onclose.bind(this)),bt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Oo(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new uf(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const lr={};function Zr(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Mw(t,e.path||"/socket.io"),r=n.source,o=n.id,i=n.path,s=lr[o]&&i in lr[o].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let c;return a?c=new Xi(r,e):(lr[o]||(lr[o]=new Xi(r,e)),c=lr[o]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Zr,{Manager:Xi,Socket:uf,io:Zr,connect:Zr});const Qe=Zr("https://cc241049-10707.node.fhstp.cc"),Kw=20,qw=10/Kw,yo={position:[3,2,10],rotation:[0,-33,0]},Yw=[{name:"forward",keys:["ArrowUp","KeyW"]},{name:"back",keys:["ArrowDown","KeyS"]},{name:"left",keys:["ArrowLeft","KeyA"]},{name:"right",keys:["ArrowRight","KeyD"]},{name:"brake",keys:["Space"]},{name:"reset",keys:["KeyR"]}],Gr={axleCs:new ge(0,0,-1),suspensionRestLength:.25,suspensionStiffness:24,maxSuspensionTravel:1,radius:.3},Ic=[{position:new ge(-1.4,-.4,.9),...Gr},{position:new ge(1.3,-.4,.9),...Gr},{position:new ge(-1.4,-.4,-.9),...Gr},{position:new ge(1.3,-.4,-.9),...Gr}],Xw=new ge(7,3,0),Zw=new ge(0,1.5,0),Jw=new ge,Qw=new ge,eE=new ge,tE=new ge,nE=({position:t,rotation:e})=>{const{world:n,rapier:r}=Xc(),o=xn(S=>S.controls),[,i]=Sd(),{nodes:s,materials:a}=Sr("/assets/models/Nissan.glb"),c=p.useRef(null),l=p.useRef(null),u=p.useRef([]),f=p.useRef(0),{vehicleController:d}=y1(l,u,Ic),{accelerateForce:g,brakeForce:v,steerAngle:y}=qu("rapier-dynamic-raycast-vehicle-controller",{accelerateForce:{value:10,min:1,max:100},brakeForce:{value:.5,min:0,max:.5,step:.01},steerAngle:{value:Math.PI/20,min:0,max:Math.PI/12}}),[b]=p.useState(new ge(0,100,-300)),[x]=p.useState(new ge),_=p.useRef(null);Ji((S,P)=>{var Re,fe;if(!c.current||!d.current||o)return;const R=1-Math.pow(.01,P),k=d.current,T=k.chassis(),I=i();T.translation(),T.rotation();let D=!1;const L=new r.Ray(T.translation(),{x:0,y:-1,z:0}),F=n.castRay(L,1,!1,void 0,void 0,void 0,T);if(_.current=null,S.clock.elapsedTime-f.current>qw/100){const oe=T.translation(),he=T.rotation();Qe.emit("playerUpdate",{position:[oe.x,oe.y,oe.z],rotation:{x:he.x,y:he.y,z:he.z,w:he.w}}),f.current=S.clock.elapsedTime}if(F){const oe=F.collider,he=(Re=oe.parent())==null?void 0:Re.userData;D=he==null?void 0:he.outOfBounds,_.current=oe}const W=Number(I.forward)*g-Number(I.back*g);k.setWheelEngineForce(0,W),k.setWheelEngineForce(2,W);const z=Number(I.brake)*v;k.setWheelBrake(0,z),k.setWheelBrake(1,z),k.setWheelBrake(2,z),k.setWheelBrake(3,z);const X=k.wheelSteering(0)||0,Y=Number(I.left)-Number(I.right),de=Gc.lerp(X,y*Y,.5);if(k.setWheelSteering(0,de),k.setWheelSteering(2,de),!_.current){const oe=Number(I.forward)-Number(I.back),he=Number(I.left)-Number(I.right),Fe=Qw.set(0,he*R,oe*R);Fe.applyQuaternion(T.rotation()),Fe.add(T.angvel()),T.setAngvel(new r.Vector3(Fe.x,Fe.y,Fe.z),!0)}if(I.reset||D){const oe=k.chassis();oe.setTranslation(new r.Vector3(...yo.position),!0);const he=new Ed(...yo.rotation),Fe=new sn().setFromEuler(he);oe.setRotation(Fe,!0),oe.setLinvel(new r.Vector3(0,0,0),!0),oe.setAngvel(new r.Vector3(0,0,0),!0)}const le=eE;if(_.current){le.copy(Xw);const oe=c.current.matrixWorld;le.applyMatrix4(oe)}else{const oe=T.linvel();le.copy(oe),le.normalize(),le.multiplyScalar(-10),le.add(T.translation())}le.y=Math.max(le.y,(((fe=d.current)==null?void 0:fe.chassis().translation().y)??0)+1),b.lerp(le,R),S.camera.position.copy(b);const ye=c.current.getWorldPosition(Jw),re=tE;re.copy(ye),re.add(Zw),x.lerp(re,R),S.camera.lookAt(x)});const C=ln(b1,"/assets/models/Nissan.glb");return G.jsxs(bn,{position:t,rotation:e,canSleep:!1,ref:l,colliders:!1,type:"dynamic",mass:1500,centerOfMass:{x:0,y:-1,z:0},children:[G.jsx(gi,{args:[1.7,.4,1]}),G.jsx("group",{ref:c,castShadow:!0,receiveShadow:!0,position:[.1,-.6,0],scale:[2.2,2.2,2.4],children:G.jsx("primitive",{object:C.scene})}),Ic.map((S,P)=>G.jsx("group",{ref:R=>u.current[P]=R,position:S.position,children:G.jsx("group",{"rotation-x":-Math.PI/2,children:G.jsxs("mesh",{children:[G.jsx("cylinderGeometry",{args:[.3,.3,.3,16]}),G.jsx("meshStandardMaterial",{color:"#222"})]})})},P))]})};function rE(){const{debug:t,orbitControls:e}=qu("rapier-dynamic-raycast-vehicle-controller/physics",{debug:!1,orbitControls:!1});return G.jsxs(G.Fragment,{children:[G.jsx(Td,{map:Yw,children:G.jsx(nE,{position:yo.position,rotation:yo.rotation})}),e&&G.jsx(qc,{makeDefault:!0})]})}Sr.preload("/assets/models/Nissan.glb");function oE({position:t,rotation:e,tps:n=20}){const{scene:r}=Sr("/assets/models/Nissan.glb"),o=p.useRef(),i=p.useRef(new ge),s=p.useRef(new ge),a=p.useRef(new sn),c=p.useRef(new sn),l=p.useRef(0),u=1/n;return p.useEffect(()=>{const f=new ge(t[0],t[1],t[2]);i.current.copy(f),s.current.copy(f);const d=new sn(e.x,e.y,e.z,e.w);a.current.copy(d),c.current.copy(d),l.current=performance.now()},[]),p.useEffect(()=>{i.current.copy(s.current),s.current.set(t[0],t[1],t[2]),a.current.copy(c.current),c.current.set(e.x,e.y,e.z,e.w),l.current=performance.now()},[t,e]),Ji(()=>{if(!o.current)return;const d=(performance.now()-l.current)/1e3,g=Math.min(d/u,1);o.current.position.copy(i.current).lerp(s.current,g),o.current.quaternion.copy(a.current).slerp(c.current,g)}),G.jsx("group",{ref:o,children:G.jsx("group",{position:[.1,-.6,0],scale:[2.2,2.2,2.4],children:G.jsx("primitive",{object:r.clone()})})})}function iE(t){const{nodes:e,materials:n}=Sr("/assets/models/racetrack.glb");return G.jsx(bn,{type:"fixed",colliders:!1,...t,children:G.jsx("group",{dispose:null,children:G.jsxs("group",{children:[G.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Cube032.geometry,material:n["Material.001"]}),G.jsx(nr,{args:[e.Cube032.geometry.attributes.position.array,e.Cube032.geometry.index.array]}),G.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Cube032_1.geometry,material:n["Material.003"]}),G.jsx(nr,{args:[e.Cube032_1.geometry.attributes.position.array,e.Cube032_1.geometry.index.array]}),G.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Cube032_2.geometry,material:n["Material.004"]}),G.jsx(nr,{args:[e.Cube032_2.geometry.attributes.position.array,e.Cube032_2.geometry.index.array]}),G.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Cube032_3.geometry,material:n["Material.002"]}),G.jsx(nr,{args:[e.Cube032_3.geometry.attributes.position.array,e.Cube032_3.geometry.index.array]}),G.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:e.Cube032_4.geometry,material:n["Material.006"]}),G.jsx(nr,{args:[e.Cube032_4.geometry.attributes.position.array,e.Cube032_4.geometry.index.array]})]})})})}Sr.preload("/assets/models/racetrack.glb");function sE(){return G.jsxs(G.Fragment,{children:[G.jsx(bn,{position:[0,5,-20],colliders:"ball",mass:1,children:G.jsxs("mesh",{castShadow:!0,children:[G.jsx("sphereGeometry",{args:[.5]})," ",G.jsx("meshStandardMaterial",{color:"white"})]})}),G.jsxs(bn,{position:[2,5,-20],mass:1,children:[G.jsxs("mesh",{castShadow:!0,children:[G.jsx("boxGeometry",{args:[1,1,1]})," ",G.jsx("meshStandardMaterial",{color:"orange"})]}),G.jsx(gi,{args:[.5,.5,.5]})]}),G.jsxs(bn,{position:[2,7,-20],mass:1,children:[G.jsxs("mesh",{castShadow:!0,children:[G.jsx("boxGeometry",{args:[1,1,1]}),G.jsx("meshStandardMaterial",{color:"hotpink"})]}),G.jsx(gi,{args:[.5,.5,.5]})]})]})}function aE(){const[e,n]=p.useState({}),[r,o]=p.useState(null);return p.useEffect(()=>{const i=()=>{o(Qe.id)},s=u=>{n(u)},a=u=>{n(f=>({...f,[u.id]:u.data}))},c=u=>{n(f=>{const d={...f};return delete d[u],d})},l=u=>{n(f=>({...f,[u.id]:u.data}))};return Qe.on("connect",i),Qe.on("players",s),Qe.on("playerJoined",a),Qe.on("playerLeft",c),Qe.on("playerUpdate",l),Qe.connected&&!r&&o(Qe.id),()=>{Qe.off("connect",i),Qe.off("players",s),Qe.off("playerJoined",a),Qe.off("playerLeft",c),Qe.off("playerUpdate",l)}},[]),G.jsxs(G.Fragment,{children:[G.jsx(ep,{files:"/assets/hdris/hdri.exr",background:!0}),G.jsxs(Rd,{gravity:[0,-9.81,0],children:[G.jsx(rE,{}),r&&Object.entries(e).map(([i,s])=>i===r||!(s!=null&&s.position)?null:G.jsx(oE,{position:s.position,rotation:s.rotation,tps:20},i)),G.jsx(tp,{}),G.jsx(iE,{position:[-10,-1.5,50]}),G.jsx(sE,{})]})]})}function yE(){return G.jsx("div",{style:{height:"100vh",width:"100vw"},children:G.jsxs(xd,{shadows:!0,camera:{position:[0,5,-10],fov:60},children:[G.jsx("directionalLight",{castShadow:!0,position:[5,10,5],"shadow-mapSize":[1024,1024],intensity:1}),G.jsx(aE,{}),G.jsx(qc,{})]})})}export{yE as default};
