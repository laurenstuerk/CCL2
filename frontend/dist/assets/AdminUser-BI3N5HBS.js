import{c as yt,r as a,j as t,P as z,e as Q,bT as Et,g as Dt,bU as Le,a as Ue,A as Nt,l as Pt,H as Tt,B as V,m as At,U as Ae,bV as Ot,h as xe}from"./index-BWvEucxk.js";import{u as Oe}from"./useMutation-FXCQGE_L.js";import{u as Ft,d as kt,a as Lt}from"./adminApi-DbvyW49e.js";import{P as de,A as Ut,a as Gt,b as Kt,S as Bt,g as $t,D as Vt,c as zt,d as Ht,e as Yt,h as Xt}from"./DeleteConfirmationDialog-BwEm-OHA.js";import{L as ce}from"./label-C0LW-sUZ.js";import{a as Ce,b as we,d as v,u as Ge,f as _e,c as Ke,R as Wt,A as qt,P as Qt,h as Jt,g as Zt,i as en,F as tn,D as nn,C as rn,j as on}from"./Combination-BtgIAJje.js";import{c as Be,u as $e}from"./index-9JREI_1s.js";import{I as ee}from"./input-CRPJ1D64.js";import{T as an,a as sn,b as ie,c as H,d as cn,e as L}from"./table-CLVlqRUy.js";import{S as un}from"./skeleton-DrDJ1BqJ.js";import{S as ln}from"./search-4LQ8Qmmh.js";import{S as dn}from"./shield-D6M2HRs9.js";import{C as fn}from"./calendar-B0b1-672.js";import{T as mn}from"./trash-2-SLzUxjLE.js";import{A as pn,a as hn}from"./arrow-up-Cdgv0GHz.js";import"./tslib.es6-DYuMUikC.js";/**
 * @license lucide-react v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],xn=yt("ellipsis",gn);var ve="rovingFocusGroup.onEntryFocus",vn={bubbles:!1,cancelable:!0},oe="RovingFocusGroup",[Me,Ve,wn]=Be(oe),[Mn,ze]=Ce(oe,[wn]),[bn,Cn]=Mn(oe),He=a.forwardRef((e,r)=>t.jsx(Me.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Me.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(_n,{...e,ref:r})})}));He.displayName=oe;var _n=a.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:s=!1,dir:c,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:u=!1,...i}=e,f=a.useRef(null),w=Q(r,f),M=$e(c),[S,g]=Ge({prop:l,defaultProp:d??null,onChange:h,caller:oe}),[b,D]=a.useState(!1),_=_e(p),I=Ve(n),U=a.useRef(!1),[N,T]=a.useState(0);return a.useEffect(()=>{const j=f.current;if(j)return j.addEventListener(ve,_),()=>j.removeEventListener(ve,_)},[_]),t.jsx(bn,{scope:n,orientation:o,dir:M,loop:s,currentTabStopId:S,onItemFocus:a.useCallback(j=>g(j),[g]),onItemShiftTab:a.useCallback(()=>D(!0),[]),onFocusableItemAdd:a.useCallback(()=>T(j=>j+1),[]),onFocusableItemRemove:a.useCallback(()=>T(j=>j-1),[]),children:t.jsx(z.div,{tabIndex:b||N===0?-1:0,"data-orientation":o,...i,ref:w,style:{outline:"none",...e.style},onMouseDown:v(e.onMouseDown,()=>{U.current=!0}),onFocus:v(e.onFocus,j=>{const G=!U.current;if(j.target===j.currentTarget&&G&&!b){const A=new CustomEvent(ve,vn);if(j.currentTarget.dispatchEvent(A),!A.defaultPrevented){const K=I().filter(F=>F.focusable),B=K.find(F=>F.active),x=K.find(F=>F.id===S),O=[B,x,...K].filter(Boolean).map(F=>F.ref.current);We(O,u)}}U.current=!1}),onBlur:v(e.onBlur,()=>D(!1))})})}),Ye="RovingFocusGroupItem",Xe=a.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:s=!1,tabStopId:c,children:l,...d}=e,h=we(),p=c||h,u=Cn(Ye,n),i=u.currentTabStopId===p,f=Ve(n),{onFocusableItemAdd:w,onFocusableItemRemove:M,currentTabStopId:S}=u;return a.useEffect(()=>{if(o)return w(),()=>M()},[o,w,M]),t.jsx(Me.ItemSlot,{scope:n,id:p,focusable:o,active:s,children:t.jsx(z.span,{tabIndex:i?0:-1,"data-orientation":u.orientation,...d,ref:r,onMouseDown:v(e.onMouseDown,g=>{o?u.onItemFocus(p):g.preventDefault()}),onFocus:v(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:v(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=Rn(g,u.orientation,u.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let _=f().filter(I=>I.focusable).map(I=>I.ref.current);if(b==="last")_.reverse();else if(b==="prev"||b==="next"){b==="prev"&&_.reverse();const I=_.indexOf(g.currentTarget);_=u.loop?In(_,I+1):_.slice(I+1)}setTimeout(()=>We(_))}}),children:typeof l=="function"?l({isCurrentTabStop:i,hasTabStop:S!=null}):l})})});Xe.displayName=Ye;var jn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Sn(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Rn(e,r,n){const o=Sn(e.key,n);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return jn[o]}function We(e,r=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:r}),document.activeElement!==n))return}function In(e,r){return e.map((n,o)=>e[(r+o)%e.length])}var yn=He,En=Xe,be=["Enter"," "],Dn=["ArrowDown","PageUp","Home"],qe=["ArrowUp","PageDown","End"],Nn=[...Dn,...qe],Pn={ltr:[...be,"ArrowRight"],rtl:[...be,"ArrowLeft"]},Tn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ae="Menu",[ne,An,On]=Be(ae),[Y,Qe]=Ce(ae,[On,Ke,ze]),fe=Ke(),Je=ze(),[Fn,X]=Y(ae),[kn,se]=Y(ae),Ze=e=>{const{__scopeMenu:r,open:n=!1,children:o,dir:s,onOpenChange:c,modal:l=!0}=e,d=fe(r),[h,p]=a.useState(null),u=a.useRef(!1),i=_e(c),f=$e(s);return a.useEffect(()=>{const w=()=>{u.current=!0,document.addEventListener("pointerdown",M,{capture:!0,once:!0}),document.addEventListener("pointermove",M,{capture:!0,once:!0})},M=()=>u.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",M,{capture:!0}),document.removeEventListener("pointermove",M,{capture:!0})}},[]),t.jsx(Wt,{...d,children:t.jsx(Fn,{scope:r,open:n,onOpenChange:i,content:h,onContentChange:p,children:t.jsx(kn,{scope:r,onClose:a.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:u,dir:f,modal:l,children:o})})})};Ze.displayName=ae;var Ln="MenuAnchor",je=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,s=fe(n);return t.jsx(qt,{...s,...o,ref:r})});je.displayName=Ln;var Se="MenuPortal",[Un,et]=Y(Se,{forceMount:void 0}),tt=e=>{const{__scopeMenu:r,forceMount:n,children:o,container:s}=e,c=X(Se,r);return t.jsx(Un,{scope:r,forceMount:n,children:t.jsx(de,{present:n||c.open,children:t.jsx(Qt,{asChild:!0,container:s,children:o})})})};tt.displayName=Se;var E="MenuContent",[Gn,Re]=Y(E),nt=a.forwardRef((e,r)=>{const n=et(E,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,c=X(E,e.__scopeMenu),l=se(E,e.__scopeMenu);return t.jsx(ne.Provider,{scope:e.__scopeMenu,children:t.jsx(de,{present:o||c.open,children:t.jsx(ne.Slot,{scope:e.__scopeMenu,children:l.modal?t.jsx(Kn,{...s,ref:r}):t.jsx(Bn,{...s,ref:r})})})})}),Kn=a.forwardRef((e,r)=>{const n=X(E,e.__scopeMenu),o=a.useRef(null),s=Q(r,o);return a.useEffect(()=>{const c=o.current;if(c)return Jt(c)},[]),t.jsx(Ie,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:v(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Bn=a.forwardRef((e,r)=>{const n=X(E,e.__scopeMenu);return t.jsx(Ie,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$n=Dt("MenuContent.ScrollLock"),Ie=a.forwardRef((e,r)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:s,onOpenAutoFocus:c,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:h,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:f,onDismiss:w,disableOutsideScroll:M,...S}=e,g=X(E,n),b=se(E,n),D=fe(n),_=Je(n),I=An(n),[U,N]=a.useState(null),T=a.useRef(null),j=Q(r,T,g.onContentChange),G=a.useRef(0),A=a.useRef(""),K=a.useRef(0),B=a.useRef(null),x=a.useRef("right"),C=a.useRef(0),O=M?en:a.Fragment,F=M?{as:$n,allowPinchZoom:!0}:void 0,It=m=>{var q,Pe;const y=A.current+m,P=I().filter(k=>!k.disabled),$=document.activeElement,he=(q=P.find(k=>k.ref.current===$))==null?void 0:q.textValue,ge=P.map(k=>k.textValue),Ne=tr(ge,y,he),J=(Pe=P.find(k=>k.textValue===Ne))==null?void 0:Pe.ref.current;(function k(Te){A.current=Te,window.clearTimeout(G.current),Te!==""&&(G.current=window.setTimeout(()=>k(""),1e3))})(y),J&&setTimeout(()=>J.focus())};a.useEffect(()=>()=>window.clearTimeout(G.current),[]),Zt();const W=a.useCallback(m=>{var P,$;return x.current===((P=B.current)==null?void 0:P.side)&&rr(m,($=B.current)==null?void 0:$.area)},[]);return t.jsx(Gn,{scope:n,searchRef:A,onItemEnter:a.useCallback(m=>{W(m)&&m.preventDefault()},[W]),onItemLeave:a.useCallback(m=>{var y;W(m)||((y=T.current)==null||y.focus(),N(null))},[W]),onTriggerLeave:a.useCallback(m=>{W(m)&&m.preventDefault()},[W]),pointerGraceTimerRef:K,onPointerGraceIntentChange:a.useCallback(m=>{B.current=m},[]),children:t.jsx(O,{...F,children:t.jsx(tn,{asChild:!0,trapped:s,onMountAutoFocus:v(c,m=>{var y;m.preventDefault(),(y=T.current)==null||y.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:t.jsx(nn,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:f,onDismiss:w,children:t.jsx(yn,{asChild:!0,..._,dir:b.dir,orientation:"vertical",loop:o,currentTabStopId:U,onCurrentTabStopIdChange:N,onEntryFocus:v(h,m=>{b.isUsingKeyboardRef.current||m.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(rn,{role:"menu","aria-orientation":"vertical","data-state":vt(g.open),"data-radix-menu-content":"",dir:b.dir,...D,...S,ref:j,style:{outline:"none",...S.style},onKeyDown:v(S.onKeyDown,m=>{const P=m.target.closest("[data-radix-menu-content]")===m.currentTarget,$=m.ctrlKey||m.altKey||m.metaKey,he=m.key.length===1;P&&(m.key==="Tab"&&m.preventDefault(),!$&&he&&It(m.key));const ge=T.current;if(m.target!==ge||!Nn.includes(m.key))return;m.preventDefault();const J=I().filter(q=>!q.disabled).map(q=>q.ref.current);qe.includes(m.key)&&J.reverse(),Zn(J)}),onBlur:v(e.onBlur,m=>{m.currentTarget.contains(m.target)||(window.clearTimeout(G.current),A.current="")}),onPointerMove:v(e.onPointerMove,re(m=>{const y=m.target,P=C.current!==m.clientX;if(m.currentTarget.contains(y)&&P){const $=m.clientX>C.current?"right":"left";x.current=$,C.current=m.clientX}}))})})})})})})});nt.displayName=E;var Vn="MenuGroup",ye=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(z.div,{role:"group",...o,ref:r})});ye.displayName=Vn;var zn="MenuLabel",rt=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(z.div,{...o,ref:r})});rt.displayName=zn;var ue="MenuItem",Fe="menu.itemSelect",me=a.forwardRef((e,r)=>{const{disabled:n=!1,onSelect:o,...s}=e,c=a.useRef(null),l=se(ue,e.__scopeMenu),d=Re(ue,e.__scopeMenu),h=Q(r,c),p=a.useRef(!1),u=()=>{const i=c.current;if(!n&&i){const f=new CustomEvent(Fe,{bubbles:!0,cancelable:!0});i.addEventListener(Fe,w=>o==null?void 0:o(w),{once:!0}),Et(i,f),f.defaultPrevented?p.current=!1:l.onClose()}};return t.jsx(ot,{...s,ref:h,disabled:n,onClick:v(e.onClick,u),onPointerDown:i=>{var f;(f=e.onPointerDown)==null||f.call(e,i),p.current=!0},onPointerUp:v(e.onPointerUp,i=>{var f;p.current||(f=i.currentTarget)==null||f.click()}),onKeyDown:v(e.onKeyDown,i=>{const f=d.searchRef.current!=="";n||f&&i.key===" "||be.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});me.displayName=ue;var ot=a.forwardRef((e,r)=>{const{__scopeMenu:n,disabled:o=!1,textValue:s,...c}=e,l=Re(ue,n),d=Je(n),h=a.useRef(null),p=Q(r,h),[u,i]=a.useState(!1),[f,w]=a.useState("");return a.useEffect(()=>{const M=h.current;M&&w((M.textContent??"").trim())},[c.children]),t.jsx(ne.ItemSlot,{scope:n,disabled:o,textValue:s??f,children:t.jsx(En,{asChild:!0,...d,focusable:!o,children:t.jsx(z.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:p,onPointerMove:v(e.onPointerMove,re(M=>{o?l.onItemLeave(M):(l.onItemEnter(M),M.defaultPrevented||M.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:v(e.onPointerLeave,re(M=>l.onItemLeave(M))),onFocus:v(e.onFocus,()=>i(!0)),onBlur:v(e.onBlur,()=>i(!1))})})})}),Hn="MenuCheckboxItem",at=a.forwardRef((e,r)=>{const{checked:n=!1,onCheckedChange:o,...s}=e;return t.jsx(lt,{scope:e.__scopeMenu,checked:n,children:t.jsx(me,{role:"menuitemcheckbox","aria-checked":le(n)?"mixed":n,...s,ref:r,"data-state":De(n),onSelect:v(s.onSelect,()=>o==null?void 0:o(le(n)?!0:!n),{checkForDefaultPrevented:!1})})})});at.displayName=Hn;var st="MenuRadioGroup",[Yn,Xn]=Y(st,{value:void 0,onValueChange:()=>{}}),ct=a.forwardRef((e,r)=>{const{value:n,onValueChange:o,...s}=e,c=_e(o);return t.jsx(Yn,{scope:e.__scopeMenu,value:n,onValueChange:c,children:t.jsx(ye,{...s,ref:r})})});ct.displayName=st;var it="MenuRadioItem",ut=a.forwardRef((e,r)=>{const{value:n,...o}=e,s=Xn(it,e.__scopeMenu),c=n===s.value;return t.jsx(lt,{scope:e.__scopeMenu,checked:c,children:t.jsx(me,{role:"menuitemradio","aria-checked":c,...o,ref:r,"data-state":De(c),onSelect:v(o.onSelect,()=>{var l;return(l=s.onValueChange)==null?void 0:l.call(s,n)},{checkForDefaultPrevented:!1})})})});ut.displayName=it;var Ee="MenuItemIndicator",[lt,Wn]=Y(Ee,{checked:!1}),dt=a.forwardRef((e,r)=>{const{__scopeMenu:n,forceMount:o,...s}=e,c=Wn(Ee,n);return t.jsx(de,{present:o||le(c.checked)||c.checked===!0,children:t.jsx(z.span,{...s,ref:r,"data-state":De(c.checked)})})});dt.displayName=Ee;var qn="MenuSeparator",ft=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e;return t.jsx(z.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});ft.displayName=qn;var Qn="MenuArrow",mt=a.forwardRef((e,r)=>{const{__scopeMenu:n,...o}=e,s=fe(n);return t.jsx(on,{...s,...o,ref:r})});mt.displayName=Qn;var Jn="MenuSub",[go,pt]=Y(Jn),te="MenuSubTrigger",ht=a.forwardRef((e,r)=>{const n=X(te,e.__scopeMenu),o=se(te,e.__scopeMenu),s=pt(te,e.__scopeMenu),c=Re(te,e.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:h}=c,p={__scopeMenu:e.__scopeMenu},u=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>u,[u]),a.useEffect(()=>{const i=d.current;return()=>{window.clearTimeout(i),h(null)}},[d,h]),t.jsx(je,{asChild:!0,...p,children:t.jsx(ot,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":vt(n.open),...e,ref:Le(r,s.onTriggerChange),onClick:i=>{var f;(f=e.onClick)==null||f.call(e,i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:v(e.onPointerMove,re(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(c.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:v(e.onPointerLeave,re(i=>{var w,M;u();const f=(w=n.content)==null?void 0:w.getBoundingClientRect();if(f){const S=(M=n.content)==null?void 0:M.dataset.side,g=S==="right",b=g?-5:5,D=f[g?"left":"right"],_=f[g?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+b,y:i.clientY},{x:D,y:f.top},{x:_,y:f.top},{x:_,y:f.bottom},{x:D,y:f.bottom}],side:S}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:v(e.onKeyDown,i=>{var w;const f=c.searchRef.current!=="";e.disabled||f&&i.key===" "||Pn[o.dir].includes(i.key)&&(n.onOpenChange(!0),(w=n.content)==null||w.focus(),i.preventDefault())})})})});ht.displayName=te;var gt="MenuSubContent",xt=a.forwardRef((e,r)=>{const n=et(E,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,c=X(E,e.__scopeMenu),l=se(E,e.__scopeMenu),d=pt(gt,e.__scopeMenu),h=a.useRef(null),p=Q(r,h);return t.jsx(ne.Provider,{scope:e.__scopeMenu,children:t.jsx(de,{present:o||c.open,children:t.jsx(ne.Slot,{scope:e.__scopeMenu,children:t.jsx(Ie,{id:d.contentId,"aria-labelledby":d.triggerId,...s,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var i;l.isUsingKeyboardRef.current&&((i=h.current)==null||i.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:v(e.onFocusOutside,u=>{u.target!==d.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:v(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:v(e.onKeyDown,u=>{var w;const i=u.currentTarget.contains(u.target),f=Tn[l.dir].includes(u.key);i&&f&&(c.onOpenChange(!1),(w=d.trigger)==null||w.focus(),u.preventDefault())})})})})})});xt.displayName=gt;function vt(e){return e?"open":"closed"}function le(e){return e==="indeterminate"}function De(e){return le(e)?"indeterminate":e?"checked":"unchecked"}function Zn(e){const r=document.activeElement;for(const n of e)if(n===r||(n.focus(),document.activeElement!==r))return}function er(e,r){return e.map((n,o)=>e[(r+o)%e.length])}function tr(e,r,n){const s=r.length>1&&Array.from(r).every(p=>p===r[0])?r[0]:r,c=n?e.indexOf(n):-1;let l=er(e,Math.max(c,0));s.length===1&&(l=l.filter(p=>p!==n));const h=l.find(p=>p.toLowerCase().startsWith(s.toLowerCase()));return h!==n?h:void 0}function nr(e,r){const{x:n,y:o}=e;let s=!1;for(let c=0,l=r.length-1;c<r.length;l=c++){const d=r[c],h=r[l],p=d.x,u=d.y,i=h.x,f=h.y;u>o!=f>o&&n<(i-p)*(o-u)/(f-u)+p&&(s=!s)}return s}function rr(e,r){if(!r)return!1;const n={x:e.clientX,y:e.clientY};return nr(n,r)}function re(e){return r=>r.pointerType==="mouse"?e(r):void 0}var or=Ze,ar=je,sr=tt,cr=nt,ir=ye,ur=rt,lr=me,dr=at,fr=ct,mr=ut,pr=dt,hr=ft,gr=mt,xr=ht,vr=xt,pe="DropdownMenu",[wr,xo]=Ce(pe,[Qe]),R=Qe(),[Mr,wt]=wr(pe),Mt=e=>{const{__scopeDropdownMenu:r,children:n,dir:o,open:s,defaultOpen:c,onOpenChange:l,modal:d=!0}=e,h=R(r),p=a.useRef(null),[u,i]=Ge({prop:s,defaultProp:c??!1,onChange:l,caller:pe});return t.jsx(Mr,{scope:r,triggerId:we(),triggerRef:p,contentId:we(),open:u,onOpenChange:i,onOpenToggle:a.useCallback(()=>i(f=>!f),[i]),modal:d,children:t.jsx(or,{...h,open:u,onOpenChange:i,dir:o,modal:d,children:n})})};Mt.displayName=pe;var bt="DropdownMenuTrigger",Ct=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...s}=e,c=wt(bt,n),l=R(n);return t.jsx(ar,{asChild:!0,...l,children:t.jsx(z.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:Le(r,c.triggerRef),onPointerDown:v(e.onPointerDown,d=>{!o&&d.button===0&&d.ctrlKey===!1&&(c.onOpenToggle(),c.open||d.preventDefault())}),onKeyDown:v(e.onKeyDown,d=>{o||(["Enter"," "].includes(d.key)&&c.onOpenToggle(),d.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});Ct.displayName=bt;var br="DropdownMenuPortal",_t=e=>{const{__scopeDropdownMenu:r,...n}=e,o=R(r);return t.jsx(sr,{...o,...n})};_t.displayName=br;var jt="DropdownMenuContent",St=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=wt(jt,n),c=R(n),l=a.useRef(!1);return t.jsx(cr,{id:s.contentId,"aria-labelledby":s.triggerId,...c,...o,ref:r,onCloseAutoFocus:v(e.onCloseAutoFocus,d=>{var h;l.current||(h=s.triggerRef.current)==null||h.focus(),l.current=!1,d.preventDefault()}),onInteractOutside:v(e.onInteractOutside,d=>{const h=d.detail.originalEvent,p=h.button===0&&h.ctrlKey===!0,u=h.button===2||p;(!s.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});St.displayName=jt;var Cr="DropdownMenuGroup",_r=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(ir,{...s,...o,ref:r})});_r.displayName=Cr;var jr="DropdownMenuLabel",Sr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(ur,{...s,...o,ref:r})});Sr.displayName=jr;var Rr="DropdownMenuItem",Rt=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(lr,{...s,...o,ref:r})});Rt.displayName=Rr;var Ir="DropdownMenuCheckboxItem",yr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(dr,{...s,...o,ref:r})});yr.displayName=Ir;var Er="DropdownMenuRadioGroup",Dr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(fr,{...s,...o,ref:r})});Dr.displayName=Er;var Nr="DropdownMenuRadioItem",Pr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(mr,{...s,...o,ref:r})});Pr.displayName=Nr;var Tr="DropdownMenuItemIndicator",Ar=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(pr,{...s,...o,ref:r})});Ar.displayName=Tr;var Or="DropdownMenuSeparator",Fr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(hr,{...s,...o,ref:r})});Fr.displayName=Or;var kr="DropdownMenuArrow",Lr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(gr,{...s,...o,ref:r})});Lr.displayName=kr;var Ur="DropdownMenuSubTrigger",Gr=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(xr,{...s,...o,ref:r})});Gr.displayName=Ur;var Kr="DropdownMenuSubContent",Br=a.forwardRef((e,r)=>{const{__scopeDropdownMenu:n,...o}=e,s=R(n);return t.jsx(vr,{...s,...o,ref:r,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Br.displayName=Kr;var $r=Mt,Vr=Ct,zr=_t,Hr=St,Yr=Rt;function Xr({...e}){return t.jsx($r,{"data-slot":"dropdown-menu",...e})}function Wr({...e}){return t.jsx(Vr,{"data-slot":"dropdown-menu-trigger",...e})}function qr({className:e,sideOffset:r=4,...n}){return t.jsx(zr,{children:t.jsx(Hr,{"data-slot":"dropdown-menu-content",sideOffset:r,className:Ue("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function ke({className:e,inset:r,variant:n="default",...o}){return t.jsx(Yr,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":n,className:Ue("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...o})}function Qr(e,r){const[n,o]=a.useState(e);return a.useEffect(()=>{const s=setTimeout(()=>{o(e)},r);return()=>{clearTimeout(s)}},[e,r]),n}const Z=({columnId:e,label:r,icon:n,sorting:o,onSort:s})=>t.jsxs(V,{variant:"ghost",onClick:()=>s(e),className:"pl-0 hover:bg-transparent",children:[t.jsx(n,{className:"mr-2 h-4 w-4"}),r,o.sortBy===e&&(o.order==="asc"?t.jsx(pn,{className:"ml-2 h-4 w-4"}):t.jsx(hn,{className:"ml-2 h-4 w-4"}))]});function Jr({user:e,isOpen:r,onOpenChange:n,onSave:o,isPending:s}){const[c,l]=a.useState({});a.useEffect(()=>{e&&l({name:e.name||"",surname:e.surname||"",username:e.username||"",email:e.email||"",role:e.role||"user"})},[e]);const d=p=>{l(u=>({...u,[p.target.name]:p.target.value}))},h=()=>{o(e.id,c)};return e?t.jsx(Vt,{open:r,onOpenChange:n,children:t.jsxs(zt,{className:"bg-neutral-900 border-neutral-800 text-white",children:[t.jsx(Ht,{children:t.jsxs(Yt,{children:["Edit User: @",e.username]})}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(ce,{htmlFor:"name",className:"text-right",children:"Name"}),t.jsx(ee,{id:"name",name:"name",value:c.name,onChange:d,className:"col-span-3 bg-neutral-800 border-neutral-700"})]}),t.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(ce,{htmlFor:"surname",className:"text-right",children:"Surname"}),t.jsx(ee,{id:"surname",name:"surname",value:c.surname,onChange:d,className:"col-span-3 bg-neutral-800 border-neutral-700"})]}),t.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(ce,{htmlFor:"email",className:"text-right",children:"E-mail"}),t.jsx(ee,{id:"email",name:"email",value:c.email,onChange:d,className:"col-span-3 bg-neutral-800 border-neutral-700"})]}),t.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(ce,{htmlFor:"role",className:"text-right",children:"Role"}),t.jsx(ee,{id:"role",name:"role",value:c.role,onChange:d,className:"col-span-3 bg-neutral-800 border-neutral-700"})]})]}),t.jsx(Xt,{children:t.jsx(V,{onClick:h,className:"bg-blue-600 hover:bg-blue-700",children:"Save Changes"})})]})}):null}function vo(){var K,B;const e=Nt(),[r,n]=a.useState(1),[o,s]=a.useState(10),[c,l]=a.useState({sortBy:"id",order:"desc"}),[d,h]=a.useState(""),[p,u]=a.useState(!1),[i,f]=a.useState(!1),[w,M]=a.useState(null),S=Qr(d,500),{data:g,isLoading:b,isError:D,error:_}=Pt({queryKey:["adminUsers",{page:r,limit:o,sorting:c,search:S}],queryFn:()=>Lt({page:r,limit:o,...c,search:S}),keepPreviousData:!0}),I=Oe({mutationFn:Ft,onSuccess:()=>{toast.success("User updated successfully."),e.invalidateQueries(["adminUsers"]),u(!1)},onError:x=>{var C,O;return toast.error(((O=(C=x.response)==null?void 0:C.data)==null?void 0:O.message)||"Failed to update user.")}}),U=Oe({mutationFn:kt,onSuccess:()=>{toast.success("User deleted successfully."),f(!1),e.invalidateQueries({queryKey:["adminUsers"]})},onError:x=>{var C,O;return toast.error(((O=(C=x.response)==null?void 0:C.data)==null?void 0:O.message)||"Failed to delete user.")}}),N=x=>{n(1),l(C=>({sortBy:x,order:C.sortBy===x&&C.order==="asc"?"desc":"asc"}))},T=x=>{M(x),u(!0)},j=x=>{M(x),f(!0)},G=(x,C)=>{I.mutate({userId:x,userData:C})},A=()=>{w&&U.mutate(w)};return t.jsxs("div",{className:"min-h-screen bg-black text-gray-100 mt-16 p-4 md:p-6 max-w-7xl mx-auto",children:[t.jsxs(Tt,{children:[t.jsx("title",{children:"Admin Dashboard - User Management"}),t.jsx("meta",{name:"description",content:"Manage users, view statistics, and perform administrative tasks."})]}),t.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:t.jsx("h1",{className:"text-3xl font-bold",children:"User Management"})}),t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-4 gap-4",children:[t.jsxs("div",{className:"relative w-full md:w-auto",children:[t.jsx(ln,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),t.jsx(ee,{placeholder:"Search by name, email, or username...",className:"w-full md:w-80 bg-neutral-950 border-gray-700 pl-10 text-gray-100 placeholder-gray-400",value:d,onChange:x=>{n(1),h(x.target.value)}})]}),t.jsx(V,{onClick:()=>window.print(),variant:"outline",className:"w-full md:w-auto",children:"Export"})]}),t.jsx(At,{className:"bg-black border-gray-800",children:t.jsx("div",{id:"printable-table-area",children:t.jsxs(an,{children:[t.jsx(sn,{children:t.jsxs(ie,{className:"border-gray-800 hover:bg-transparent",children:[t.jsx(H,{children:t.jsx(Z,{columnId:"name",label:"Full name",icon:Ae,sorting:c,onSort:N})}),t.jsx(H,{children:t.jsx(Z,{columnId:"username",label:"Username",icon:Ae,sorting:c,onSort:N})}),t.jsx(H,{children:t.jsx(Z,{columnId:"email",label:"Email",icon:Ot,sorting:c,onSort:N})}),t.jsx(H,{children:t.jsx(Z,{columnId:"role",label:"Role",icon:dn,sorting:c,onSort:N})}),t.jsx(H,{children:"Status"}),t.jsx(H,{children:t.jsx(Z,{columnId:"joinedDate",label:"Joined",icon:fn,sorting:c,onSort:N})}),t.jsx(H,{className:"text-right",children:"Actions"})]})}),t.jsx(cn,{children:b?Array.from({length:o}).map((x,C)=>t.jsx(ie,{className:"border-gray-800",children:t.jsx(L,{colSpan:6,children:t.jsx(un,{className:"h-8 w-full"})})},C)):D?t.jsx(ie,{children:t.jsxs(L,{colSpan:6,className:"text-center text-red-500 py-10",children:["Error: ",_.message]})}):(K=g==null?void 0:g.data)==null?void 0:K.map(x=>{var C;return t.jsxs(ie,{className:"border-gray-800 hover:bg-neutral-900/75 transition-colors",children:[t.jsx(L,{children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs(Ut,{className:"h-8 w-8",children:[t.jsx(Gt,{src:x.profilePicture||""}),t.jsx(Kt,{children:(C=x.name)==null?void 0:C[0]})]}),t.jsxs("div",{className:"font-medium",children:[x.name," ",x.surname]})]})}),t.jsxs(L,{className:"text-neutral-300",children:["@",x.username]}),t.jsx(L,{className:"text-neutral-300",children:x.email}),t.jsx(L,{children:t.jsx(xe,{variant:"outline",children:x.role})}),t.jsx(L,{children:x.isActive?t.jsx(xe,{className:"bg-green-600/20 text-green-400 border border-green-600/30",children:"Active"}):t.jsx(xe,{variant:"outline",className:"text-neutral-500 border-neutral-700",children:"Offline"})}),t.jsx(L,{className:"text-neutral-300",children:new Date(x.joinedDate).toLocaleDateString()}),t.jsx(L,{className:"text-right",children:t.jsxs(Xr,{children:[t.jsx(Wr,{asChild:!0,children:t.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8",children:t.jsx(xn,{className:"h-4 w-4"})})}),t.jsxs(qr,{align:"end",className:"bg-neutral-900 border-neutral-700 text-white",children:[t.jsxs(ke,{onSelect:()=>T(x),children:[t.jsx(Bt,{className:"mr-2 h-4 w-4"})," Edit User"]}),t.jsxs(ke,{onSelect:()=>j(x.id),className:"text-red-500 focus:text-red-500 focus:bg-red-900/50",children:[t.jsx(mn,{className:"mr-2 h-4 w-4"})," Delete User"]})]})]})})]},x.id)})})]})})}),t.jsxs("div",{className:"flex items-center justify-between pt-4",children:[t.jsxs("div",{className:"text-sm text-neutral-400",children:["Total Users: ",((B=g==null?void 0:g.pagination)==null?void 0:B.totalRows)||0]}),(g==null?void 0:g.pagination)&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(V,{variant:"outline",size:"sm",onClick:()=>n(1),disabled:b||r===1,children:"First"}),t.jsx(V,{variant:"outline",size:"sm",onClick:()=>n(x=>x-1),disabled:b||r===1,children:"Previous"}),t.jsxs("span",{className:"text-sm text-neutral-400",children:["Page ",r," of ",g.pagination.totalPages||1]}),t.jsx(V,{variant:"outline",size:"sm",onClick:()=>n(x=>x+1),disabled:b||r===g.pagination.totalPages,children:"Next"}),t.jsx(V,{variant:"outline",size:"sm",onClick:()=>n(g.pagination.totalPages),disabled:b||r===g.pagination.totalPages,children:"Last"})]})]}),t.jsx(Jr,{user:w,isOpen:p,onOpenChange:u,onSave:G,isPending:I.isPending}),t.jsx($t,{open:i,onOpenChange:f,onConfirm:A,isPending:U.isPending,itemType:`user ${w}`})]})}export{vo as default};
